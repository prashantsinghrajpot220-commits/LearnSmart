
> learnsmart@1.0.0 lint
> eslint . --format json

[{"filePath":"/home/engine/project/app/_layout.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadNotes'. Either include it or remove the dependency array.","line":106,"column":6,"nodeType":"ArrayExpression","endLine":106,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [loadXP, loadAchievements, loadNotes]","fix":{"range":[3973,3999],"text":"[loadXP, loadAchievements, loadNotes]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react';\nimport { Stack } from 'expo-router';\nimport { StatusBar } from 'expo-status-bar';\nimport { Platform } from 'react-native';\nimport mobileAds from 'react-native-google-mobile-ads';\nimport { ThemeProvider, useTheme } from '../components/ThemeContext';\nimport { SmartyChatProvider } from '../context/ChatContext';\nimport SmartyChat from '../components/SmartyChat';\nimport { useChatStore } from '../store/chatStore';\nimport { initializeNetworkListener, cleanupNetworkListener } from '../services/networkService';\nimport { streakService } from '../services/streakService';\nimport { useXPStore } from '../store/xpStore';\nimport { useAchievementStore } from '../store/achievementStore';\nimport { BottomTabNavigator } from '../components/BottomTabNavigator';\nimport { HeaderComponent } from '../components/HeaderComponent';\nimport { FloatingActionButton } from '../components/FloatingActionButton';\nimport { usePathname } from 'expo-router';\nimport ErrorBoundary from '../components/ErrorBoundary';\nimport { analyticsService } from '@/services/AnalyticsService';\nimport { mistakeAnalysisService } from '@/services/MistakeAnalysisService';\nimport { useVoiceNoteStore } from '@/store/voiceNoteStore';\nimport { useNotificationStore } from '@/store/notificationStore';\nimport SocialNotificationBanner from '@/components/SocialNotificationBanner';\n\nfunction RootLayoutContent() {\n  const { colors, isDark } = useTheme();\n  const { isChatOpen, closeChat, toggleChat } = useChatStore();\n  const [isLoaded, setIsLoaded] = useState(false);\n  const pathname = usePathname();\n  const { loadXP } = useXPStore();\n  const { loadAchievements } = useAchievementStore();\n  const { loadNotes } = useVoiceNoteStore();\n\n  const notifications = useNotificationStore((s) => s.notifications);\n  const activeNotificationId = useNotificationStore((s) => s.activeNotificationId);\n  const dismissActive = useNotificationStore((s) => s.dismissActive);\n\n  const activeNotification = useMemo(\n    () => notifications.find((n) => n.id === activeNotificationId) ?? null,\n    [activeNotificationId, notifications]\n  );\n\n  useEffect(() => {\n    // Initialize AdMob\n    if (Platform.OS !== 'web') {\n      mobileAds()\n        .initialize()\n        .then(() => {\n          console.log('AdMob initialized');\n        })\n        .catch(err => {\n          console.warn('AdMob initialization failed:', err);\n        });\n    }\n\n    // Initialize network listener\n    initializeNetworkListener();\n\n    // Initialize gamification services\n    const initializeGamification = async () => {\n      try {\n        // Load XP and achievements\n        await loadXP();\n        await loadAchievements();\n        await loadNotes();\n        await useNotificationStore.getState().loadNotifications();\n        \n        // Initialize and check streak\n        await streakService.initialize();\n        const streakResult = await streakService.checkAndUpdateStreak();\n        \n        // Initialize analytics and mistake tracking\n        await analyticsService.initialize();\n        await mistakeAnalysisService.initialize();\n        \n        // Check streak achievements\n        const { checkAndUnlock } = useAchievementStore.getState();\n        const { getXP, totalLessonsRead, totalQuizzesCompleted } = useXPStore.getState();\n\n        checkAndUnlock({\n          currentStreak: streakResult.streak,\n          totalQuizzesCompleted,\n          totalLessonsRead,\n          currentXP: getXP(),\n          rank: useXPStore.getState().getRank().name,\n        });\n      } catch (error) {\n        console.error('Failed to initialize gamification:', error);\n      }\n      \n      // Delay setting loaded state to avoid sync setState in effect\n      const timer = setTimeout(() => {\n        setIsLoaded(true);\n      }, 100);\n      \n      return () => {\n        clearTimeout(timer);\n      };\n    };\n\n    initializeGamification();\n\n    return () => {\n      cleanupNetworkListener();\n    };\n  }, [loadXP, loadAchievements]);\n\n  const showFloatingChat = !['/chat', '/auth', '/'].includes(pathname);\n\n  if (!isLoaded) {\n    return (\n      <>\n        <StatusBar style={isDark ? 'light' : 'dark'} backgroundColor={colors.background} />\n        <Stack\n          screenOptions={{\n            headerShown: false,\n            contentStyle: { backgroundColor: colors.background },\n          }}\n        >\n          <Stack.Screen name=\"index\" />\n          <Stack.Screen name=\"auth\" />\n          <Stack.Screen name=\"home\" />\n          <Stack.Screen name=\"home-12plus\" />\n          <Stack.Screen name=\"chapters\" />\n          <Stack.Screen name=\"lesson\" />\n          <Stack.Screen name=\"trophy-room\" />\n          <Stack.Screen name=\"profile\" />\n          <Stack.Screen name=\"explore\" />\n          <Stack.Screen name=\"chat\" />\n          <Stack.Screen name=\"community\" />\n          <Stack.Screen name=\"group/[groupId]\" />\n          <Stack.Screen name=\"qa-forum\" />\n          <Stack.Screen name=\"question-detail\" />\n        </Stack>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <StatusBar style={isDark ? 'light' : 'dark'} backgroundColor={colors.background} />\n      {activeNotification ? (\n        <SocialNotificationBanner\n          notification={activeNotification}\n          onDismiss={() => {\n            dismissActive();\n          }}\n        />\n      ) : null}\n      <HeaderComponent />\n      <Stack\n        screenOptions={{\n          headerShown: false,\n          contentStyle: { backgroundColor: colors.background },\n        }}\n      >\n        <Stack.Screen name=\"index\" />\n        <Stack.Screen name=\"auth\" />\n        <Stack.Screen name=\"home\" />\n        <Stack.Screen name=\"home-12plus\" />\n        <Stack.Screen name=\"chapters\" />\n        <Stack.Screen name=\"lesson\" />\n        <Stack.Screen name=\"trophy-room\" />\n        <Stack.Screen name=\"profile\" />\n        <Stack.Screen name=\"explore\" />\n        <Stack.Screen name=\"chat\" />\n        <Stack.Screen name=\"community\" />\n        <Stack.Screen name=\"group/[groupId]\" />\n        <Stack.Screen\n          name=\"qa-forum\"\n          options={{\n            headerShown: true,\n            title: 'Q&A Forum',\n          }}\n        />\n        <Stack.Screen\n          name=\"question-detail\"\n          options={{\n            headerShown: true,\n            title: 'Question',\n          }}\n        />\n        <Stack.Screen name=\"privacy-policy\" />\n        <Stack.Screen name=\"terms\" />\n        <Stack.Screen name=\"about\" />\n        <Stack.Screen\n          name=\"weak-areas\"\n          options={{\n            headerShown: true,\n            title: 'Weak Areas',\n          }}\n        />\n        <Stack.Screen\n          name=\"personalized-plan\"\n          options={{\n            headerShown: true,\n            title: 'Study Plan',\n          }}\n        />\n        <Stack.Screen\n          name=\"voice-notes\"\n          options={{\n            headerShown: true,\n            title: 'Voice Notes',\n          }}\n        />\n        <Stack.Screen\n          name=\"analytics\"\n          options={{\n            headerShown: true,\n            title: 'Analytics',\n          }}\n        />\n      </Stack>\n      <BottomTabNavigator />\n      {showFloatingChat && <FloatingActionButton onPress={toggleChat} />}\n      {isChatOpen && <SmartyChat onClose={closeChat} />}\n    </>\n  );\n}\n\nexport default function RootLayout() {\n  return (\n    <ThemeProvider>\n      <SmartyChatProvider>\n        <ErrorBoundary>\n          <RootLayoutContent />\n        </ErrorBoundary>\n      </SmartyChatProvider>\n    </ThemeProvider>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/about.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/analytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/auth.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsSignup' is assigned a value but never used.","line":21,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'checkForTestAccountAndBypass' function makes the dependencies of useEffect Hook (at line 81) change on every render. Move it inside the useEffect callback. Alternatively, wrap the definition of 'checkForTestAccountAndBypass' in its own useCallback() Hook.","line":59,"column":9,"nodeType":"VariableDeclarator","endLine":74,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  Animated,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useUserStore, AgeGroup } from '@/store/userStore';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { Feather } from '@expo/vector-icons';\nimport AnimatedLoginForm from '@/components/AnimatedLoginForm';\n\nexport default function Auth() {\n  const router = useRouter();\n  const { colors } = useTheme();\n  const [isSignup, setIsSignup] = useState(true);\n  const [signupStep, setSignupStep] = useState<'form' | 'age'>('form');\n  const [selectedAge, setSelectedAge] = useState<AgeGroup | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const setAgeGroup = useUserStore((state) => state.setAgeGroup);\n  const completeOnboarding = useUserStore((state) => state.completeOnboarding);\n\n  const ageStepOpacity = useMemo(() => new Animated.Value(0), []);\n\n  React.useEffect(() => {\n    if (isSignup && signupStep === 'age') {\n      ageStepOpacity.setValue(0);\n      Animated.timing(ageStepOpacity, {\n        toValue: 1,\n        duration: 350,\n        useNativeDriver: true,\n      }).start();\n    }\n  }, [ageStepOpacity, isSignup, signupStep]);\n\n  const handleAgeContinue = async () => {\n    if (!selectedAge) return;\n\n    setIsLoading(true);\n\n    try {\n      await setAgeGroup(selectedAge);\n      completeOnboarding();\n      router.replace(selectedAge === '12plus' ? '/home-12plus' : '/home');\n    } catch (error) {\n      console.error('Failed to save age group:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Play Store Test Account - Skip age selection and go directly to home\n  const checkForTestAccountAndBypass = async () => {\n    try {\n      // Get stored user data to check if it's test account\n      const userData = await AsyncStorage.getItem('@learnsmart_user_name');\n      // If user name is \"Test User\", bypass age selection\n      if (userData === 'Test User') {\n        await setAgeGroup('12plus'); // Default to 12+ for test account\n        completeOnboarding();\n        router.replace('/home-12plus');\n        return true;\n      }\n    } catch (error) {\n      console.error('Error checking for test account:', error);\n    }\n    return false;\n  };\n\n  // Check for test account when component mounts\n  React.useEffect(() => {\n    if (isSignup && signupStep === 'age') {\n      checkForTestAccountAndBypass();\n    }\n  }, [signupStep, isSignup, checkForTestAccountAndBypass]);\n\n  const styles = getStyles(colors);\n\n  if (isSignup && signupStep === 'age') {\n    return (\n      <View style={styles.container}>\n        <Animated.View style={[styles.content, { opacity: ageStepOpacity }]}>\n          <Text style={styles.title}>What's your age group?</Text>\n          <Text style={styles.subtitle}>Help us personalize your learning experience</Text>\n\n          <View style={styles.ageSelectionContainer}>\n            <TouchableOpacity\n              style={[styles.ageCard, selectedAge === 'under12' && styles.ageCardSelected]}\n              onPress={() => setSelectedAge('under12')}\n              activeOpacity={0.8}\n            >\n              <View style={[styles.ageIconCircle, selectedAge === 'under12' && styles.ageIconCircleSelected]}>\n                <Feather name=\"book-open\" size={32} color={selectedAge === 'under12' ? colors.white : colors.primary} />\n              </View>\n              <Text style={[styles.ageTitle, selectedAge === 'under12' && styles.ageTitleSelected]}>Under 12</Text>\n              <Text style={styles.ageDescription}>Fun and colorful learning experience</Text>\n              {selectedAge === 'under12' && (\n                <View style={styles.checkmarkContainer}>\n                  <Feather name=\"check-circle\" size={24} color={colors.primary} />\n                </View>\n              )}\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.ageCard, selectedAge === '12plus' && styles.ageCardSelected]}\n              onPress={() => setSelectedAge('12plus')}\n              activeOpacity={0.8}\n            >\n              <View style={[styles.ageIconCircle, selectedAge === '12plus' && styles.ageIconCircleSelected]}>\n                <Feather name=\"award\" size={32} color={selectedAge === '12plus' ? colors.white : colors.primary} />\n              </View>\n              <Text style={[styles.ageTitle, selectedAge === '12plus' && styles.ageTitleSelected]}>12+</Text>\n              <Text style={styles.ageDescription}>Professional and focused dashboard</Text>\n              {selectedAge === '12plus' && (\n                <View style={styles.checkmarkContainer}>\n                  <Feather name=\"check-circle\" size={24} color={colors.primary} />\n                </View>\n              )}\n            </TouchableOpacity>\n          </View>\n\n          <TouchableOpacity\n            style={[styles.primaryButton, !selectedAge && styles.primaryButtonDisabled]}\n            onPress={handleAgeContinue}\n            disabled={!selectedAge || isLoading}\n            activeOpacity={0.8}\n          >\n            {isLoading ? (\n              <ActivityIndicator color={colors.white} />\n            ) : (\n              <Text style={styles.primaryButtonText}>Continue</Text>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => setSignupStep('form')}\n            activeOpacity={0.7}\n          >\n            <Text style={styles.backButtonText}>‚Üê Back</Text>\n          </TouchableOpacity>\n        </Animated.View>\n      </View>\n    );\n  }\n\n  return <AnimatedLoginForm />;\n}\n\nconst getStyles = (colors: ThemeColors) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: Spacing.xl,\n    paddingTop: Spacing.xxl * 2,\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: FontSizes.xxxl,\n    fontWeight: FontWeights.bold,\n    color: colors.text,\n    textAlign: 'center',\n    marginBottom: Spacing.sm,\n  },\n  subtitle: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: Spacing.xxl,\n  },\n  ageSelectionContainer: {\n    gap: Spacing.lg,\n    marginVertical: Spacing.xxl,\n  },\n  ageCard: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.xl,\n    alignItems: 'center',\n    borderWidth: 2,\n    borderColor: colors.lightGray,\n    position: 'relative',\n  },\n  ageCardSelected: {\n    borderColor: colors.primary,\n    backgroundColor: colors.cardBackground,\n    shadowColor: colors.primary,\n    shadowOffset: {\n      width: 0,\n      height: 4,\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 6,\n  },\n  ageIconCircle: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: colors.lightGray,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: Spacing.md,\n  },\n  ageIconCircleSelected: {\n    backgroundColor: colors.primary,\n  },\n  ageTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    color: colors.text,\n    marginBottom: Spacing.xs,\n  },\n  ageTitleSelected: {\n    color: colors.primary,\n  },\n  ageDescription: {\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  checkmarkContainer: {\n    position: 'absolute',\n    top: Spacing.md,\n    right: Spacing.md,\n  },\n  primaryButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: Spacing.md,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: Spacing.lg,\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  primaryButtonText: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.semibold,\n    color: colors.white,\n  },\n  primaryButtonDisabled: {\n    opacity: 0.5,\n  },\n  secondaryButton: {\n    backgroundColor: colors.cardBackground,\n    paddingVertical: Spacing.md,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: Spacing.md,\n    borderWidth: 2,\n    borderColor: colors.primary,\n  },\n  secondaryButtonText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.primary,\n  },\n  backButton: {\n    backgroundColor: colors.cardBackground,\n    paddingVertical: Spacing.md,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: Spacing.md,\n  },\n  backButtonText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/chapters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/chat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/community.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/exam-details.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/explore.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/group/[groupId].tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/home-12plus.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DarkModeToggle' is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Platform,\n  ScrollView,\n  Animated,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { DarkModeToggle } from '@/components/DarkModeToggle';\nimport { Feather } from '@expo/vector-icons';\nimport { useUserStore } from '@/store/userStore';\nimport { AvatarDisplay } from '@/components/AvatarSelector';\nimport PathwaysTab from '@/components/PathwaysTab';\n\nexport default function Home12Plus() {\n  const router = useRouter();\n  const { colors } = useTheme();\n  const { userName, ageGroup, loadUserData, logout, selectedAvatar } = useUserStore();\n\n  const opacity = useMemo(() => new Animated.Value(0), []);\n\n  useEffect(() => {\n    loadUserData();\n\n    Animated.timing(opacity, {\n      toValue: 1,\n      duration: 350,\n      useNativeDriver: true,\n    }).start();\n  }, [loadUserData, opacity]);\n\n  useEffect(() => {\n    if (ageGroup === 'under12') {\n      router.replace('/home');\n    }\n  }, [ageGroup, router]);\n\n  const displayName = userName || 'Student';\n\n  const styles = useMemo(() => getStyles(colors), [colors]);\n\n  const handleLogout = () => {\n    logout();\n    router.replace('/');\n  };\n\n  const handleProfilePress = () => {\n    router.push('/profile');\n  };\n\n  return (\n    <ScrollView style={styles.container} contentContainerStyle={styles.scrollContent}>\n      <Animated.View style={[styles.content, { opacity }]}>\n        <View style={styles.header}>\n          <View style={styles.headerTop}>\n            <View style={{ flex: 1 }}>\n              <Text style={styles.title}>Welcome, {displayName}</Text>\n              <Text style={styles.subtitle}>Your learning dashboard</Text>\n            </View>\n            <TouchableOpacity onPress={handleProfilePress} activeOpacity={0.7}>\n              <AvatarDisplay id={selectedAvatar} size={60} />\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        <PathwaysTab />\n\n        <View style={styles.infoCard}>\n          <Text style={styles.infoTitle}>Age Group</Text>\n          <View style={styles.infoRow}>\n            <Text style={styles.infoValue}>12+</Text>\n            <TouchableOpacity\n              style={styles.infoButton}\n              activeOpacity={0.8}\n              onPress={() => {\n                // Placeholder for future implementation\n              }}\n            >\n              <Text style={styles.infoButtonText}>Change</Text>\n            </TouchableOpacity>\n          </View>\n          <Text style={styles.infoNote}>Changing age group will be available in Settings soon.</Text>\n        </View>\n\n        <TouchableOpacity style={styles.goToSubjectsButton} activeOpacity={0.85} onPress={() => router.push('/home')}>\n          <Text style={styles.goToSubjectsText}>Go to Subjects (Under 12 experience)</Text>\n          <Feather name=\"chevron-right\" size={18} color={colors.text} />\n        </TouchableOpacity>\n\n        {userName && (\n          <TouchableOpacity style={styles.logoutButton} onPress={handleLogout} activeOpacity={0.8}>\n            <Text style={styles.logoutButtonText}>Sign Out</Text>\n          </TouchableOpacity>\n        )}\n      </Animated.View>\n    </ScrollView>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) => {\n  return StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background,\n    },\n    scrollContent: {\n      flexGrow: 1,\n    },\n    content: {\n      paddingHorizontal: Spacing.xl,\n      paddingTop: Platform.select({ ios: 110, default: 70 }),\n      paddingBottom: Spacing.xxl + 80,\n    },\n    header: {\n      marginBottom: Spacing.xl,\n    },\n    headerTop: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'flex-start',\n      marginBottom: Spacing.sm,\n    },\n    title: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      flex: 1,\n    },\n    subtitle: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n    },\n    infoCard: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      borderLeftWidth: 4,\n      borderLeftColor: colors.primary,\n      marginBottom: Spacing.lg,\n    },\n    infoTitle: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    infoRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      marginBottom: Spacing.sm,\n    },\n    infoValue: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    infoButton: {\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.md,\n      borderWidth: 1,\n      borderColor: colors.primary,\n    },\n    infoButtonText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n      color: colors.primary,\n    },\n    infoNote: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      lineHeight: 18,\n    },\n    goToSubjectsButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    goToSubjectsText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      flex: 1,\n      marginRight: Spacing.md,\n    },\n    logoutButton: {\n      backgroundColor: colors.border,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginTop: Spacing.xl,\n    },\n    logoutButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.textSecondary,\n    },\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/home.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DarkModeToggle' is defined but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ProgressBar' is defined but never used.","line":21,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Platform,\n  ScrollView,\n  Animated,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useUserStore } from '@/store/userStore';\nimport { AvatarDisplay } from '@/components/AvatarSelector';\nimport { getSubjectsForClass } from '@/constants/curriculum';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { useSmartyContext } from '@/context/ChatContext';\nimport { DarkModeToggle } from '@/components/DarkModeToggle';\nimport { XPBar } from '@/components/XPBar';\nimport { ProgressRing } from '@/components/ProgressRing';\nimport ProgressBar from '@/components/ProgressBar';\nimport StreakBadge from '@/components/StreakBadge';\nimport ExamCountdownWidget from '@/components/ExamCountdownWidget';\nimport { streakService } from '@/services/streakService';\nimport { useXPStore } from '@/store/xpStore';\nimport { useAchievementStore } from '@/store/achievementStore';\nimport { Feather } from '@expo/vector-icons';\n\nexport default function Home() {\n  const router = useRouter();\n  const { userName, selectedClass, ageGroup, logout, loadUserData, selectedAvatar } = useUserStore();\n  const { colors } = useTheme();\n  const { setCurrentContext } = useSmartyContext();\n  const { loadXP } = useXPStore();\n  const { loadAchievements } = useAchievementStore();\n  const [streak, setStreak] = useState(0);\n  const opacity = useMemo(() => new Animated.Value(0), []);\n\n  useEffect(() => {\n    loadUserData();\n    loadXP();\n    loadAchievements();\n    setCurrentContext(undefined, undefined, undefined);\n\n    // Load streak\n    const loadStreak = async () => {\n      const currentStreak = await streakService.getStreak();\n      setStreak(currentStreak);\n    };\n    loadStreak();\n\n    // Fade in animation\n    Animated.timing(opacity, {\n      toValue: 1,\n      duration: 350,\n      useNativeDriver: true,\n    }).start();\n  }, [loadUserData, setCurrentContext, loadXP, loadAchievements, opacity]);\n\n  useEffect(() => {\n    if (ageGroup === '12plus') {\n      router.replace('/home-12plus');\n    }\n  }, [ageGroup, router]);\n\n  const subjects = selectedClass ? getSubjectsForClass(selectedClass) : [];\n  const classNum = selectedClass ? parseInt(selectedClass.replace('Class ', '')) : 0;\n\n  const handleSubjectPress = (subject: string) => {\n    if (subject.includes('Coming Soon')) {\n      return;\n    }\n    router.push({\n      pathname: '/chapters',\n      params: { subject, class: selectedClass },\n    });\n  };\n\n  const handleLogout = () => {\n    logout();\n    router.replace('/');\n  };\n\n  const handleProfilePress = () => {\n    router.push('/profile');\n  };\n\n  const displayName = userName || 'Student';\n\n  const styles = getStyles(colors);\n\n  return (\n    <ScrollView style={styles.container} contentContainerStyle={styles.scrollContent}>\n      <Animated.View style={[styles.content, { opacity }]}> \n        <View style={styles.header}>\n          <View style={styles.headerTop}>\n            <View style={{ flex: 1 }}>\n              <Text style={styles.title}>Welcome, {displayName}!</Text>\n              <View style={styles.classBadge}>\n                <Text style={styles.classText}>{selectedClass || 'No Class Selected'}</Text>\n              </View>\n            </View>\n            <TouchableOpacity onPress={handleProfilePress} activeOpacity={0.7}>\n              <AvatarDisplay id={selectedAvatar} size={60} />\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        {/* Gamification Section */}\n        <View style={styles.gamificationSection}>\n          <View style={styles.gamificationRow}>\n            <View style={styles.xpBarContainer}>\n              <XPBar currentXP={useXPStore.getState().getXP()} maxXP={useXPStore.getState().getRank().maxXP} level={useXPStore.getState().getRank().level} />\n            </View>\n            <View style={styles.streakContainer}>\n              <StreakBadge streak={streak} showDetails={false} />\n            </View>\n          </View>\n          \n          <View style={styles.progressRow}>\n            <View style={styles.progressCard}>\n              <ProgressRing progress={65} size={80} />\n              <Text style={styles.progressLabel}>Course Progress</Text>\n            </View>\n            <View style={styles.progressCard}>\n              <ProgressRing progress={streak > 0 ? 100 : 0} size={80} />\n              <Text style={styles.progressLabel}>Daily Goal</Text>\n            </View>\n          </View>\n          \n          {/* Trophy Room Link */}\n          <TouchableOpacity\n            style={styles.trophyButton}\n            onPress={() => router.push('/trophy-room')}\n            activeOpacity={0.8}\n          >\n            <View style={styles.trophyIcon}>\n              <Feather name=\"award\" size={20} color=\"#FFFFFF\" />\n            </View>\n            <Text style={styles.trophyButtonText}>View Achievements</Text>\n            <Feather name=\"chevron-right\" size={20} color={colors.primary} />\n          </TouchableOpacity>\n        </View>\n\n        {/* Exam Countdown Widget */}\n        <ExamCountdownWidget limit={3} showTitle={true} />\n\n        {selectedClass ? (\n          <>\n            <Text style={styles.sectionTitle}>Your Subjects</Text>\n            \n            <View style={styles.subjectsGrid}>\n              {subjects.map((subject, index) => (\n                <TouchableOpacity\n                  key={index}\n                  style={[\n                    styles.subjectCard,\n                    subject.includes('Coming Soon') && styles.disabledCard,\n                  ]}\n                  onPress={() => handleSubjectPress(subject)}\n                  activeOpacity={subject.includes('Coming Soon') ? 1 : 0.7}\n                  disabled={subject.includes('Coming Soon')}\n                >\n                  <Text style={styles.subjectEmoji}>{getSubjectEmoji(subject)}</Text>\n                  <Text style={styles.subjectName}>{subject}</Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n\n            {classNum >= 11 && (\n              <View style={styles.placeholderCard}>\n                <Text style={styles.placeholderTitle}>üöß Coming Soon</Text>\n                <Text style={styles.placeholderText}>\n                  {classNum >= 1 && classNum <= 12\n                    ? 'Stream selection and specialized subjects for Classes 11-12 coming in Phase 2B'\n                    : 'Pathways and specialized courses coming in Phase 2B'}\n                </Text>\n              </View>\n            )}\n          </>\n        ) : (\n          <View style={styles.emptyState}>\n            <Text style={styles.emptyEmoji}>üìö</Text>\n            <Text style={styles.emptyTitle}>No Class Selected</Text>\n            <Text style={styles.emptyText}>\n              Please create an account or sign in to select your class\n            </Text>\n            <TouchableOpacity\n              style={styles.actionButton}\n              onPress={() => router.replace('/auth')}\n              activeOpacity={0.8}\n            >\n              <Text style={styles.actionButtonText}>Go to Auth</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {userName && (\n          <TouchableOpacity\n            style={styles.logoutButton}\n            onPress={handleLogout}\n            activeOpacity={0.8}\n          >\n            <Text style={styles.logoutButtonText}>Sign Out</Text>\n          </TouchableOpacity>\n        )}\n      </Animated.View>\n    </ScrollView>\n  );\n}\n\nfunction getSubjectEmoji(subject: string): string {\n  const emojis: Record<string, string> = {\n    English: 'üìñ',\n    Hindi: 'üî§',\n    Maths: 'üî¢',\n    Mathematics: 'üî¢',\n    Science: 'üî¨',\n    'Social Science': 'üåç',\n    EVS: 'üå±',\n    'Competitive Exams': 'üéØ',\n    'Skill Building': 'üõ†Ô∏è',\n  };\n  return emojis[subject] || 'üìö';\n}\n\nconst getStyles = (colors: ThemeColors) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  scrollContent: {\n    flexGrow: 1,\n  },\n  content: {\n    paddingHorizontal: Spacing.xl,\n    paddingTop: Platform.select({ ios: 110, default: 70 }),\n    paddingBottom: Spacing.xxl + 80, // Extra space for tab bar\n  },\n  header: {\n    marginBottom: Spacing.lg,\n  },\n  headerTop: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: Spacing.md,\n  },\n  title: {\n    fontSize: FontSizes.xxxl,\n    fontWeight: FontWeights.bold,\n    color: colors.text,\n    flex: 1,\n  },\n  classBadge: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: Spacing.lg,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.xl,\n    alignSelf: 'flex-start',\n  },\n  classText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.white,\n  },\n  gamificationSection: {\n    marginBottom: Spacing.xl,\n  },\n  gamificationRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: Spacing.lg,\n  },\n  xpBarContainer: {\n    flex: 1,\n    marginRight: Spacing.md,\n  },\n  streakContainer: {\n    width: 80,\n  },\n  progressRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: Spacing.xl,\n  },\n  progressCard: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.md,\n    alignItems: 'center',\n    width: '45%',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  progressLabel: {\n    marginTop: Spacing.sm,\n    fontSize: 12,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  trophyButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.md,\n    borderWidth: 1,\n    borderColor: colors.primary,\n  },\n  trophyIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: Spacing.md,\n  },\n  trophyButtonText: {\n    flex: 1,\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.text,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.semibold,\n    color: colors.text,\n    marginBottom: Spacing.lg,\n  },\n  subjectsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginHorizontal: -Spacing.sm,\n    marginBottom: Spacing.xl,\n  },\n  subjectCard: {\n    backgroundColor: colors.primary,\n    flexBasis: Platform.select({\n      web: '31%',\n      default: '46%',\n    }),\n    margin: Spacing.sm,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.lg,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 120,\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  disabledCard: {\n    backgroundColor: colors.lightGray,\n    opacity: 0.7,\n  },\n  subjectEmoji: {\n    fontSize: FontSizes.xxxl,\n    marginBottom: Spacing.sm,\n  },\n  subjectName: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.white,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n  placeholderCard: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.xl,\n    marginBottom: Spacing.lg,\n    borderLeftWidth: 4,\n    borderLeftColor: colors.primary,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  placeholderTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.semibold,\n    color: colors.text,\n    marginBottom: Spacing.sm,\n  },\n  placeholderText: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    lineHeight: 22,\n  },\n  emptyState: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: Spacing.xxl,\n  },\n  emptyEmoji: {\n    fontSize: 64,\n    marginBottom: Spacing.lg,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.semibold,\n    color: colors.text,\n    marginBottom: Spacing.sm,\n    textAlign: 'center',\n  },\n  emptyText: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: Spacing.xl,\n    maxWidth: 300,\n  },\n  actionButton: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: Spacing.xl,\n    paddingVertical: Spacing.md,\n    borderRadius: BorderRadius.lg,\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  actionButtonText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.white,\n  },\n  logoutButton: {\n    backgroundColor: colors.lightGray,\n    paddingVertical: Spacing.md,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: Spacing.xl,\n  },\n  logoutButtonText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/lesson.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BreadcrumbNav' is defined but never used.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ActivityIndicator,\n  Platform,\n  TouchableOpacity,\n} from 'react-native';\nimport { useLocalSearchParams } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport LessonView from '@/components/LessonView';\nimport { getChapterLessons } from '@/constants/curriculum';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { useSmartyContext } from '@/context/ChatContext';\nimport { BreadcrumbNav } from '@/components/BreadcrumbNav';\nimport QuizModal from '@/components/QuizModal';\nimport ErrorBoundary from '@/components/ErrorBoundary';\nimport { Feather } from '@expo/vector-icons';\nimport { useXPStore } from '@/store/xpStore';\nimport { useAchievementStore } from '@/store/achievementStore';\nimport { coinRewardService } from '@/services/CoinRewardService';\nimport { streakService } from '@/services/streakService';\n\ninterface LessonContent {\n  title: string;\n  icon: string;\n  bulletPoints: string[];\n  paragraphs: string[];\n}\n\nexport default function Lesson() {\n  const { colors } = useTheme();\n  const { chapter, subject, class: className, lesson } = useLocalSearchParams<{\n    chapter: string;\n    subject: string;\n    class: string;\n    lesson?: string;\n  }>();\n  const { setCurrentContext } = useSmartyContext();\n  const { addXP, incrementLessonsRead } = useXPStore();\n  const { checkAndUnlock } = useAchievementStore();\n\n  const [lessons, setLessons] = useState<LessonContent[]>([]);\n  const [currentLessonIndex, setCurrentLessonIndex] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [quizModalVisible, setQuizModalVisible] = useState(false);\n  const [hasAwardedXP, setHasAwardedXP] = useState(false);\n\n  const loadLessons = useCallback(() => {\n    setLoading(true);\n    const allLessons = getChapterLessons(className, subject, chapter);\n    setLessons(allLessons);\n\n    if (lesson) {\n      const index = allLessons.findIndex((l) => l.title === lesson);\n      setCurrentLessonIndex(index >= 0 ? index : 0);\n    } else {\n      setCurrentLessonIndex(0);\n    }\n    setLoading(false);\n    setHasAwardedXP(false);\n  }, [chapter, className, lesson, subject]);\n\n  useEffect(() => {\n    if (chapter && subject && className) {\n      const timer = setTimeout(() => {\n        loadLessons();\n        setCurrentContext(subject, chapter, lesson);\n      }, 0);\n      return () => clearTimeout(timer);\n    }\n  }, [chapter, subject, className, loadLessons, lesson, setCurrentContext]);\n\n  // Award XP when lesson is displayed\n  useEffect(() => {\n    if (lessons.length > 0 && !hasAwardedXP) {\n      const awardRewards = async () => {\n        // Award 10 XP for reading a lesson\n        await addXP(10);\n        incrementLessonsRead();\n        \n        // Award SmartCoins for lesson completion\n        await coinRewardService.rewardLessonCompletion();\n        \n        // Check and update streak, award streak bonuses\n        const streakResult = await streakService.checkAndUpdateStreak();\n        if (streakResult.streakChanged && coinRewardService.shouldReceiveStreakBonus(streakResult.streak)) {\n          await coinRewardService.rewardStreakMilestone(streakResult.streak);\n        }\n        \n        setHasAwardedXP(true);\n\n        // Check for learning achievements\n        const { totalLessonsRead, getXP } = useXPStore.getState();\n        checkAndUnlock({\n          currentStreak: streakResult.streak,\n          totalQuizzesCompleted: 0,\n          totalLessonsRead,\n          currentXP: getXP(),\n          rank: useXPStore.getState().getRank().name,\n        });\n      };\n      awardRewards();\n    }\n  }, [lessons.length, hasAwardedXP, addXP, incrementLessonsRead, checkAndUnlock]);\n\n  const handleNext = () => {\n    if (currentLessonIndex < lessons.length - 1) {\n      setCurrentLessonIndex(currentLessonIndex + 1);\n      setHasAwardedXP(false); // Reset XP flag for new lesson\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentLessonIndex > 0) {\n      setCurrentLessonIndex(currentLessonIndex - 1);\n      setHasAwardedXP(false); // Reset XP flag for previous lesson\n    }\n  };\n\n  const handleTestYourself = useCallback(() => {\n    setQuizModalVisible(true);\n  }, []);\n\n  const handleCloseQuiz = useCallback(() => {\n    setQuizModalVisible(false);\n  }, []);\n\n  const styles = getStyles(colors);\n\n  if (loading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n        <Text style={styles.loadingText}>Loading lesson...</Text>\n      </View>\n    );\n  }\n\n  if (lessons.length === 0) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.content}>\n          <Text style={styles.title}>{chapter}</Text>\n          <Text style={styles.subtitle}>{subject}</Text>\n          <View style={styles.placeholderContainer}>\n            <Text style={styles.placeholderText}>No lesson content available</Text>\n          </View>\n        </View>\n      </View>\n    );\n  }\n\n  const currentLesson = lessons[currentLessonIndex];\n\n  return (\n    <ErrorBoundary>\n      <View style={styles.container}>\n        <LessonView\n          chapter={chapter}\n          subject={subject}\n          className={className}\n          lessonContent={currentLesson}\n          currentLessonIndex={currentLessonIndex}\n          totalLessons={lessons.length}\n          onNext={handleNext}\n          onPrevious={handlePrevious}\n          showNavigation={lessons.length > 1}\n        />\n        \n        {/* XP Notification Banner */}\n        {hasAwardedXP && (\n          <View style={styles.xpBanner}>\n            <Feather name=\"plus-circle\" size={16} color=\"#FFFFFF\" />\n            <Text style={styles.xpBannerText}>+10 XP earned!</Text>\n          </View>\n        )}\n        \n        {/* Test Yourself Button */}\n        <View style={styles.testButtonContainer}>\n          <TouchableOpacity\n            style={styles.testButton}\n            onPress={handleTestYourself}\n            activeOpacity={0.8}\n          >\n            <View style={styles.testButtonIcon}>\n              <Feather name=\"zap\" size={24} color=\"#FFFFFF\" />\n            </View>\n            <View style={styles.testButtonContent}>\n              <Text style={styles.testButtonTitle}>Test Yourself</Text>\n              <Text style={styles.testButtonSubtitle}>Take a quick quiz on this chapter</Text>\n            </View>\n            <Feather name=\"chevron-right\" size={24} color={colors.primary} />\n          </TouchableOpacity>\n        </View>\n\n        {/* Quiz Modal */}\n        <QuizModal\n          visible={quizModalVisible}\n          onClose={handleCloseQuiz}\n          className={className}\n          subject={subject}\n          chapter={chapter}\n        />\n      </View>\n    </ErrorBoundary>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  loadingContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    marginTop: Spacing.md,\n  },\n  content: {\n    paddingHorizontal: Spacing.xl,\n    paddingTop: Platform.select({ ios: 110, default: 70 }),\n    paddingBottom: Spacing.xxl + 80,\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: FontWeights.bold,\n    color: colors.text,\n    marginBottom: Spacing.sm,\n  },\n  subtitle: {\n    fontSize: 18,\n    color: colors.textSecondary,\n    marginBottom: Spacing.xxl,\n  },\n  placeholderContainer: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: 32,\n    alignItems: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  placeholderText: {\n    fontSize: 16,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  xpBanner: {\n    position: 'absolute',\n    top: Platform.select({ web: 80, default: 100 }),\n    left: '50%',\n    transform: [{ translateX: -75 }],\n    backgroundColor: colors.primary,\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.xl,\n    zIndex: 100,\n    shadowColor: colors.primary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  xpBannerText: {\n    color: '#FFFFFF',\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.semibold,\n    marginLeft: Spacing.xs,\n  },\n  testButtonContainer: {\n    position: 'absolute',\n    bottom: Spacing.xxl,\n    left: Spacing.lg,\n    right: Spacing.lg,\n    zIndex: 10,\n  },\n  testButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.xl,\n    padding: Spacing.md,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    elevation: 6,\n    borderWidth: 2,\n    borderColor: colors.primary,\n  },\n  testButtonIcon: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: Spacing.md,\n  },\n  testButtonContent: {\n    flex: 1,\n  },\n  testButtonTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.semibold,\n    color: colors.text,\n    marginBottom: 2,\n  },\n  testButtonSubtitle: {\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/personalized-plan.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/privacy-policy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/profile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/qa-forum.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/question-detail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/reputation-leaderboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/session-history.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/terms.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/trophy-room.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Achievement' is defined but never used.","line":6,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3481,3484],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3481,3484],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, Platform } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { useAchievementStore, Achievement, AchievementCategory } from '@/store/achievementStore';\nimport AchievementCard from '@/components/AchievementCard';\nimport { Feather } from '@expo/vector-icons';\n\ntype CategoryFilter = 'all' | AchievementCategory;\n\nconst CATEGORIES: { key: CategoryFilter; label: string; icon: string }[] = [\n  { key: 'all', label: 'All', icon: ' trophy' },\n  { key: 'streak', label: 'Streaks', icon: 'zap' },\n  { key: 'quiz', label: 'Quizzes', icon: 'clipboard' },\n  { key: 'learning', label: 'Learning', icon: 'book-open' },\n  { key: 'xp', label: 'XP', icon: 'star' },\n];\n\nexport default function TrophyRoomScreen() {\n  const { colors, isDark } = useTheme();\n  const router = useRouter();\n  const { achievements, getUnlockedCount } = useAchievementStore();\n  const [activeCategory, setActiveCategory] = React.useState<CategoryFilter>('all');\n\n  const filteredAchievements = React.useMemo(() => {\n    if (activeCategory === 'all') {\n      return achievements;\n    }\n    return achievements.filter((a) => a.category === activeCategory);\n  }, [achievements, activeCategory]);\n\n  const unlockedCount = getUnlockedCount();\n  const totalCount = achievements.length;\n  const progressPercent = Math.round((unlockedCount / totalCount) * 100);\n\n  const styles = getStyles(colors, isDark);\n\n  return (\n    <View style={styles.container}>\n      {/* Header */}\n      <View style={styles.header}>\n        <TouchableOpacity\n          style={styles.backButton}\n          onPress={() => router.back()}\n          activeOpacity={0.7}\n        >\n          <Feather name=\"arrow-left\" size={24} color={colors.text} />\n        </TouchableOpacity>\n        <Text style={styles.title}>Trophy Room</Text>\n        <View style={styles.headerRight} />\n      </View>\n\n      {/* Progress Summary */}\n      <View style={styles.progressCard}>\n        <View style={styles.progressHeader}>\n          <View style={styles.trophyIcon}>\n            <Text style={styles.trophyEmoji}>üèÜ</Text>\n          </View>\n          <View style={styles.progressInfo}>\n            <Text style={styles.progressTitle}>Your Collection</Text>\n            <Text style={styles.progressSubtitle}>\n              {unlockedCount} of {totalCount} unlocked\n            </Text>\n          </View>\n        </View>\n\n        <View style={styles.overallProgressBar}>\n          <View style={styles.overallProgressBackground}>\n            <View style={[styles.overallProgressFill, { width: `${progressPercent}%` }]} />\n          </View>\n        </View>\n\n        <Text style={styles.progressPercent}>{progressPercent}% Complete</Text>\n      </View>\n\n      {/* Category Filter Tabs */}\n      <ScrollView\n        horizontal\n        showsHorizontalScrollIndicator={false}\n        contentContainerStyle={styles.categoryTabs}\n      >\n        {CATEGORIES.map((cat) => (\n          <TouchableOpacity\n            key={cat.key}\n            style={[\n              styles.categoryTab,\n              activeCategory === cat.key && styles.categoryTabActive,\n            ]}\n            onPress={() => setActiveCategory(cat.key)}\n            activeOpacity={0.7}\n          >\n            <Feather\n              name={cat.icon.trim() as any}\n              size={16}\n              color={activeCategory === cat.key ? '#FFFFFF' : colors.textSecondary}\n            />\n            <Text\n              style={[\n                styles.categoryTabText,\n                activeCategory === cat.key && styles.categoryTabTextActive,\n              ]}\n            >\n              {cat.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n\n      {/* Achievements Grid */}\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={styles.achievementsGrid}\n        showsVerticalScrollIndicator={false}\n      >\n        {filteredAchievements.map((achievement) => (\n          <View key={achievement.id} style={styles.achievementWrapper}>\n            <AchievementCard\n              achievement={achievement}\n              showUnlockDate={true}\n              animateOnUnlock={false}\n            />\n          </View>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.lg,\n      paddingTop: Platform.select({ web: Spacing.lg, default: Spacing.lg + 20 }),\n      paddingBottom: Spacing.md,\n      backgroundColor: colors.background,\n    },\n    backButton: {\n      padding: Spacing.sm,\n      marginRight: Spacing.sm,\n    },\n    title: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    headerRight: {\n      width: 40,\n    },\n    progressCard: {\n      backgroundColor: colors.cardBackground,\n      marginHorizontal: Spacing.lg,\n      marginBottom: Spacing.lg,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 8,\n      elevation: 3,\n    },\n    progressHeader: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    trophyIcon: {\n      width: 56,\n      height: 56,\n      borderRadius: 28,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    trophyEmoji: {\n      fontSize: 32,\n    },\n    progressInfo: {\n      flex: 1,\n    },\n    progressTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n    },\n    progressSubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginTop: 2,\n    },\n    overallProgressBar: {\n      height: 10,\n      backgroundColor: colors.lightGray,\n      borderRadius: 5,\n      overflow: 'hidden',\n      marginBottom: Spacing.sm,\n    },\n    overallProgressBackground: {\n      flex: 1,\n    },\n    overallProgressFill: {\n      height: '100%',\n      backgroundColor: colors.primary,\n      borderRadius: 5,\n    },\n    progressPercent: {\n      fontSize: FontSizes.sm,\n      color: colors.primary,\n      fontWeight: FontWeights.semibold,\n      textAlign: 'right',\n    },\n    categoryTabs: {\n      paddingHorizontal: Spacing.lg,\n      marginBottom: Spacing.md,\n      gap: Spacing.sm,\n    },\n    categoryTab: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.xl,\n      backgroundColor: colors.cardBackground,\n      marginRight: Spacing.sm,\n      borderWidth: 1,\n      borderColor: colors.lightGray,\n    },\n    categoryTabActive: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primary,\n    },\n    categoryTabText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.medium,\n      color: colors.textSecondary,\n      marginLeft: Spacing.xs,\n    },\n    categoryTabTextActive: {\n      color: '#FFFFFF',\n    },\n    scrollView: {\n      flex: 1,\n    },\n    achievementsGrid: {\n      paddingHorizontal: Spacing.lg,\n      paddingBottom: Spacing.xxl,\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: Spacing.md,\n    },\n    achievementWrapper: {\n      width: Platform.select({\n        web: '47%',\n        default: '100%',\n      }),\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/voice-notes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/app/weak-areas.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HeaderButton' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":10,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport WeakAreasScreen from '@/screens/WeakAreasScreen';\nimport { HeaderButton } from '@/components/HeaderComponent';\nimport { useRouter } from 'expo-router';\nimport { useTheme } from '@/components/ThemeContext';\n\nexport default function WeakAreasPage() {\n  const { colors } = useTheme();\n  const router = useRouter();\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      <WeakAreasScreen />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AchievementCard.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'achievement.unlocked'. Either include it or remove the dependency array.","line":21,"column":87,"nodeType":"ArrayExpression","endLine":21,"endColumn":103,"suggestions":[{"desc":"Update the dependencies array to be: [achievement.unlocked]","fix":{"range":[749,765],"text":"[achievement.unlocked]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'achievement.id'. Either exclude it or remove the dependency array.","line":22,"column":57,"nodeType":"ArrayExpression","endLine":22,"endColumn":73,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[824,840],"text":"[]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo } from 'react';\nimport { View, Text, StyleSheet, Animated, TouchableOpacity } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Achievement } from '@/store/achievementStore';\n\ninterface AchievementCardProps {\n  achievement: Achievement;\n  onPress?: () => void;\n  showUnlockDate?: boolean;\n  animateOnUnlock?: boolean;\n}\n\nexport default function AchievementCard({\n  achievement,\n  onPress,\n  showUnlockDate = true,\n  animateOnUnlock = false,\n}: AchievementCardProps) {\n  const { colors, isDark } = useTheme();\n  const scaleAnim = useMemo(() => new Animated.Value(achievement.unlocked ? 1 : 0.8), [achievement.id]);\n  const glowAnim = useMemo(() => new Animated.Value(0), [achievement.id]);\n\n  useEffect(() => {\n    if (achievement.unlocked && animateOnUnlock) {\n      Animated.parallel([\n        Animated.spring(scaleAnim, {\n          toValue: 1,\n          friction: 6,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n        Animated.timing(glowAnim, {\n          toValue: 1,\n          duration: 1000,\n          useNativeDriver: true,\n        }),\n      ]).start();\n\n      // Pulse glow effect\n      const pulse = Animated.loop(\n        Animated.sequence([\n          Animated.timing(glowAnim, {\n            toValue: 0.5,\n            duration: 1000,\n            useNativeDriver: true,\n          }),\n          Animated.timing(glowAnim, {\n            toValue: 1,\n            duration: 1000,\n            useNativeDriver: true,\n          }),\n        ])\n      );\n      pulse.start();\n\n      return () => pulse.stop();\n    }\n  }, [achievement.unlocked, animateOnUnlock, scaleAnim, glowAnim]);\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const styles = getStyles(colors, isDark, achievement.unlocked);\n\n  return (\n    <TouchableOpacity\n      style={[\n        styles.container,\n        achievement.unlocked && styles.containerUnlocked,\n      ]}\n      onPress={onPress}\n      activeOpacity={0.8}\n      disabled={!achievement.unlocked}\n    >\n      <Animated.View\n        style={[\n          styles.card,\n          {\n            transform: [{ scale: scaleAnim }],\n            opacity: achievement.unlocked ? 1 : 0.5,\n          },\n        ]}\n      >\n        {achievement.unlocked && (\n          <Animated.View\n            style={[\n              styles.glow,\n              {\n                opacity: glowAnim,\n              },\n            ]}\n          />\n        )}\n\n        {!achievement.unlocked && (\n          <View style={styles.lockOverlay}>\n            <Text style={styles.lockIcon}>üîí</Text>\n          </View>\n        )}\n\n        <View\n          style={[\n            styles.iconContainer,\n            achievement.unlocked && {\n              backgroundColor: colors.border,\n            },\n          ]}\n        >\n          <Text style={[styles.icon, !achievement.unlocked && styles.iconLocked]}>\n            {achievement.icon}\n          </Text>\n        </View>\n\n        <View style={styles.content}>\n          <Text style={[styles.name, !achievement.unlocked && styles.textLocked]}>\n            {achievement.name}\n          </Text>\n          <Text style={[styles.description, !achievement.unlocked && styles.textLocked]}>\n            {achievement.description}\n          </Text>\n          \n          {showUnlockDate && achievement.unlocked && achievement.unlockedDate && (\n            <Text style={styles.unlockedDate}>\n              Unlocked {formatDate(achievement.unlockedDate)}\n            </Text>\n          )}\n        </View>\n\n        <View style={styles.categoryBadge}>\n          <Text style={styles.categoryText}>\n            {achievement.category.charAt(0).toUpperCase() + achievement.category.slice(1)}\n          </Text>\n        </View>\n      </Animated.View>\n    </TouchableOpacity>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean, isUnlocked: boolean) =>\n  StyleSheet.create({\n    container: {\n      width: '100%',\n    },\n    containerUnlocked: {\n      shadowColor: colors.primary,\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.2,\n      shadowRadius: 12,\n      elevation: 5,\n    },\n    card: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      position: 'relative',\n      overflow: 'hidden',\n      borderWidth: 1,\n      borderColor: isUnlocked ? colors.primary : colors.lightGray,\n    },\n    glow: {\n      position: 'absolute',\n      top: -50,\n      left: -50,\n      right: -50,\n      bottom: -50,\n      backgroundColor: colors.primary,\n      opacity: 0.1,\n      borderRadius: 100,\n    },\n    lockOverlay: {\n      position: 'absolute',\n      top: Spacing.sm,\n      right: Spacing.sm,\n      zIndex: 10,\n    },\n    lockIcon: {\n      fontSize: 16,\n      opacity: 0.6,\n    },\n    iconContainer: {\n      width: 56,\n      height: 56,\n      borderRadius: 28,\n      backgroundColor: colors.border,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginBottom: Spacing.sm,\n    },\n    icon: {\n      fontSize: 32,\n    },\n    iconLocked: {\n      opacity: 0.4,\n    },\n    content: {\n      flex: 1,\n    },\n    name: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: 4,\n    },\n    description: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      lineHeight: FontSizes.sm * 1.4,\n    },\n    textLocked: {\n      opacity: 0.5,\n    },\n    unlockedDate: {\n      fontSize: FontSizes.xs,\n      color: colors.primary,\n      marginTop: Spacing.xs,\n      fontWeight: FontWeights.medium,\n    },\n    categoryBadge: {\n      position: 'absolute',\n      top: Spacing.sm,\n      left: Spacing.sm,\n      backgroundColor: colors.lightGray,\n      paddingHorizontal: Spacing.sm,\n      paddingVertical: 2,\n      borderRadius: BorderRadius.sm,\n    },\n    categoryText: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      fontWeight: FontWeights.medium,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AchievementNotification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AdContainer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'colors' is defined but never used. Allowed unused args must match /^_/u.","line":99,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":99,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Dimensions,\n  Platform,\n} from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Feather } from '@expo/vector-icons';\nimport { BannerAd, BannerAdSize } from 'react-native-google-mobile-ads';\nimport { AD_UNIT_IDS } from '@/config/adConfig';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\n\ninterface AdContainerProps {\n  dismissible?: boolean;\n  unitId?: string;\n}\n\nexport default function AdContainer({ \n  dismissible = false,\n  unitId = AD_UNIT_IDS.BANNER_LESSON\n}: AdContainerProps) {\n  const { colors } = useTheme();\n  const [isDismissed, setIsDismissed] = useState(false);\n  const [loadError, setLoadError] = useState(false);\n\n  if (isDismissed) return null;\n\n  const styles = getStyles(colors);\n\n  // Fallback for Web or when ad fails to load\n  const renderPlaceholder = (message = 'Advertisement placeholder', subtext = 'Sponsored Space') => (\n    <View style={styles.adBox}>\n      {dismissible && (\n        <TouchableOpacity\n          style={styles.dismissButton}\n          onPress={() => setIsDismissed(true)}\n          activeOpacity={0.7}\n        >\n          <Feather name=\"x\" size={16} color=\"#888888\" />\n        </TouchableOpacity>\n      )}\n      <View style={styles.adContent}>\n        <Feather name=\"tag\" size={24} color=\"#999999\" />\n        <Text style={styles.adText}>{subtext}</Text>\n        <Text style={styles.adSubtext}>{message}</Text>\n      </View>\n    </View>\n  );\n\n  if (Platform.OS === 'web') {\n    return (\n      <View style={styles.container}>\n        {renderPlaceholder('Ads not available on web', 'Web Preview')}\n      </View>\n    );\n  }\n\n  if (loadError) {\n    return (\n      <View style={styles.container}>\n        {renderPlaceholder('Failed to load advertisement', 'Ad Error')}\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.adWrapper}>\n        {dismissible && (\n          <TouchableOpacity\n            style={styles.dismissButton}\n            onPress={() => setIsDismissed(true)}\n            activeOpacity={0.7}\n          >\n            <Feather name=\"x\" size={16} color=\"#888888\" />\n          </TouchableOpacity>\n        )}\n        <BannerAd\n          unitId={unitId}\n          size={BannerAdSize.ANCHORED_ADAPTIVE_BANNER}\n          requestOptions={{\n            requestNonPersonalizedAdsOnly: true,\n          }}\n          onAdFailedToLoad={(error) => {\n            console.warn('AdMob error:', error);\n            setLoadError(true);\n          }}\n        />\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) => StyleSheet.create({\n  container: {\n    marginTop: Spacing.md,\n    marginBottom: Spacing.md,\n    alignItems: 'center',\n    width: '100%',\n  },\n  adWrapper: {\n    width: SCREEN_WIDTH - (Spacing.lg * 2),\n    minHeight: 60,\n    backgroundColor: '#F0F0F0',\n    borderRadius: BorderRadius.sm,\n    overflow: 'hidden',\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'relative',\n  },\n  adBox: {\n    backgroundColor: '#E8E8E8',\n    height: 100,\n    width: SCREEN_WIDTH - (Spacing.lg * 2),\n    borderRadius: BorderRadius.sm,\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'relative',\n    borderWidth: 1,\n    borderColor: '#DDDDDD',\n  },\n  dismissButton: {\n    position: 'absolute',\n    top: Spacing.xs,\n    right: Spacing.xs,\n    padding: Spacing.xs,\n    backgroundColor: 'rgba(245, 245, 245, 0.8)',\n    borderRadius: 12,\n    zIndex: 10,\n  },\n  adContent: {\n    alignItems: 'center',\n  },\n  adText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: '#666666',\n    marginTop: Spacing.sm,\n  },\n  adSubtext: {\n    fontSize: FontSizes.xs,\n    color: '#999999',\n    marginTop: 2,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AnimatedLoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AnswerCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AvatarCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[634,637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[634,637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4343,4346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4343,4346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isUnlocked' is defined but never used. Allowed unused args must match /^_/u.","line":130,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isPurchased' is defined but never used. Allowed unused args must match /^_/u.","line":130,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":86}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Alert, Platform } from 'react-native';\nimport { AvatarData } from '@/data/avatarStore';\nimport { useUserStore } from '@/store/userStore';\nimport { useTheme } from '@/components/ThemeContext';\nimport { FontSizes, FontWeights, Spacing, BorderRadius } from '@/constants/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\ninterface AvatarCardProps {\n  avatar: AvatarData;\n  isUnlocked: boolean;\n  isPurchased: boolean;\n  onPurchase?: (avatar: AvatarData) => void;\n  onSelect?: (avatar: AvatarData) => void;\n  isSelected?: boolean;\n  style?: any;\n}\n\nexport default function AvatarCard({ \n  avatar, \n  isUnlocked, \n  isPurchased, \n  onPurchase, \n  onSelect, \n  isSelected = false,\n  style \n}: AvatarCardProps) {\n  const { colors } = useTheme();\n  const { gamificationData, purchaseAvatar, setSelectedAvatar } = useUserStore();\n\n  const handlePurchase = async () => {\n    if (gamificationData.smartCoins < avatar.cost) {\n      Alert.alert(\n        'Insufficient SmartCoins',\n        `You need ${avatar.cost - gamificationData.smartCoins} more SmartCoins to purchase this avatar.`,\n        [{ text: 'OK' }]\n      );\n      return;\n    }\n\n    const success = await purchaseAvatar(avatar.id, avatar.cost);\n    if (success) {\n      Alert.alert(\n        'Avatar Unlocked! üéâ',\n        `${avatar.name} has been added to your collection!`,\n        [{ text: 'Great!' }]\n      );\n      onPurchase?.(avatar);\n    }\n  };\n\n  const handleSelect = () => {\n    if (isPurchased && onSelect) {\n      setSelectedAvatar(avatar.id);\n      onSelect(avatar);\n    }\n  };\n\n  const styles = getStyles(colors, isSelected, isUnlocked, isPurchased);\n\n  return (\n    <View style={[styles.container, style]}>\n      {/* Avatar Display */}\n      <View style={styles.avatarContainer}>\n        <Text style={styles.avatarEmoji}>{avatar.emoji}</Text>\n        {isSelected && (\n          <View style={styles.selectedBadge}>\n            <MaterialCommunityIcons name=\"check\" size={16} color=\"white\" />\n          </View>\n        )}\n        {isPurchased && (\n          <View style={styles.purchasedBadge}>\n            <MaterialCommunityIcons name=\"check-circle\" size={16} color=\"#4CAF50\" />\n          </View>\n        )}\n      </View>\n\n      {/* Avatar Info */}\n      <View style={styles.infoContainer}>\n        <Text style={[styles.name, { color: colors.text }]}>\n          {avatar.name}\n        </Text>\n        <Text style={[styles.description, { color: colors.textSecondary }]}>\n          {avatar.description}\n        </Text>\n        \n        {/* Cost or Status */}\n        <View style={styles.actionContainer}>\n          {isPurchased ? (\n            <TouchableOpacity \n              style={[styles.selectButton, { backgroundColor: isSelected ? colors.primary : colors.primary + '40' }]}\n              onPress={handleSelect}\n            >\n              <Text style={[styles.selectButtonText, { color: isSelected ? 'white' : colors.text }]}>\n                {isSelected ? 'Selected' : 'Select'}\n              </Text>\n            </TouchableOpacity>\n          ) : isUnlocked ? (\n            <TouchableOpacity \n              style={[styles.purchaseButton, { backgroundColor: gamificationData.smartCoins >= avatar.cost ? '#FFD700' : '#CCCCCC' }]}\n              onPress={handlePurchase}\n              disabled={gamificationData.smartCoins < avatar.cost}\n            >\n              <MaterialCommunityIcons name=\"currency-usd\" size={16} color=\"#FFA500\" />\n              <Text style={[styles.purchaseButtonText, { color: gamificationData.smartCoins >= avatar.cost ? '#333' : '#666' }]}>\n                {avatar.cost}\n              </Text>\n            </TouchableOpacity>\n          ) : (\n            <View style={styles.lockedContainer}>\n              <MaterialCommunityIcons name=\"lock\" size={16} color={colors.textSecondary} />\n              <Text style={[styles.lockedText, { color: colors.textSecondary }]}>\n                Locked\n              </Text>\n            </View>\n          )}\n        </View>\n\n        {/* Unlock Condition */}\n        {avatar.unlockCondition && !isUnlocked && (\n          <Text style={[styles.unlockCondition, { color: colors.textSecondary }]}>\n            {avatar.unlockCondition}\n          </Text>\n        )}\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: any, isSelected: boolean, isUnlocked: boolean, isPurchased: boolean) => StyleSheet.create({\n  container: {\n    backgroundColor: isSelected ? '#B2AC8820' : colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.md,\n    marginBottom: Spacing.md,\n    borderWidth: isSelected ? 2 : 1,\n    borderColor: isSelected ? '#B2AC88' : colors.lightGray,\n    ...Platform.select({\n      ios: { \n        shadowColor: '#000', \n        shadowOffset: { width: 0, height: 2 }, \n        shadowOpacity: 0.1, \n        shadowRadius: 4 \n      },\n      android: { elevation: 2 },\n    }),\n  },\n  avatarContainer: {\n    alignItems: 'center',\n    marginBottom: Spacing.md,\n    position: 'relative',\n  },\n  avatarEmoji: {\n    fontSize: 48,\n  },\n  selectedBadge: {\n    position: 'absolute',\n    top: -8,\n    right: -8,\n    backgroundColor: '#4CAF50',\n    borderRadius: 12,\n    width: 24,\n    height: 24,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  purchasedBadge: {\n    position: 'absolute',\n    top: -8,\n    right: -8,\n    backgroundColor: 'white',\n    borderRadius: 12,\n    width: 24,\n    height: 24,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  infoContainer: {\n    alignItems: 'center',\n  },\n  name: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.bold,\n    marginBottom: 4,\n    textAlign: 'center',\n  },\n  description: {\n    fontSize: FontSizes.sm,\n    textAlign: 'center',\n    marginBottom: Spacing.md,\n  },\n  actionContainer: {\n    alignItems: 'center',\n  },\n  selectButton: {\n    paddingHorizontal: Spacing.lg,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.md,\n    minWidth: 80,\n    alignItems: 'center',\n  },\n  selectButtonText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.bold,\n  },\n  purchaseButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Spacing.lg,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.md,\n    minWidth: 80,\n  },\n  purchaseButtonText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.bold,\n    marginLeft: 4,\n  },\n  lockedContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    backgroundColor: colors.lightGray + '50',\n    borderRadius: BorderRadius.md,\n  },\n  lockedText: {\n    fontSize: FontSizes.sm,\n    marginLeft: 4,\n  },\n  unlockCondition: {\n    fontSize: FontSizes.xs,\n    textAlign: 'center',\n    marginTop: Spacing.sm,\n    fontStyle: 'italic',\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/AvatarSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FontWeights' is defined but never used.","line":6,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[735,738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[735,738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1013,1016],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1013,1016],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, TouchableOpacity, StyleSheet, FlatList, Text } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { useTheme } from './ThemeContext';\nimport { useUserStore } from '@/store/userStore';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\n\nexport const AVATARS = [\n  { id: 'Robot', icon: 'robot', color: '#FF9F6D' },\n  { id: 'Owl', icon: 'owl', color: '#9CAF88' },\n  { id: 'Book', icon: 'book-open-variant', color: '#5D8AA8' },\n  { id: 'Brain', icon: 'brain', color: '#9B7EBD' },\n  { id: 'Star', icon: 'star', color: '#FFD700' },\n];\n\nexport const AvatarDisplay = ({ id, size = 50, style }: { id: string, size?: number, style?: any }) => {\n  const avatar = AVATARS.find(a => a.id === id) || AVATARS[0];\n  return (\n    <View style={[styles.avatarCircle, { width: size, height: size, borderRadius: size / 2, backgroundColor: avatar.color + '20' }, style]}>\n      <MaterialCommunityIcons name={avatar.icon as any} size={size * 0.6} color={avatar.color} />\n    </View>\n  );\n};\n\nexport const AvatarSelector = () => {\n  const { colors } = useTheme();\n  const { selectedAvatar, setSelectedAvatar } = useUserStore();\n\n  const renderItem = ({ item }: { item: typeof AVATARS[0] }) => {\n    const isSelected = selectedAvatar === item.id;\n    return (\n      <TouchableOpacity\n        style={[\n          styles.selectorItem,\n          { borderColor: isSelected ? colors.primary : 'transparent' }\n        ]}\n        onPress={() => setSelectedAvatar(item.id)}\n      >\n        <AvatarDisplay id={item.id} size={60} />\n        <Text style={[styles.avatarName, { color: colors.text, fontWeight: isSelected ? '700' : '400' }]}>{item.id}</Text>\n      </TouchableOpacity>\n    );\n  };\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={AVATARS}\n        renderItem={renderItem}\n        keyExtractor={(item) => item.id}\n        horizontal\n        showsHorizontalScrollIndicator={false}\n        contentContainerStyle={styles.listContent}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: Spacing.md,\n  },\n  listContent: {\n    paddingHorizontal: Spacing.md,\n  },\n  selectorItem: {\n    alignItems: 'center',\n    marginHorizontal: Spacing.sm,\n    padding: Spacing.sm,\n    borderRadius: BorderRadius.lg,\n    borderWidth: 2,\n  },\n  avatarCircle: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: Spacing.xs,\n  },\n  avatarName: {\n    fontSize: FontSizes.xs,\n    marginTop: Spacing.xs,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/BadgeDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Animated' is defined but never used.","line":2,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BorderRadius' is defined but never used.","line":3,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ThemeColors' is defined but never used.","line":4,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, Animated } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Badge } from '@/store/userStore';\n\ninterface BadgeDisplayProps {\n  badge: Badge;\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport default function BadgeDisplay({ badge, size = 'md' }: BadgeDisplayProps) {\n  const { colors } = useTheme();\n\n  const iconSize = size === 'sm' ? 24 : size === 'lg' ? 48 : 32;\n  const containerSize = size === 'sm' ? 40 : size === 'lg' ? 80 : 56;\n  const fontSize = size === 'sm' ? FontSizes.xs : size === 'lg' ? FontSizes.md : FontSizes.sm;\n\n  return (\n    <View style={styles.container}>\n      <View\n        style={[\n          styles.iconContainer,\n          {\n            width: containerSize,\n            height: containerSize,\n            borderRadius: containerSize / 2,\n            backgroundColor: colors.cardBackground,\n            borderColor: colors.primary,\n            borderWidth: 1,\n          },\n        ]}\n      >\n        <Text style={{ fontSize: iconSize }}>{badge.icon}</Text>\n      </View>\n      <Text style={[styles.name, { fontSize, color: colors.text }]}>{badge.name}</Text>\n      {size !== 'sm' && (\n        <Text style={[styles.date, { color: colors.textSecondary }]}>\n          {new Date(badge.unlockedAt).toLocaleDateString()}\n        </Text>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    marginRight: Spacing.md,\n    width: 80,\n  },\n  iconContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: Spacing.xs,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  name: {\n    fontWeight: FontWeights.semibold,\n    textAlign: 'center',\n    marginBottom: 2,\n  },\n  date: {\n    fontSize: 10,\n    textAlign: 'center',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/BadgeProgress.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BorderRadius' is defined but never used.","line":3,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ThemeColors' is defined but never used.","line":4,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { AchievementProgress } from '@/store/userStore';\n\ninterface BadgeProgressProps {\n  progress: AchievementProgress;\n}\n\nexport default function BadgeProgress({ progress }: BadgeProgressProps) {\n  const { colors } = useTheme();\n  const percent = Math.min(100, (progress.currentValue / progress.targetValue) * 100);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <Text style={[styles.name, { color: colors.text }]}>{progress.name}</Text>\n        <Text style={[styles.values, { color: colors.textSecondary }]}>\n          {progress.currentValue} / {progress.targetValue}\n        </Text>\n      </View>\n      <View style={[styles.progressBarBg, { backgroundColor: colors.border }]}>\n        <View\n          style={[\n            styles.progressBarFill,\n            {\n              width: `${percent}%`,\n              backgroundColor: colors.primary,\n            },\n          ]}\n        />\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: Spacing.md,\n    width: '100%',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: Spacing.xs,\n  },\n  name: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n  },\n  values: {\n    fontSize: FontSizes.xs,\n  },\n  progressBarBg: {\n    height: 8,\n    borderRadius: 4,\n    overflow: 'hidden',\n  },\n  progressBarFill: {\n    height: '100%',\n    borderRadius: 4,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/BooksGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/BottomTabNavigator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'interpolate' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDark' is assigned a value but never used.","line":29,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2057,2060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2057,2060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":99,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3539,3542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3539,3542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { View, TouchableOpacity, StyleSheet, Platform, Dimensions, Text } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { useTheme } from './ThemeContext';\nimport { useRouter, usePathname } from 'expo-router';\nimport Animated, { \n  useSharedValue, \n  useAnimatedStyle, \n  withSpring,\n  interpolate\n} from 'react-native-reanimated';\n\nconst { width } = Dimensions.get('window');\nconst TAB_BAR_WIDTH = width - 32;\n\nconst TABS = [\n  { name: 'Home', icon: 'home-variant', path: '/home' },\n  { name: 'Plan', icon: 'book-open-variant', path: '/personalized-plan' },\n  { name: 'Forum', icon: 'forum', path: '/qa-forum' },\n  { name: 'Chat', icon: 'message-bubble', path: '/chat' },\n  { name: 'Community', icon: 'account-group', path: '/community' },\n  { name: 'Notes', icon: 'microphone', path: '/voice-notes' },\n  { name: 'Profile', icon: 'account', path: '/profile' },\n];\n\nconst TAB_WIDTH = TAB_BAR_WIDTH / TABS.length;\n\nexport const BottomTabNavigator = () => {\n  const { colors, isDark } = useTheme();\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const translateX = useSharedValue(0);\n\n  useEffect(() => {\n    const activeIndex = TABS.findIndex((tab) => {\n      const isHome = tab.path === '/home' && (pathname === '/home' || pathname === '/home-12plus');\n      const isCommunity = tab.path === '/community' && (pathname === '/community' || pathname.startsWith('/group/'));\n      const isForum = tab.path === '/qa-forum' && (pathname === '/qa-forum' || pathname.startsWith('/question-detail'));\n      return pathname === tab.path || isHome || isCommunity || isForum;\n    });\n    if (activeIndex !== -1) {\n      translateX.value = withSpring(activeIndex * TAB_WIDTH, {\n        damping: 15,\n        stiffness: 100\n      });\n    }\n  }, [pathname, translateX]);\n\n  const indicatorStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{ translateX: translateX.value }],\n    };\n  });\n\n  const handlePress = (path: string) => {\n    router.push(path as any);\n  };\n\n  const hideOnScreens = ['/', '/auth', '/lesson', '/chapters', '/welcome', '/login', '/signup'];\n  if (hideOnScreens.some(screen => pathname === screen || pathname.startsWith('/lesson/') || pathname.startsWith('/auth/'))) {\n    return null;\n  }\n\n  return (\n    <View style={styles.container}>\n      <View\n        style={[\n          styles.tabBar,\n          {\n            backgroundColor: colors.glass,\n            borderColor: colors.border,\n          }\n        ]}\n      >\n        <Animated.View style={[\n          styles.activeIndicator, \n          { \n            backgroundColor: colors.primary,\n            width: TAB_WIDTH - 20,\n            left: 10,\n          }, \n          indicatorStyle\n        ]} />\n        \n        {TABS.map((tab) => {\n          const isHome = tab.path === '/home' && (pathname === '/home' || pathname === '/home-12plus');\n          const isCommunity = tab.path === '/community' && (pathname === '/community' || pathname.startsWith('/group/'));\n          const isForum = tab.path === '/qa-forum' && (pathname === '/qa-forum' || pathname.startsWith('/question-detail'));\n          const isActive = pathname === tab.path || isHome || isCommunity || isForum;\n          return (\n            <TouchableOpacity\n              key={tab.name}\n              style={styles.tabItem}\n              onPress={() => handlePress(tab.path)}\n              activeOpacity={0.7}\n            >\n              <MaterialCommunityIcons\n                name={tab.icon as any}\n                size={24}\n                color={isActive ? colors.white : colors.textSecondary}\n              />\n              <Text style={[\n                styles.tabLabel,\n                { color: isActive ? colors.white : colors.textSecondary }\n              ]}>\n                {tab.name}\n              </Text>\n            </TouchableOpacity>\n          );\n        })}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    bottom: Platform.OS === 'ios' ? 30 : 20,\n    left: 16,\n    right: 16,\n    alignItems: 'center',\n    zIndex: 1000,\n  },\n  tabBar: {\n    flexDirection: 'row',\n    width: '100%',\n    height: 70,\n    borderRadius: 35,\n    overflow: 'hidden',\n    paddingHorizontal: 0,\n    borderWidth: 1,\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 10 },\n        shadowOpacity: 0.1,\n        shadowRadius: 20,\n      },\n      android: {\n        elevation: 10,\n      },\n      web: {\n        boxShadow: '0 10px 20px rgba(0,0,0,0.1)',\n        backdropFilter: 'blur(10px)',\n      }\n    }),\n  },\n  tabItem: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1,\n  },\n  tabLabel: {\n    fontSize: 10,\n    fontWeight: '700',\n    marginTop: 4,\n  },\n  activeIndicator: {\n    position: 'absolute',\n    height: 50,\n    top: 10,\n    borderRadius: 25,\n    zIndex: 0,\n  }\n});\n\nexport default BottomTabNavigator;\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/BreadcrumbNav.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[959,962],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[959,962],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView } from 'react-native';\nimport { useTheme } from './ThemeContext';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { useRouter } from 'expo-router';\n\ninterface Breadcrumb {\n  label: string;\n  path: string;\n}\n\ninterface BreadcrumbNavProps {\n  paths: Breadcrumb[];\n}\n\nexport const BreadcrumbNav: React.FC<BreadcrumbNavProps> = ({ paths }) => {\n  const { colors } = useTheme();\n  const router = useRouter();\n\n  return (\n    <View style={styles.container}>\n      <ScrollView \n        horizontal \n        showsHorizontalScrollIndicator={false}\n        contentContainerStyle={styles.scrollContent}\n      >\n        {paths.map((item, index) => {\n          const isLast = index === paths.length - 1;\n          return (\n            <React.Fragment key={index}>\n              <TouchableOpacity \n                onPress={() => !isLast && router.push(item.path as any)}\n                disabled={isLast}\n              >\n                <Text style={[\n                  styles.label, \n                  { color: isLast ? colors.primary : colors.textSecondary },\n                  isLast && styles.activeLabel\n                ]}>\n                  {item.label}\n                </Text>\n              </TouchableOpacity>\n              {!isLast && (\n                <MaterialCommunityIcons \n                  name=\"chevron-right\" \n                  size={16} \n                  color={colors.textSecondary} \n                  style={styles.separator}\n                />\n              )}\n            </React.Fragment>\n          );\n        })}\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n  },\n  scrollContent: {\n    alignItems: 'center',\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '400',\n  },\n  activeLabel: {\n    fontWeight: '600',\n  },\n  separator: {\n    marginHorizontal: 4,\n  },\n});\n\nexport default BreadcrumbNav;\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/BreakActivitySuggestion.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/engine/project/components/BreakActivitySuggestion.tsx:32:7\n  30 |     if (!showAll) {\n  31 |       const randomActivity = getRandomBreakActivity();\n> 32 |       setCurrentActivity(randomActivity);\n     |       ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  33 |     }\n  34 |   }, [showAll]);\n  35 |","line":32,"column":7,"nodeType":null,"endLine":32,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n} from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { getRandomBreakActivity, breakActivities } from '@/data/breakActivities';\nimport { BreakActivity } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\n\ninterface BreakActivitySuggestionProps {\n  breakDuration?: number; // in minutes\n  onActivitySelect?: (activity: BreakActivity) => void;\n}\n\nexport default function BreakActivitySuggestion({\n  breakDuration = 5,\n  onActivitySelect,\n}: BreakActivitySuggestionProps) {\n  const { colors } = useTheme();\n  const [currentActivity, setCurrentActivity] = useState<BreakActivity | null>(null);\n  const [showAll, setShowAll] = useState(false);\n  const [filteredActivities, setFilteredActivities] = useState<BreakActivity[]>([]);\n\n  useEffect(() => {\n    if (!showAll) {\n      const randomActivity = getRandomBreakActivity();\n      setCurrentActivity(randomActivity);\n    }\n  }, [showAll]);\n\n  const handleRefresh = () => {\n    const randomActivity = getRandomBreakActivity();\n    setCurrentActivity(randomActivity);\n  };\n\n  const handleViewAll = () => {\n    // Filter activities by duration\n    const filtered = breakActivities.filter(\n      (activity) => activity.duration <= breakDuration\n    );\n    setFilteredActivities(filtered);\n    setShowAll(true);\n  };\n\n  const handleActivityPress = (activity: BreakActivity) => {\n    if (onActivitySelect) {\n      onActivitySelect(activity);\n    }\n  };\n\n  const getCategoryIcon = (category: BreakActivity['category']): string => {\n    const icons: Record<BreakActivity['category'], string> = {\n      physical: 'üèÉ',\n      mental: 'üßò',\n      creative: 'üé®',\n      social: 'üë•',\n    };\n    return icons[category] || 'üí°';\n  };\n\n  const getCategoryColor = (category: BreakActivity['category']): string => {\n    const categoryColors: Record<BreakActivity['category'], string> = {\n      physical: '#FF6B6B',\n      mental: '#4ECDC4',\n      creative: '#95E1D3',\n      social: '#F38181',\n    };\n    return categoryColors[category] || colors.primary;\n  };\n\n  const styles = getStyles(colors);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <View style={styles.titleSection}>\n          <Text style={styles.title}>Break Time!</Text>\n          <Text style={styles.subtitle}>\n            {showAll ? 'Choose an activity' : 'Here\\'s a suggestion'}\n          </Text>\n        </View>\n        {!showAll && (\n          <TouchableOpacity\n            style={styles.refreshButton}\n            onPress={handleRefresh}\n            activeOpacity={0.7}\n          >\n            <Feather name=\"refresh-cw\" size={18} color={colors.primary} />\n          </TouchableOpacity>\n        )}\n      </View>\n\n      {!showAll && currentActivity ? (\n        <View style={styles.activityCard}>\n          <View style={styles.activityHeader}>\n            <View\n              style={[\n                styles.categoryBadge,\n                { backgroundColor: getCategoryColor(currentActivity.category) },\n              ]}\n            >\n              <Text style={styles.categoryIcon}>{getCategoryIcon(currentActivity.category)}</Text>\n            </View>\n            <View style={styles.activityMeta}>\n              <View style={styles.durationBadge}>\n                <Feather name=\"clock\" size={12} color={colors.textSecondary} />\n                <Text style={styles.durationText}>{currentActivity.duration} min</Text>\n              </View>\n            </View>\n          </View>\n\n          <Text style={styles.activityTitle}>{currentActivity.title}</Text>\n          <Text style={styles.activityDescription}>\n            {currentActivity.description}\n          </Text>\n\n          <TouchableOpacity\n            style={styles.doneButton}\n            onPress={() => handleActivityPress(currentActivity)}\n            activeOpacity={0.8}\n          >\n            <Feather name=\"check\" size={18} color=\"#FFFFFF\" />\n            <Text style={styles.doneButtonText}>Done!</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.viewAllButton}\n            onPress={handleViewAll}\n            activeOpacity={0.7}\n          >\n            <Text style={styles.viewAllButtonText}>View all activities</Text>\n            <Feather name=\"chevron-right\" size={16} color={colors.primary} />\n          </TouchableOpacity>\n        </View>\n      ) : (\n        <ScrollView\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          contentContainerStyle={styles.activitiesList}\n        >\n          {filteredActivities.map((activity) => (\n            <TouchableOpacity\n              key={activity.id}\n              style={[styles.activityItem, { borderColor: getCategoryColor(activity.category) }]}\n              onPress={() => handleActivityPress(activity)}\n              activeOpacity={0.8}\n            >\n              <View\n                style={[\n                  styles.activityItemIcon,\n                  { backgroundColor: getCategoryColor(activity.category) },\n                ]}\n              >\n                <Text style={styles.activityItemEmoji}>{activity.icon}</Text>\n              </View>\n              <Text style={styles.activityItemTitle} numberOfLines={1}>\n                {activity.title}\n              </Text>\n              <View style={styles.activityItemMeta}>\n                <Feather name=\"clock\" size={10} color={colors.textSecondary} />\n                <Text style={styles.activityItemDuration}>{activity.duration}m</Text>\n              </View>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      )}\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'flex-start',\n      marginBottom: Spacing.md,\n    },\n    titleSection: {\n      flex: 1,\n    },\n    title: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.xs,\n    },\n    subtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n    },\n    refreshButton: {\n      padding: Spacing.sm,\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.md,\n    },\n    activityCard: {\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      borderWidth: 2,\n      borderColor: colors.primary,\n    },\n    activityHeader: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    categoryBadge: {\n      width: 40,\n      height: 40,\n      borderRadius: 20,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    categoryIcon: {\n      fontSize: 20,\n    },\n    activityMeta: {\n      flexDirection: 'row',\n      gap: Spacing.sm,\n    },\n    durationBadge: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.xs,\n      backgroundColor: colors.cardBackground,\n      paddingHorizontal: Spacing.sm,\n      paddingVertical: Spacing.xs,\n      borderRadius: BorderRadius.sm,\n    },\n    durationText: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n    },\n    activityTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    activityDescription: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      lineHeight: 20,\n      marginBottom: Spacing.lg,\n    },\n    doneButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.primary,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.md,\n      gap: Spacing.sm,\n      marginBottom: Spacing.sm,\n    },\n    doneButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n    viewAllButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      paddingVertical: Spacing.sm,\n      gap: Spacing.xs,\n    },\n    viewAllButtonText: {\n      fontSize: FontSizes.sm,\n      color: colors.primary,\n    },\n    activitiesList: {\n      gap: Spacing.md,\n    },\n    activityItem: {\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      minWidth: 140,\n      maxWidth: 160,\n      borderWidth: 2,\n      alignItems: 'center',\n    },\n    activityItemIcon: {\n      width: 50,\n      height: 50,\n      borderRadius: 25,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginBottom: Spacing.sm,\n    },\n    activityItemEmoji: {\n      fontSize: 24,\n    },\n    activityItemTitle: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      textAlign: 'center',\n      marginBottom: Spacing.xs,\n    },\n    activityItemMeta: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.xs,\n    },\n    activityItemDuration: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/CartoonCharacter.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'startBounce' and 'startWiggle'. Either include them or remove the dependency array.","line":82,"column":6,"nodeType":"ArrayExpression","endLine":82,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [startBounce, startWiggle, state]","fix":{"range":[2129,2136],"text":"[startBounce, startWiggle, state]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useMemo } from 'react';\nimport { View, StyleSheet, Animated, Easing, Platform } from 'react-native';\nimport LottieView from 'lottie-react-native';\n\nexport type AnimationState = 'idle' | 'curious' | 'surprised' | 'happy' | 'relaxed';\n\ninterface CartoonCharacterProps {\n  state: AnimationState;\n  size?: number;\n}\n\nexport default function CartoonCharacter({ state, size = 180 }: CartoonCharacterProps) {\n  const animationRef = useRef<LottieView>(null);\n  const bounceAnim = useMemo(() => new Animated.Value(0), []);\n  const wiggleAnim = useMemo(() => new Animated.Value(0), []);\n\n  const startBounce = () => {\n    Animated.sequence([\n      Animated.timing(bounceAnim, {\n        toValue: 1,\n        duration: 150,\n        useNativeDriver: true,\n        easing: Easing.out(Easing.back(2)),\n      }),\n      Animated.timing(bounceAnim, {\n        toValue: 0,\n        duration: 150,\n        useNativeDriver: true,\n        easing: Easing.in(Easing.back(2)),\n      }),\n    ]).start();\n  };\n\n  const startWiggle = () => {\n    Animated.sequence([\n      Animated.timing(wiggleAnim, {\n        toValue: 1,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.timing(wiggleAnim, {\n        toValue: -1,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.timing(wiggleAnim, {\n        toValue: 1,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n      Animated.timing(wiggleAnim, {\n        toValue: 0,\n        duration: 100,\n        useNativeDriver: true,\n      }),\n    ]).start();\n  };\n\n  useEffect(() => {\n    if (!animationRef.current) return;\n\n    switch (state) {\n      case 'idle':\n        animationRef.current.play(0, 30);\n        break;\n      case 'curious':\n        animationRef.current.play(15, 30);\n        startBounce();\n        break;\n      case 'surprised':\n        animationRef.current.play(30, 45);\n        startWiggle();\n        break;\n      case 'happy':\n        animationRef.current.play(45, 60);\n        startBounce();\n        break;\n      case 'relaxed':\n        animationRef.current.play(0, 30);\n        break;\n    }\n  }, [state]);\n\n  const scale = bounceAnim.interpolate({\n    inputRange: [0, 1],\n    outputRange: [1, 1.05],\n  });\n\n  const rotation = wiggleAnim.interpolate({\n    inputRange: [-1, 0, 1],\n    outputRange: ['-5deg', '0deg', '5deg'],\n  });\n\n  return (\n    <View style={styles.container}>\n      <Animated.View\n        style={[\n          styles.animatedContainer,\n          {\n            transform: [{ scale }, { rotate: rotation }],\n          },\n        ]}\n      >\n        <LottieView\n          ref={animationRef}\n          source={require('@/assets/animations/cartoon-owl.json')}\n          autoPlay={false}\n          loop={state === 'idle'}\n          style={[styles.lottie, { width: size, height: size }]}\n        />\n      </Animated.View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  animatedContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  lottie: {\n    maxWidth: Platform.select({ web: '100%' }),\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/CoinDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Spacing' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[396,399],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[396,399],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'animated' and 'triggerAnimation'. Either include them or remove the dependency array.","line":60,"column":6,"nodeType":"ArrayExpression","endLine":60,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [animated, gamificationData.smartCoins, triggerAnimation]","fix":{"range":[1441,1470],"text":"[animated, gamificationData.smartCoins, triggerAnimation]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'iconSize' is defined but never used. Allowed unused args must match /^_/u.","line":86,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'textSize' is defined but never used. Allowed unused args must match /^_/u.","line":86,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, Animated } from 'react-native';\nimport { useUserStore } from '@/store/userStore';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { Spacing, FontSizes, FontWeights } from '@/constants/theme';\n\ninterface CoinDisplayProps {\n  size?: 'small' | 'medium' | 'large';\n  showLabel?: boolean;\n  animated?: boolean;\n  style?: any;\n}\n\nexport default function CoinDisplay({ \n  size = 'medium', \n  showLabel = true, \n  animated = false,\n  style \n}: CoinDisplayProps) {\n  const { gamificationData } = useUserStore();\n  const [animatedValue] = React.useState(new Animated.Value(1));\n\n  const getIconSize = () => {\n    switch (size) {\n      case 'small': return 16;\n      case 'large': return 32;\n      default: return 24;\n    }\n  };\n\n  const getTextSize = () => {\n    switch (size) {\n      case 'small': return FontSizes.sm;\n      case 'large': return FontSizes.lg;\n      default: return FontSizes.md;\n    }\n  };\n\n  const triggerAnimation = () => {\n    if (animated) {\n      Animated.sequence([\n        Animated.timing(animatedValue, {\n          toValue: 1.3,\n          duration: 200,\n          useNativeDriver: true,\n        }),\n        Animated.timing(animatedValue, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    }\n  };\n\n  React.useEffect(() => {\n    if (animated) {\n      triggerAnimation();\n    }\n  }, [gamificationData.smartCoins]);\n\n  const styles = getStyles(getIconSize(), getTextSize());\n\n  return (\n    <View style={[styles.container, style]}>\n      <Animated.View style={[styles.coinContainer, { transform: [{ scale: animatedValue }] }]}>\n        <MaterialCommunityIcons \n          name=\"currency-usd\" \n          size={getIconSize()} \n          color=\"#FFD700\" \n          style={styles.coinIcon}\n        />\n      </Animated.View>\n      <Text style={[styles.amount, { fontSize: getTextSize() }]}>\n        {gamificationData.smartCoins.toLocaleString()}\n      </Text>\n      {showLabel && (\n        <Text style={[styles.label, { fontSize: getTextSize() - 2 }]}>\n          SmartCoins\n        </Text>\n      )}\n    </View>\n  );\n}\n\nconst getStyles = (iconSize: number, textSize: number) => StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  coinContainer: {\n    marginRight: 8,\n  },\n  coinIcon: {\n    textShadowColor: '#FFA500',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 2,\n  },\n  amount: {\n    fontWeight: FontWeights.bold,\n    color: '#FFD700',\n    marginRight: 4,\n  },\n  label: {\n    color: '#999999',\n    fontWeight: FontWeights.medium,\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/DarkModeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/Dropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useContext' is defined but never used.","line":1,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userName' is assigned a value but never used.","line":31,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Component, ErrorInfo, ReactNode, useContext } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme } from './ThemeContext';\nimport type { ThemeColors } from './ThemeContext';\nimport { Feather } from '@expo/vector-icons';\nimport { logBoundaryError, getUserFriendlyErrorMessage, isRecoverableError } from '@/utils/errorLogger';\nimport { useUserStore } from '@/store/userStore';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\ninterface ErrorContentProps {\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n  onRetry: () => void;\n}\n\nfunction ErrorContent({ error, errorInfo, onRetry }: ErrorContentProps) {\n  const { colors } = useTheme();\n  const router = useRouter();\n  const userName = useUserStore(state => state.userName);\n  const userId = useUserStore(state => state.userId);\n  const styles = getStyles(colors);\n\n  // Log error for debugging\n  if (error && errorInfo) {\n    logBoundaryError(error, errorInfo, userId);\n  }\n\n  // Get user-friendly error message\n  const friendlyMessage = error ? getUserFriendlyErrorMessage(error) :\n    'We encountered an unexpected error. Do not worry, it is not your fault!';\n\n  const handleGoHome = () => {\n    // Navigate to home screen\n    router.replace('/home');\n  };\n\n  const handleRetry = () => {\n    // Try to recover from error\n    onRetry();\n  };\n\n  const isRecoverable = error ? isRecoverableError(error) : true;\n\n  return (\n    <ScrollView style={styles.container} contentContainerStyle={styles.content}>\n      <View style={styles.iconContainer}>\n        <View style={styles.iconBackground}>\n          <Feather name=\"alert-circle\" size={48} color={colors.primary} />\n        </View>\n      </View>\n\n      <Text style={styles.title}>Oops! Something went wrong</Text>\n\n      <Text style={styles.message}>\n        {friendlyMessage}\n      </Text>\n\n      {error && process.env.NODE_ENV === 'development' && (\n        <View style={styles.errorContainer}>\n          <Text style={styles.errorTitle}>Error Details:</Text>\n          <Text style={styles.errorText}>{error.message}</Text>\n        </View>\n      )}\n\n      <View style={styles.tipsContainer}>\n        <Text style={styles.tipsTitle}>What you can do:</Text>\n        <View style={styles.tipItem}>\n          <Feather name=\"refresh-cw\" size={16} color={colors.primary} />\n          <Text style={styles.tipText}>Tap \"Try Again\" to recover</Text>\n        </View>\n        <View style={styles.tipItem}>\n          <Feather name=\"home\" size={16} color={colors.primary} />\n          <Text style={styles.tipText}>Go to Home screen</Text>\n        </View>\n        <View style={styles.tipItem}>\n          <Feather name=\"smartphone\" size={16} color={colors.primary} />\n          <Text style={styles.tipText}>Restart the app</Text>\n        </View>\n      </View>\n\n      {/* Primary action - Try Again if recoverable */}\n      {isRecoverable && (\n        <TouchableOpacity style={styles.retryButton} onPress={handleRetry} activeOpacity={0.8}>\n          <Feather name=\"refresh-cw\" size={20} color=\"#FFFFFF\" />\n          <Text style={styles.retryButtonText}>Try Again</Text>\n        </TouchableOpacity>\n      )}\n\n      {/* Secondary action - Go to Home */}\n      <TouchableOpacity style={styles.homeButton} onPress={handleGoHome} activeOpacity={0.8}>\n        <Feather name=\"home\" size={20} color={colors.primary} />\n        <Text style={styles.homeButtonText}>Go to Home</Text>\n      </TouchableOpacity>\n\n      <Text style={styles.footerText}>\n        If this problem persists, please contact learnsmartofficial24@gmail.com\n      </Text>\n    </ScrollView>\n  );\n}\n\nclass ErrorBoundaryWrapper extends Component<Props, State> {\n  state: State = {\n    hasError: false,\n    error: null,\n    errorInfo: null,\n  };\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error, errorInfo: null };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error);\n    console.error('Component stack:', errorInfo.componentStack);\n    this.setState({ errorInfo });\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n      return <ErrorContent error={this.state.error} errorInfo={this.state.errorInfo} onRetry={this.handleRetry} />;\n    }\n    return this.props.children;\n  }\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: { flex: 1, backgroundColor: colors.background },\n    content: { flexGrow: 1, justifyContent: 'center', alignItems: 'center', padding: Spacing.xl },\n    iconContainer: { marginBottom: Spacing.xl },\n    iconBackground: {\n      width: 120,\n      height: 120,\n      borderRadius: 60,\n      backgroundColor: colors.cardBackground,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderWidth: 3,\n      borderColor: colors.primary,\n    },\n    title: { fontSize: FontSizes.xxl, fontWeight: FontWeights.bold, color: colors.text, textAlign: 'center', marginBottom: Spacing.md },\n    message: { fontSize: FontSizes.md, color: colors.textSecondary, textAlign: 'center', marginBottom: Spacing.xl, lineHeight: FontSizes.md * 1.5 },\n    errorContainer: {\n      width: '100%',\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      marginBottom: Spacing.lg,\n      borderLeftWidth: 4,\n      borderLeftColor: colors.error,\n    },\n    errorTitle: { fontSize: FontSizes.sm, fontWeight: FontWeights.semibold, color: colors.error, marginBottom: Spacing.xs },\n    errorText: { fontSize: FontSizes.sm, color: colors.textSecondary },\n    tipsContainer: { width: '100%', backgroundColor: colors.cardBackground, borderRadius: BorderRadius.lg, padding: Spacing.lg, marginBottom: Spacing.xl },\n    tipsTitle: { fontSize: FontSizes.sm, fontWeight: FontWeights.semibold, color: colors.text, marginBottom: Spacing.md },\n    tipItem: { flexDirection: 'row', alignItems: 'center', marginBottom: Spacing.sm },\n    tipText: { fontSize: FontSizes.sm, color: colors.textSecondary, marginLeft: Spacing.sm, flex: 1 },\n    retryButton: { flexDirection: 'row', alignItems: 'center', justifyContent: 'center', backgroundColor: colors.primary, paddingVertical: Spacing.md, paddingHorizontal: Spacing.xl, borderRadius: BorderRadius.lg, marginBottom: Spacing.md, minWidth: 160, minHeight: 56 },\n    retryButtonText: { fontSize: FontSizes.md, fontWeight: FontWeights.semibold, color: '#FFFFFF', marginLeft: Spacing.sm },\n    homeButton: { flexDirection: 'row', alignItems: 'center', justifyContent: 'center', backgroundColor: colors.cardBackground, paddingVertical: Spacing.md, paddingHorizontal: Spacing.xl, borderRadius: BorderRadius.lg, marginBottom: Spacing.lg, minWidth: 160, minHeight: 56, borderWidth: 2, borderColor: colors.primary },\n    homeButtonText: { fontSize: FontSizes.md, fontWeight: FontWeights.semibold, color: colors.primary, marginLeft: Spacing.sm },\n    footerText: { fontSize: FontSizes.xs, color: colors.textSecondary, textAlign: 'center', opacity: 0.7 },\n  });\n\nexport default ErrorBoundaryWrapper;\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ExamCountdownWidget.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadExams'. Either include it or remove the dependency array.","line":39,"column":6,"nodeType":"ArrayExpression","endLine":39,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadExams]","fix":{"range":[1045,1047],"text":"[loadExams]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { examService } from '@/services/ExamService';\nimport { Exam } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\n\ninterface ExamCountdownWidgetProps {\n  limit?: number;\n  showTitle?: boolean;\n}\n\nexport default function ExamCountdownWidget({\n  limit = 3,\n  showTitle = true,\n}: ExamCountdownWidgetProps) {\n  const router = useRouter();\n  const { colors } = useTheme();\n  const [exams, setExams] = useState<Exam[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadExams();\n    \n    // Refresh countdown daily\n    const interval = setInterval(() => {\n      loadExams();\n    }, 60000 * 60 * 24); // 24 hours\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const loadExams = async () => {\n    try {\n      await examService.initialize();\n      await examService.refreshExamUrgency();\n      const upcomingExams = await examService.getUpcomingExams(limit);\n      setExams(upcomingExams);\n    } catch (error) {\n      console.error('Failed to load exams:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getDaysRemaining = (examDate: string): number => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const exam = new Date(examDate);\n    exam.setHours(0, 0, 0, 0);\n    const diffTime = exam.getTime() - today.getTime();\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  const getUrgencyColors = (color: 'green' | 'yellow' | 'red'): {\n    bg: string;\n    text: string;\n    border: string;\n  } => {\n    if (color === 'red') {\n      return {\n        bg: '#FFEBEE',\n        text: '#C62828',\n        border: '#EF9A9A',\n      };\n    }\n    if (color === 'yellow') {\n      return {\n        bg: '#FFF8E1',\n        text: '#F57C00',\n        border: '#FFCC80',\n      };\n    }\n    return {\n      bg: '#E8F5E9',\n      text: '#2E7D32',\n      border: '#A5D6A7',\n    };\n  };\n\n  const handleExamPress = (exam: Exam) => {\n    router.push({\n      pathname: '/exam-details',\n      params: { examId: exam.id },\n    });\n  };\n\n  const handleAddExam = () => {\n    router.push('/exam-details');\n  };\n\n  const styles = getStyles(colors);\n\n  if (loading) {\n    return (\n      <View style={[styles.container, { backgroundColor: colors.cardBackground }]}>\n        <Text style={styles.loadingText}>Loading exams...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {showTitle && (\n        <View style={styles.header}>\n          <Text style={styles.title}>Upcoming Exams</Text>\n          <TouchableOpacity\n            style={styles.addButton}\n            onPress={handleAddExam}\n            activeOpacity={0.7}\n          >\n            <Feather name=\"plus\" size={18} color={colors.primary} />\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {exams.length === 0 ? (\n        <View style={styles.emptyState}>\n          <Text style={styles.emptyEmoji}>üìÖ</Text>\n          <Text style={styles.emptyTitle}>No Upcoming Exams</Text>\n          <Text style={styles.emptyText}>\n            Add your exams to track countdown\n          </Text>\n          <TouchableOpacity\n            style={styles.addExamButton}\n            onPress={handleAddExam}\n            activeOpacity={0.8}\n          >\n            <Feather name=\"plus\" size={16} color=\"#FFFFFF\" />\n            <Text style={styles.addExamButtonText}>Add Exam</Text>\n          </TouchableOpacity>\n        </View>\n      ) : (\n        <ScrollView\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          contentContainerStyle={styles.scrollContent}\n        >\n          {exams.map((exam) => {\n            const daysRemaining = getDaysRemaining(exam.date);\n            const urgencyColors = getUrgencyColors(exam.color);\n\n            return (\n              <TouchableOpacity\n                key={exam.id}\n                style={[\n                  styles.examCard,\n                  { borderColor: urgencyColors.border },\n                ]}\n                onPress={() => handleExamPress(exam)}\n                activeOpacity={0.7}\n              >\n                <View\n                  style={[\n                    styles.urgencyBadge,\n                    { backgroundColor: urgencyColors.bg },\n                  ]}\n                >\n                  <Text style={[styles.urgencyText, { color: urgencyColors.text }]}>\n                    {daysRemaining <= 0 ? 'Today' : daysRemaining === 1 ? 'Tomorrow' : `${daysRemaining} days`}\n                  </Text>\n                </View>\n\n                <View style={styles.examContent}>\n                  <Text style={styles.examName} numberOfLines={1}>\n                    {exam.name}\n                  </Text>\n                  <Text style={styles.examSubject}>{exam.subject}</Text>\n                </View>\n\n                <View style={styles.examDate}>\n                  <Feather name=\"calendar\" size={14} color={colors.textSecondary} />\n                  <Text style={styles.examDateText}>{exam.dateDisplay}</Text>\n                </View>\n\n                <View style={styles.progressBar}>\n                  <View\n                    style={[\n                      styles.progressFill,\n                      {\n                        width: `${Math.min(100, Math.max(0, (daysRemaining / 30) * 100))}%`,\n                        backgroundColor: urgencyColors.border,\n                      },\n                    ]}\n                  />\n                </View>\n              </TouchableOpacity>\n            );\n          })}\n        </ScrollView>\n      )}\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    title: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    addButton: {\n      padding: Spacing.sm,\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.md,\n    },\n    loadingText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      paddingVertical: Spacing.md,\n    },\n    scrollContent: {\n      gap: Spacing.md,\n    },\n    examCard: {\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      minWidth: 180,\n      maxWidth: 200,\n      borderWidth: 2,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n      elevation: 2,\n    },\n    urgencyBadge: {\n      alignSelf: 'flex-start',\n      paddingHorizontal: Spacing.sm,\n      paddingVertical: Spacing.xs,\n      borderRadius: BorderRadius.md,\n      marginBottom: Spacing.sm,\n    },\n    urgencyText: {\n      fontSize: FontSizes.xs,\n      fontWeight: FontWeights.bold,\n    },\n    examContent: {\n      marginBottom: Spacing.sm,\n    },\n    examName: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.xs,\n    },\n    examSubject: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n    },\n    examDate: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.xs,\n      marginBottom: Spacing.md,\n    },\n    examDateText: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n    },\n    progressBar: {\n      height: 4,\n      backgroundColor: colors.border,\n      borderRadius: 2,\n      overflow: 'hidden',\n    },\n    progressFill: {\n      height: '100%',\n      borderRadius: 2,\n    },\n    emptyState: {\n      alignItems: 'center',\n      paddingVertical: Spacing.xl,\n    },\n    emptyEmoji: {\n      fontSize: 48,\n      marginBottom: Spacing.md,\n    },\n    emptyTitle: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.xs,\n    },\n    emptyText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginBottom: Spacing.md,\n    },\n    addExamButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.primary,\n      paddingHorizontal: Spacing.lg,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.md,\n      gap: Spacing.xs,\n    },\n    addExamButtonText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/FavoriteQuestions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/FilePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/FileUploadButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'View' is defined but never used.","line":2,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { TouchableOpacity, Text, StyleSheet, View } from 'react-native';\nimport { useTheme } from '@/components/ThemeContext';\nimport { Spacing, BorderRadius } from '@/constants/theme';\n\ninterface FileUploadButtonProps {\n  onPress: () => void;\n  icon: string;\n  label: string;\n}\n\nexport default function FileUploadButton({ onPress, icon, label }: FileUploadButtonProps) {\n  const { colors } = useTheme();\n\n  return (\n    <TouchableOpacity \n      style={[styles.button, { backgroundColor: colors.border }]} \n      onPress={onPress}\n      activeOpacity={0.7}\n    >\n      <Text style={styles.icon}>{icon}</Text>\n      <Text style={[styles.label, { color: colors.text }]}>{label}</Text>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: Spacing.sm,\n    borderRadius: BorderRadius.md,\n    marginRight: Spacing.sm,\n    marginBottom: Spacing.xs,\n  },\n  icon: {\n    fontSize: 18,\n    marginRight: Spacing.xs,\n  },\n  label: {\n    fontSize: 12,\n    fontWeight: '500',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/FloatingActionButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1282,1285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1282,1285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { StyleSheet, TouchableOpacity, View, Text, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { useTheme } from './ThemeContext';\nimport Animated, { \n  useSharedValue, \n  useAnimatedStyle, \n  withRepeat, \n  withSequence, \n  withTiming,\n  Easing\n} from 'react-native-reanimated';\n\ninterface FABProps {\n  onPress: () => void;\n  icon?: string;\n}\n\nexport const FloatingActionButton: React.FC<FABProps> = ({ \n  onPress, \n  icon = 'robot' \n}) => {\n  const { colors } = useTheme();\n  const scale = useSharedValue(1);\n\n  useEffect(() => {\n    scale.value = withRepeat(\n      withSequence(\n        withTiming(1.1, { duration: 1000, easing: Easing.inOut(Easing.ease) }),\n        withTiming(1, { duration: 1000, easing: Easing.inOut(Easing.ease) })\n      ),\n      -1,\n      true\n    );\n  }, [scale]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return (\n    <Animated.View style={[\n      styles.container, \n      animatedStyle\n    ]}>\n      <TouchableOpacity\n        onPress={onPress}\n        style={[styles.button, { backgroundColor: colors.primary }]}\n        activeOpacity={0.8}\n      >\n        <MaterialCommunityIcons name={icon as any} size={28} color={colors.white} />\n        {Platform.OS === 'web' && (\n          <View style={[styles.tooltip, { backgroundColor: colors.text }]}>\n            <Text style={[styles.tooltipText, { color: colors.background }]}>Chat with Smarty</Text>\n          </View>\n        )}\n      </TouchableOpacity>\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    bottom: 100,\n    right: 24,\n    zIndex: 999,\n  },\n  button: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    alignItems: 'center',\n    justifyContent: 'center',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 4.65,\n      },\n      android: {\n        elevation: 8,\n      },\n      web: {\n        boxShadow: '0 4px 8px rgba(0,0,0,0.3)',\n      }\n    }),\n  },\n  tooltip: {\n    position: 'absolute',\n    right: 64,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 4,\n    width: 120,\n    alignItems: 'center',\n    display: 'none', // Shown on hover in CSS if possible, but for RN web we'd need more logic\n  },\n  tooltipText: {\n    fontSize: 12,\n    fontWeight: '600',\n  }\n});\n\nexport default FloatingActionButton;\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/GroupCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1981,1984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1981,1984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\nimport { Image, StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport { useTheme } from '@/components/ThemeContext';\nimport type { StudyGroup } from '@/services/StudyGroupService';\nimport { getAvatarById } from '@/data/avatarStore';\n\ninterface GroupCardProps {\n  group: StudyGroup;\n  onPress: () => void;\n}\n\nexport default function GroupCard({ group, onPress }: GroupCardProps) {\n  const { colors, isDark } = useTheme();\n\n  const memberAvatars = useMemo(() => {\n    return Object.values(group.memberProfiles)\n      .map((p) => p.avatar)\n      .slice(0, 4)\n      .map((avatarId) => getAvatarById(avatarId)?.emoji ?? 'üë§');\n  }, [group.memberProfiles]);\n\n  const styles = getStyles(colors, isDark);\n\n  return (\n    <TouchableOpacity style={styles.container} onPress={onPress} activeOpacity={0.8}>\n      <View style={styles.header}>\n        <View style={styles.iconWrap}>\n          {group.icon?.startsWith('http') ? (\n            <Image source={{ uri: group.icon }} style={styles.iconImage} />\n          ) : (\n            <Text style={styles.iconText}>{group.icon || 'üë•'}</Text>\n          )}\n        </View>\n\n        <View style={styles.meta}>\n          <Text style={styles.name} numberOfLines={1}>\n            {group.name}\n          </Text>\n          <Text style={styles.description} numberOfLines={2}>\n            {group.description}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.footer}>\n        <View style={styles.avatarRow}>\n          {memberAvatars.map((emoji, idx) => (\n            <View key={`${emoji}-${idx}`} style={styles.avatarBubble}>\n              <Text style={styles.avatarEmoji}>{emoji}</Text>\n            </View>\n          ))}\n        </View>\n\n        <Text style={styles.memberCount}>{group.members.length} members</Text>\n      </View>\n    </TouchableOpacity>\n  );\n}\n\nconst getStyles = (colors: any, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    iconWrap: {\n      width: 52,\n      height: 52,\n      borderRadius: 26,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n      overflow: 'hidden',\n    },\n    iconText: {\n      fontSize: 26,\n    },\n    iconImage: {\n      width: '100%',\n      height: '100%',\n    },\n    meta: {\n      flex: 1,\n    },\n    name: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: 2,\n    },\n    description: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      lineHeight: FontSizes.sm * 1.35,\n    },\n    footer: {\n      marginTop: Spacing.md,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n    },\n    avatarRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    avatarBubble: {\n      width: 28,\n      height: 28,\n      borderRadius: 14,\n      backgroundColor: isDark ? '#2A2A2A' : '#FFFFFF',\n      borderWidth: 1,\n      borderColor: colors.border,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: 6,\n    },\n    avatarEmoji: {\n      fontSize: 14,\n    },\n    memberCount: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      fontWeight: FontWeights.medium,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/GroupChatMessage.tsx","messages":[{"ruleId":"no-redeclare","severity":2,"message":"'GroupChatMessage' is already defined.","line":14,"column":25,"nodeType":"Identifier","messageId":"redeclared","endLine":14,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1737,1740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1737,1740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport { useTheme } from '@/components/ThemeContext';\nimport type { GroupChatMessage, StudyGroup } from '@/services/StudyGroupService';\nimport { useUserStore } from '@/store/userStore';\nimport { getAvatarById } from '@/data/avatarStore';\n\ninterface GroupChatMessageProps {\n  message: GroupChatMessage;\n  group: StudyGroup;\n}\n\nexport default function GroupChatMessage({ message, group }: GroupChatMessageProps) {\n  const { colors, isDark } = useTheme();\n  const { userId } = useUserStore();\n\n  const isOwn = message.userId === userId;\n\n  const profile = group.memberProfiles[message.userId];\n\n  const avatarEmoji = useMemo(() => {\n    const id = profile?.avatar ?? 'Robot';\n    return getAvatarById(id)?.emoji ?? 'üë§';\n  }, [profile?.avatar]);\n\n  const displayName = profile?.userName ?? 'Member';\n\n  const styles = getStyles(colors, isDark, isOwn);\n\n  return (\n    <View style={styles.row}>\n      {!isOwn ? (\n        <View style={styles.avatar}>\n          <Text style={styles.avatarEmoji}>{avatarEmoji}</Text>\n        </View>\n      ) : null}\n\n      <View style={styles.bubble}>\n        {!isOwn ? <Text style={styles.name}>{displayName}</Text> : null}\n        <Text style={styles.message}>{message.message}</Text>\n        <Text style={styles.time}>{new Date(message.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</Text>\n      </View>\n\n      {isOwn ? (\n        <View style={styles.avatar}>\n          <Text style={styles.avatarEmoji}>{avatarEmoji}</Text>\n        </View>\n      ) : null}\n    </View>\n  );\n}\n\nconst getStyles = (colors: any, isDark: boolean, isOwn: boolean) =>\n  StyleSheet.create({\n    row: {\n      flexDirection: 'row',\n      justifyContent: isOwn ? 'flex-end' : 'flex-start',\n      alignItems: 'flex-end',\n      marginBottom: Spacing.sm,\n    },\n    avatar: {\n      width: 28,\n      height: 28,\n      borderRadius: 14,\n      backgroundColor: isDark ? '#2A2A2A' : '#FFFFFF',\n      borderWidth: 1,\n      borderColor: colors.border,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginHorizontal: 6,\n    },\n    avatarEmoji: {\n      fontSize: 14,\n    },\n    bubble: {\n      maxWidth: '78%',\n      backgroundColor: isOwn ? colors.primary : colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      paddingVertical: Spacing.sm,\n      paddingHorizontal: Spacing.md,\n      borderWidth: isOwn ? 0 : 1,\n      borderColor: colors.border,\n    },\n    name: {\n      fontSize: FontSizes.xs,\n      fontWeight: FontWeights.bold,\n      color: isOwn ? '#FFFFFF' : colors.text,\n      marginBottom: 2,\n    },\n    message: {\n      fontSize: FontSizes.sm,\n      color: isOwn ? '#FFFFFF' : colors.text,\n      lineHeight: FontSizes.sm * 1.35,\n    },\n    time: {\n      marginTop: 4,\n      fontSize: 10,\n      color: isOwn ? 'rgba(255,255,255,0.75)' : colors.textSecondary,\n      alignSelf: 'flex-end',\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/GroupLeaderboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2437,2440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2437,2440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport { useTheme } from '@/components/ThemeContext';\nimport type { StudyGroup } from '@/services/StudyGroupService';\nimport type { GroupQuiz } from '@/services/GroupQuizService';\nimport { getAvatarById } from '@/data/avatarStore';\n\ninterface GroupLeaderboardProps {\n  group: StudyGroup;\n  quiz: GroupQuiz;\n}\n\nexport default function GroupLeaderboard({ group, quiz }: GroupLeaderboardProps) {\n  const { colors, isDark } = useTheme();\n\n  const entries = useMemo(() => {\n    return Object.entries(quiz.results)\n      .map(([userId, result]) => {\n        const profile = group.memberProfiles[userId];\n        const avatarEmoji = getAvatarById(profile?.avatar ?? 'Robot')?.emoji ?? 'üë§';\n        return {\n          userId,\n          userName: profile?.userName ?? 'Member',\n          avatarEmoji,\n          score: result.score,\n        };\n      })\n      .sort((a, b) => b.score - a.score);\n  }, [group.memberProfiles, quiz.results]);\n\n  const styles = getStyles(colors, isDark);\n\n  if (entries.length === 0) {\n    return (\n      <View style={styles.empty}>\n        <Text style={styles.emptyTitle}>No results yet</Text>\n        <Text style={styles.emptySubtitle}>Be the first to take this quiz.</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View>\n      {entries.map((entry, index) => {\n        const rank = index + 1;\n        const isTop3 = rank <= 3;\n        return (\n          <View\n            key={entry.userId}\n            style={[\n              styles.row,\n              isTop3 ? styles.topRow : null,\n              rank === 1 ? styles.first : null,\n              rank === 2 ? styles.second : null,\n              rank === 3 ? styles.third : null,\n            ]}\n          >\n            <View style={styles.rankBubble}>\n              <Text style={styles.rankText}>{rank}</Text>\n            </View>\n\n            <View style={styles.avatar}>\n              <Text style={styles.avatarEmoji}>{entry.avatarEmoji}</Text>\n            </View>\n\n            <View style={styles.meta}>\n              <Text style={styles.name} numberOfLines={1}>\n                {entry.userName}\n              </Text>\n            </View>\n\n            <Text style={styles.score}>{entry.score}%</Text>\n          </View>\n        );\n      })}\n    </View>\n  );\n}\n\nconst getStyles = (colors: any, isDark: boolean) =>\n  StyleSheet.create({\n    row: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      marginBottom: Spacing.sm,\n    },\n    topRow: {\n      borderColor: colors.primary,\n    },\n    first: {\n      backgroundColor: isDark ? '#1E3D2A' : '#E8F5E9',\n    },\n    second: {\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n    },\n    third: {\n      backgroundColor: isDark ? '#2A2A2A' : '#FFFFFF',\n    },\n    rankBubble: {\n      width: 30,\n      height: 30,\n      borderRadius: 15,\n      backgroundColor: colors.primary,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    rankText: {\n      color: '#FFFFFF',\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.bold,\n    },\n    avatar: {\n      width: 34,\n      height: 34,\n      borderRadius: 17,\n      backgroundColor: isDark ? '#2A2A2A' : '#FFFFFF',\n      borderWidth: 1,\n      borderColor: colors.border,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    avatarEmoji: {\n      fontSize: 16,\n    },\n    meta: {\n      flex: 1,\n    },\n    name: {\n      fontSize: FontSizes.md,\n      color: colors.text,\n      fontWeight: FontWeights.semibold,\n    },\n    score: {\n      fontSize: FontSizes.md,\n      color: colors.primary,\n      fontWeight: FontWeights.bold,\n    },\n    empty: {\n      padding: Spacing.lg,\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      borderWidth: 1,\n      borderColor: colors.border,\n      alignItems: 'center',\n    },\n    emptyTitle: {\n      fontSize: FontSizes.lg,\n      color: colors.text,\n      fontWeight: FontWeights.bold,\n      marginBottom: 4,\n    },\n    emptySubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/GroupNoteCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1370,1373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1370,1373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport { useTheme } from '@/components/ThemeContext';\nimport type { GroupNote, StudyGroup } from '@/services/StudyGroupService';\nimport { getAvatarById } from '@/data/avatarStore';\n\ninterface GroupNoteCardProps {\n  note: GroupNote;\n  group: StudyGroup;\n}\n\nexport default function GroupNoteCard({ note, group }: GroupNoteCardProps) {\n  const { colors, isDark } = useTheme();\n\n  const profile = group.memberProfiles[note.userId];\n\n  const avatarEmoji = useMemo(() => {\n    const id = profile?.avatar ?? 'Robot';\n    return getAvatarById(id)?.emoji ?? 'üë§';\n  }, [profile?.avatar]);\n\n  const displayName = profile?.userName ?? 'Member';\n\n  const styles = getStyles(colors, isDark);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <View style={styles.avatar}>\n          <Text style={styles.avatarEmoji}>{avatarEmoji}</Text>\n        </View>\n        <View style={styles.meta}>\n          <Text style={styles.name}>{displayName}</Text>\n          <Text style={styles.time}>{new Date(note.createdAt).toLocaleString()}</Text>\n        </View>\n      </View>\n      <Text style={styles.content}>{note.content}</Text>\n    </View>\n  );\n}\n\nconst getStyles = (colors: any, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      marginBottom: Spacing.sm,\n    },\n    avatar: {\n      width: 36,\n      height: 36,\n      borderRadius: 18,\n      backgroundColor: isDark ? '#2A2A2A' : '#FFFFFF',\n      borderWidth: 1,\n      borderColor: colors.border,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    avatarEmoji: {\n      fontSize: 18,\n    },\n    meta: {\n      flex: 1,\n    },\n    name: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    time: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: 2,\n    },\n    content: {\n      fontSize: FontSizes.md,\n      color: colors.text,\n      lineHeight: FontSizes.md * 1.4,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/HeaderComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ImagePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/LeaderboardCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[439,442],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[439,442],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2880,2883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2880,2883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rank' is defined but never used. Allowed unused args must match /^_/u.","line":107,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":107,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Platform } from 'react-native';\nimport { LeaderboardEntry } from '@/store/userStore';\nimport { useTheme } from '@/components/ThemeContext';\nimport { FontSizes, FontWeights, Spacing, BorderRadius } from '@/constants/theme';\n\ninterface LeaderboardCardProps {\n  entry: LeaderboardEntry;\n  isCurrentUser?: boolean;\n  rank: number;\n  onPress?: () => void;\n  style?: any;\n}\n\nexport default function LeaderboardCard({ \n  entry, \n  isCurrentUser = false, \n  rank,\n  onPress,\n  style \n}: LeaderboardCardProps) {\n  const { colors } = useTheme();\n\n  const getRankEmoji = (rank: number) => {\n    switch (rank) {\n      case 1: return 'ü•á';\n      case 2: return 'ü•à';\n      case 3: return 'ü•â';\n      default: return `${rank}`;\n    }\n  };\n\n  const getRankColor = (rank: number) => {\n    switch (rank) {\n      case 1: return '#FFD700';\n      case 2: return '#C0C0C0';\n      case 3: return '#CD7F32';\n      default: return colors.textSecondary;\n    }\n  };\n\n  const styles = getStyles(colors, isCurrentUser, rank);\n\n  const CardComponent = (\n    <View style={[styles.container, style]}>\n      {/* Rank */}\n      <View style={styles.rankContainer}>\n        <Text style={[styles.rankText, { color: getRankColor(rank) }]}>\n          {rank <= 3 ? getRankEmoji(rank) : rank}\n        </Text>\n      </View>\n\n      {/* Avatar */}\n      <View style={styles.avatarContainer}>\n        <Text style={styles.avatarEmoji}>{entry.avatar}</Text>\n        {isCurrentUser && (\n          <View style={styles.currentUserBadge}>\n            <Text style={styles.currentUserBadgeText}>YOU</Text>\n          </View>\n        )}\n      </View>\n\n      {/* User Info */}\n      <View style={styles.userInfo}>\n        <Text style={[styles.userName, { color: colors.text }]}>\n          {entry.userName}\n        </Text>\n        <View style={styles.statsRow}>\n          <Text style={[styles.stat, { color: colors.textSecondary }]}>\n            {entry.weeklyXP} XP\n          </Text>\n          <Text style={[styles.separator, { color: colors.textSecondary }]}>‚Ä¢</Text>\n          <Text style={[styles.stat, { color: colors.textSecondary }]}>\n            üî• {entry.streak}\n          </Text>\n        </View>\n      </View>\n\n      {/* XP Bar */}\n      <View style={styles.xpContainer}>\n        <View style={styles.xpBar}>\n          <View \n            style={[\n              styles.xpBarFill, \n              { \n                width: `${Math.min((entry.weeklyXP / 500) * 100, 100)}%`,\n                backgroundColor: isCurrentUser ? '#B2AC88' : colors.primary \n              }\n            ]} \n          />\n        </View>\n      </View>\n    </View>\n  );\n\n  if (onPress) {\n    return (\n      <TouchableOpacity onPress={onPress} activeOpacity={0.7}>\n        {CardComponent}\n      </TouchableOpacity>\n    );\n  }\n\n  return CardComponent;\n}\n\nconst getStyles = (colors: any, isCurrentUser: boolean, rank: number) => StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: isCurrentUser ? '#B2AC8820' : colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.md,\n    marginBottom: Spacing.sm,\n    borderWidth: isCurrentUser ? 2 : 0,\n    borderColor: isCurrentUser ? '#B2AC88' : 'transparent',\n    ...Platform.select({\n      ios: { \n        shadowColor: '#000', \n        shadowOffset: { width: 0, height: 2 }, \n        shadowOpacity: 0.1, \n        shadowRadius: 4 \n      },\n      android: { elevation: 3 },\n    }),\n  },\n  rankContainer: {\n    width: 40,\n    alignItems: 'center',\n  },\n  rankText: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n  },\n  avatarContainer: {\n    position: 'relative',\n    marginHorizontal: Spacing.md,\n  },\n  avatarEmoji: {\n    fontSize: 32,\n  },\n  currentUserBadge: {\n    position: 'absolute',\n    top: -8,\n    right: -8,\n    backgroundColor: '#B2AC88',\n    borderRadius: 8,\n    paddingHorizontal: 4,\n    paddingVertical: 2,\n  },\n  currentUserBadgeText: {\n    color: 'white',\n    fontSize: 8,\n    fontWeight: FontWeights.bold,\n  },\n  userInfo: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.bold,\n    marginBottom: 4,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  stat: {\n    fontSize: FontSizes.sm,\n  },\n  separator: {\n    marginHorizontal: Spacing.sm,\n    fontSize: FontSizes.sm,\n  },\n  xpContainer: {\n    width: 60,\n    alignItems: 'center',\n  },\n  xpBar: {\n    width: '100%',\n    height: 4,\n    backgroundColor: colors.lightGray,\n    borderRadius: 2,\n    overflow: 'hidden',\n  },\n  xpBarFill: {\n    height: '100%',\n    borderRadius: 2,\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/LeaderboardEntry.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":2,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, Image } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme } from './ThemeContext';\nimport { ReputationLeaderboardEntry } from '@/store/userStore';\nimport { Ionicons } from '@expo/vector-icons';\n\ninterface LeaderboardEntryProps {\n  entry: ReputationLeaderboardEntry;\n  isCurrentUser: boolean;\n}\n\nexport default function LeaderboardEntry({ entry, isCurrentUser }: LeaderboardEntryProps) {\n  const { colors } = useTheme();\n\n  const getRankIcon = (rank: number) => {\n    switch (rank) {\n      case 1: return <Text style={styles.trophy}>ü•á</Text>;\n      case 2: return <Text style={styles.trophy}>ü•à</Text>;\n      case 3: return <Text style={styles.trophy}>ü•â</Text>;\n      default: return <Text style={[styles.rankNumber, { color: colors.textSecondary }]}>#{rank}</Text>;\n    }\n  };\n\n  return (\n    <View \n      style={[\n        styles.container, \n        { \n          backgroundColor: isCurrentUser ? colors.primary + '10' : colors.cardBackground,\n          borderColor: isCurrentUser ? colors.primary : colors.border \n        }\n      ]}\n    >\n      <View style={styles.rankContainer}>\n        {getRankIcon(entry.rank)}\n      </View>\n\n      <View style={styles.avatarContainer}>\n        <View style={[styles.avatarPlaceholder, { backgroundColor: colors.border }]}>\n          <Text style={{ fontSize: 20 }}>üë§</Text>\n        </View>\n        {isCurrentUser && (\n            <View style={[styles.currentUserBadge, { backgroundColor: colors.primary }]}>\n                <Ionicons name=\"person\" size={10} color=\"white\" />\n            </View>\n        )}\n      </View>\n\n      <View style={styles.userInfo}>\n        <Text style={[styles.userName, { color: colors.text }]} numberOfLines={1}>\n          {entry.userName}\n        </Text>\n        <View style={styles.statsRow}>\n          <View style={styles.statItem}>\n            <Ionicons name=\"medal-outline\" size={12} color={colors.textSecondary} />\n            <Text style={[styles.statText, { color: colors.textSecondary }]}>{entry.badgeCount}</Text>\n          </View>\n          <View style={styles.statItem}>\n            <Ionicons name=\"checkmark-circle-outline\" size={12} color={colors.textSecondary} />\n            <Text style={[styles.statText, { color: colors.textSecondary }]}>{entry.helpfulAnswers}</Text>\n          </View>\n        </View>\n      </View>\n\n      <View style={styles.reputationContainer}>\n        <Text style={[styles.reputationValue, { color: colors.primary }]}>{entry.reputation}</Text>\n        <Text style={[styles.reputationLabel, { color: colors.textSecondary }]}>pts</Text>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: Spacing.md,\n    borderRadius: BorderRadius.md,\n    marginBottom: Spacing.sm,\n    borderWidth: 1,\n  },\n  rankContainer: {\n    width: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  trophy: {\n    fontSize: 20,\n  },\n  rankNumber: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.bold,\n  },\n  avatarContainer: {\n    position: 'relative',\n    marginRight: Spacing.md,\n  },\n  avatarPlaceholder: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  currentUserBadge: {\n    position: 'absolute',\n    bottom: -2,\n    right: -2,\n    width: 16,\n    height: 16,\n    borderRadius: 8,\n    borderWidth: 2,\n    borderColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  userInfo: {\n    flex: 1,\n    marginRight: Spacing.sm,\n  },\n  userName: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.bold,\n    marginBottom: 2,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  statItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: Spacing.sm,\n  },\n  statText: {\n    fontSize: FontSizes.xs,\n    marginLeft: 2,\n  },\n  reputationContainer: {\n    alignItems: 'flex-end',\n  },\n  reputationValue: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n  },\n  reputationLabel: {\n    fontSize: 10,\n    textTransform: 'uppercase',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/LessonView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showBreakActivity' is assigned a value but never used.","line":77,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":77,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleBreakActivitySelect' is assigned a value but never used.","line":157,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":157,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activity' is defined but never used. Allowed unused args must match /^_/u.","line":157,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":157,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  Platform,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { useUserStore } from '@/store/userStore';\nimport { ContentValidator } from '@/services/ContentValidator';\nimport { ContentType } from '@/types/content';\nimport AdContainer from './AdContainer';\nimport PomodoroTimer from './PomodoroTimer';\nimport VirtualForest from './VirtualForest';\nimport { timerService } from '@/services/TimerService';\nimport { focusTracker } from '@/services/FocusTracker';\nimport { BreakActivity } from '@/types/productivity';\n\ninterface LessonContent {\n  title: string;\n  icon: string;\n  bulletPoints: string[];\n  paragraphs: string[];\n}\n\ninterface LessonViewProps {\n  chapter: string;\n  subject: string;\n  className: string;\n  lessonContent: LessonContent;\n  currentLessonIndex: number;\n  totalLessons: number;\n  onNext?: () => void;\n  onPrevious?: () => void;\n  showNavigation?: boolean;\n}\n\nexport default function LessonView({\n  chapter,\n  subject,\n  lessonContent,\n  currentLessonIndex,\n  totalLessons,\n  onNext,\n  onPrevious,\n  showNavigation = true,\n}: LessonViewProps) {\n  const router = useRouter();\n  const { colors, isDark } = useTheme();\n  const ageGroup = useUserStore((s) => s.ageGroup) ?? 'under12';\n  const scrollViewRef = useRef<ScrollView>(null);\n\n  const contentId = useMemo(\n    () => `lesson:${subject}:${chapter}:${lessonContent.title}`,\n    [subject, chapter, lessonContent.title]\n  );\n\n  const syncValidated = useMemo(\n    () =>\n      ContentValidator.validateLessonContentSync(lessonContent, {\n        contentId,\n        ageGroup,\n        source: 'LessonView',\n      }),\n    [lessonContent, contentId, ageGroup]\n  );\n\n  const [isQuarantined, setIsQuarantined] = useState(false);\n  const [contentBlockedMessage, setContentBlockedMessage] = useState<string | null>(null);\n  const [showTimer, setShowTimer] = useState(false);\n  const [showForest, setShowForest] = useState(false);\n  const [activeSessionId, setActiveSessionId] = useState<string | null>(null);\n  const [showBreakActivity, setShowBreakActivity] = useState(false);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    const run = async () => {\n      setIsQuarantined(false);\n      setContentBlockedMessage(null);\n\n      const combinedText = [\n        lessonContent.title,\n        ...(lessonContent.bulletPoints || []),\n        ...(lessonContent.paragraphs || []),\n      ].join('\\n');\n\n      const { result } = await ContentValidator.validateText({\n        text: combinedText,\n        context: {\n          contentId,\n          contentType: ContentType.Lesson,\n          ageGroup,\n          source: 'LessonView',\n        },\n      });\n\n      if (cancelled) return;\n\n      if (result.decision === 'quarantine' || result.decision === 'block') {\n        setIsQuarantined(true);\n        setContentBlockedMessage(result.fallbackText ?? 'This lesson is temporarily unavailable.');\n      }\n    };\n\n    run().catch((err) => {\n      console.warn('Lesson safety check failed:', err);\n    });\n\n    return () => {\n      cancelled = true;\n    };\n  }, [lessonContent, contentId, ageGroup]);\n\n  // Load active timer and forest states\n  useEffect(() => {\n    const loadStates = async () => {\n      const activeState = await timerService.loadActiveState();\n      if (activeState) {\n        setActiveSessionId(activeState.sessionId);\n        const activeTree = await focusTracker.loadActiveTree();\n        if (activeTree) {\n          setShowForest(true);\n        }\n      }\n    };\n    loadStates();\n  }, []);\n\n  const handleStartTimer = useCallback(() => {\n    setShowTimer(true);\n  }, []);\n\n  const handleTimerClose = useCallback(() => {\n    setShowTimer(false);\n  }, []);\n\n  const handleSessionStart = useCallback(async (sessionId: string) => {\n    setActiveSessionId(sessionId);\n    await focusTracker.startGrowingTree(sessionId);\n    setShowForest(true);\n  }, []);\n\n  const handleSessionComplete = useCallback(async (sessionId: string, focusScore: number) => {\n    await timerService.updateFocusScore(sessionId, focusScore);\n    const treeSurvived = focusTracker.isTreeAlive();\n    await timerService.markTreeSurvived(sessionId, treeSurvived);\n    await focusTracker.stopGrowingTree();\n    setActiveSessionId(null);\n    setShowForest(false);\n  }, []);\n\n  const handleBreakActivitySelect = useCallback((activity: BreakActivity) => {\n    setShowBreakActivity(false);\n  }, []);\n\n  const handleBack = () => {\n    router.back();\n  };\n\n  const hasPrevious = currentLessonIndex > 0;\n  const hasNext = currentLessonIndex < totalLessons - 1;\n\n  const styles = getStyles(colors, isDark);\n\n  const isOriginalEmpty =\n    (lessonContent.paragraphs?.length ?? 0) === 0 && (lessonContent.bulletPoints?.length ?? 0) === 0;\n\n  const displayLessonContent = isQuarantined ? null : syncValidated.content;\n\n  const emptyMessage =\n    contentBlockedMessage ??\n    (!isOriginalEmpty && syncValidated.decision === 'filter'\n      ? 'This lesson is not available for your age group.'\n      : 'Lesson content coming soon');\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <View style={styles.headerTop}>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={handleBack}\n            activeOpacity={0.7}\n          >\n            <Text style={styles.backButtonText}>‚Üê</Text>\n          </TouchableOpacity>\n          <View style={styles.chapterBadge}>\n            <Text style={styles.chapterBadgeText}>\n              {subject} ‚Ä¢ {chapter}\n            </Text>\n          </View>\n        </View>\n        \n        {/* Pomodoro Timer Button */}\n        {!activeSessionId && (\n          <TouchableOpacity\n            style={styles.timerButton}\n            onPress={handleStartTimer}\n            activeOpacity={0.8}\n          >\n            <Text style={styles.timerButtonText}>‚è±Ô∏è</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n\n      {/* Virtual Forest - shown when timer is active */}\n      {showForest && activeSessionId && (\n        <VirtualForest sessionId={activeSessionId} showHistory={false} />\n      )}\n\n      <ScrollView\n        ref={scrollViewRef}\n        style={styles.scrollView}\n        contentContainerStyle={styles.scrollContent}\n        showsVerticalScrollIndicator={true}\n        alwaysBounceVertical={true}\n      >\n        <View style={styles.lessonCard}>\n          <View style={styles.iconContainer}>\n            <Text style={styles.icon}>{displayLessonContent?.icon || 'üìñ'}</Text>\n          </View>\n\n          <Text style={styles.lessonTitle}>{displayLessonContent?.title || lessonContent.title}</Text>\n\n          <View style={styles.divider} />\n\n          {displayLessonContent ? (\n            <>\n              <View style={styles.contentSection}>\n                {displayLessonContent.bulletPoints.map((point, index) => (\n                  <View key={index} style={styles.bulletPointContainer}>\n                    <Text style={styles.bulletPoint}>‚Ä¢</Text>\n                    <Text style={styles.bulletPointText}>{point}</Text>\n                  </View>\n                ))}\n              </View>\n\n              {displayLessonContent.paragraphs.map((paragraph, index) => (\n                <View key={`para-${index}`} style={styles.paragraphContainer}>\n                  <Text style={styles.paragraphText}>{paragraph}</Text>\n                </View>\n              ))}\n\n              {displayLessonContent.paragraphs.length === 0 && displayLessonContent.bulletPoints.length === 0 && (\n                <View style={styles.emptyContent}>\n                  <Text style={styles.emptyText}>{emptyMessage}</Text>\n                </View>\n              )}\n            </>\n          ) : (\n            <View style={styles.emptyContent}>\n              <Text style={styles.emptyText}>{emptyMessage}</Text>\n            </View>\n          )}\n        </View>\n\n        {/* Advertisement Banner */}\n        <AdContainer />\n\n        {showNavigation && (\n          <View style={styles.navigationSpacer} />\n        )}\n      </ScrollView>\n\n      {showNavigation && (\n        <View style={styles.navigationContainer}>\n          <View style={styles.navigationRow}>\n            <TouchableOpacity\n              style={[\n                styles.navButton,\n                styles.prevButton,\n                !hasPrevious && styles.navButtonDisabled,\n              ]}\n              onPress={onPrevious}\n              disabled={!hasPrevious}\n              activeOpacity={hasPrevious ? 0.7 : 1}\n            >\n              <Text\n                style={[\n                  styles.navButtonText,\n                  styles.prevButtonText,\n                  !hasPrevious && styles.navButtonTextDisabled,\n                ]}\n              >\n                ‚Üê Previous\n              </Text>\n            </TouchableOpacity>\n\n            <View style={styles.lessonIndicator}>\n              <Text style={styles.lessonIndicatorText}>\n                {currentLessonIndex + 1} / {totalLessons}\n              </Text>\n            </View>\n\n            <TouchableOpacity\n              style={[\n                styles.navButton,\n                styles.nextButton,\n                !hasNext && styles.navButtonDisabled,\n              ]}\n              onPress={onNext}\n              disabled={!hasNext}\n              activeOpacity={hasNext ? 0.7 : 1}\n            >\n              <Text\n                style={[\n                  styles.navButtonText,\n                  styles.nextButtonText,\n                  !hasNext && styles.navButtonTextDisabled,\n                ]}\n              >\n                Next ‚Üí\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n\n      {/* Pomodoro Timer Modal */}\n      <PomodoroTimer\n        visible={showTimer}\n        onClose={handleTimerClose}\n        subject={subject}\n        chapter={chapter}\n        onSessionStart={handleSessionStart}\n        onSessionComplete={handleSessionComplete}\n      />\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Platform.select({ ios: 110, default: 70 }), // Adjust for global header\n    paddingBottom: Spacing.md,\n    backgroundColor: colors.background,\n  },\n  headerTop: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  backButton: {\n    padding: Spacing.sm,\n    marginRight: Spacing.sm,\n  },\n  backButtonText: {\n    fontSize: FontSizes.lg,\n    color: colors.primary,\n    fontWeight: FontWeights.semibold,\n  },\n  chapterBadge: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.xl,\n  },\n  chapterBadgeText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n    color: colors.white,\n  },\n  timerButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.primary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  timerButtonText: {\n    fontSize: 20,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Spacing.md,\n    paddingBottom: Spacing.xl,\n  },\n  lessonCard: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.xl,\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.08,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  iconContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: Spacing.lg,\n  },\n  icon: {\n    fontSize: 64,\n  },\n  lessonTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    color: isDark ? colors.text : colors.charcoal,\n    textAlign: 'center',\n    marginBottom: Spacing.lg,\n  },\n  divider: {\n    height: 2,\n    backgroundColor: colors.primary,\n    borderRadius: 1,\n    marginBottom: Spacing.xl,\n    width: 60,\n    alignSelf: 'center',\n  },\n  contentSection: {\n    marginBottom: Spacing.lg,\n  },\n  bulletPointContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: Spacing.md,\n    paddingLeft: Spacing.sm,\n  },\n  bulletPoint: {\n    fontSize: FontSizes.lg,\n    color: colors.primary,\n    marginRight: Spacing.sm,\n    lineHeight: FontSizes.lg * 1.4,\n  },\n  bulletPointText: {\n    fontSize: FontSizes.md,\n    color: colors.text,\n    flex: 1,\n    lineHeight: FontSizes.md * 1.5,\n  },\n  paragraphContainer: {\n    marginBottom: Spacing.md,\n  },\n  paragraphText: {\n    fontSize: FontSizes.md,\n    color: colors.text,\n    lineHeight: FontSizes.md * 1.6,\n    textAlign: 'justify',\n  },\n  emptyContent: {\n    alignItems: 'center',\n    paddingVertical: Spacing.xl,\n  },\n  emptyText: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  navigationSpacer: {\n    height: Spacing.xl,\n  },\n  navigationContainer: {\n    backgroundColor: colors.background,\n    paddingHorizontal: Spacing.lg,\n    paddingVertical: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: colors.lightGray,\n  },\n  navigationRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  navButton: {\n    paddingVertical: Spacing.md,\n    paddingHorizontal: Spacing.lg,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: 100,\n  },\n  prevButton: {\n    backgroundColor: colors.cardBackground,\n    borderWidth: 2,\n    borderColor: colors.primary,\n  },\n  nextButton: {\n    backgroundColor: colors.primary,\n  },\n  navButtonDisabled: {\n    backgroundColor: colors.cardBackground,\n    borderColor: colors.lightGray,\n    opacity: 0.6,\n  },\n  navButtonText: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n  },\n  prevButtonText: {\n    color: colors.primary,\n  },\n  nextButtonText: {\n    color: colors.white,\n  },\n  navButtonTextDisabled: {\n    color: colors.textSecondary,\n  },\n  lessonIndicator: {\n    paddingHorizontal: Spacing.md,\n  },\n  lessonIndicatorText: {\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n    fontWeight: FontWeights.medium,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/NoConnectionScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SCREEN_WIDTH' is assigned a value but never used.","line":7,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDark' is assigned a value but never used.","line":91,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Dimensions } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Feather } from '@expo/vector-icons';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\n\ninterface NoConnectionScreenProps {\n  onRetry?: () => void;\n  message?: string;\n}\n\nexport default function NoConnectionScreen({\n  onRetry,\n  message = 'Check your internet connection and try again',\n}: NoConnectionScreenProps) {\n  const { colors } = useTheme();\n  const styles = getStyles(colors);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.content}>\n        <View style={styles.iconContainer}>\n          <View style={styles.iconBackground}>\n            <Feather name=\"wifi-off\" size={48} color={colors.primary} />\n          </View>\n        </View>\n\n        <Text style={styles.title}>No Connection</Text>\n        <Text style={styles.message}>{message}</Text>\n\n        <View style={styles.tipsContainer}>\n          <Text style={styles.tipsTitle}>Quick tips:</Text>\n          <View style={styles.tipItem}>\n            <Feather name=\"check-circle\" size={16} color={colors.primary} />\n            <Text style={styles.tipText}>Check if Wi-Fi or mobile data is on</Text>\n          </View>\n          <View style={styles.tipItem}>\n            <Feather name=\"check-circle\" size={16} color={colors.primary} />\n            <Text style={styles.tipText}>Move to an area with better signal</Text>\n          </View>\n          <View style={styles.tipItem}>\n            <Feather name=\"check-circle\" size={16} color={colors.primary} />\n            <Text style={styles.tipText}>Restart your device if needed</Text>\n          </View>\n        </View>\n\n        <TouchableOpacity style={styles.retryButton} onPress={onRetry} activeOpacity={0.8}>\n          <Feather name=\"refresh-cw\" size={20} color=\"#FFFFFF\" />\n          <Text style={styles.retryButtonText}>Try Again</Text>\n        </TouchableOpacity>\n\n        <Text style={styles.helpText}>\n          Once you are back online, this screen will disappear automatically.\n        </Text>\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: { flex: 1, backgroundColor: colors.background, justifyContent: 'center', alignItems: 'center', padding: Spacing.xl },\n    content: { width: '100%', maxWidth: 400, alignItems: 'center' },\n    iconContainer: { marginBottom: Spacing.xl },\n    iconBackground: {\n      width: 120,\n      height: 120,\n      borderRadius: 60,\n      backgroundColor: colors.cardBackground,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderWidth: 3,\n      borderColor: colors.primary,\n      borderStyle: 'dashed' as const,\n    },\n    title: { fontSize: FontSizes.xxl, fontWeight: FontWeights.bold, color: colors.text, marginBottom: Spacing.md, textAlign: 'center' },\n    message: { fontSize: FontSizes.md, color: colors.textSecondary, textAlign: 'center', marginBottom: Spacing.xl, lineHeight: FontSizes.md * 1.5 },\n    tipsContainer: { width: '100%', backgroundColor: colors.cardBackground, borderRadius: BorderRadius.lg, padding: Spacing.lg, marginBottom: Spacing.xl },\n    tipsTitle: { fontSize: FontSizes.sm, fontWeight: FontWeights.semibold, color: colors.text, marginBottom: Spacing.md },\n    tipItem: { flexDirection: 'row', alignItems: 'center', marginBottom: Spacing.sm },\n    tipText: { fontSize: FontSizes.sm, color: colors.textSecondary, marginLeft: Spacing.sm, flex: 1 },\n    retryButton: { flexDirection: 'row', alignItems: 'center', justifyContent: 'center', backgroundColor: colors.primary, paddingVertical: Spacing.md, paddingHorizontal: Spacing.xl, borderRadius: BorderRadius.lg, marginBottom: Spacing.lg, minWidth: 160, minHeight: 56 },\n    retryButtonText: { fontSize: FontSizes.md, fontWeight: FontWeights.semibold, color: '#FFFFFF', marginLeft: Spacing.sm },\n    helpText: { fontSize: FontSizes.xs, color: colors.textSecondary, textAlign: 'center', opacity: 0.7, lineHeight: FontSizes.xs * 1.4 },\n  });\n\n// Connected State Screen (when connection is restored)\nexport function ConnectionRestoredScreen({ onContinue }: { onContinue?: () => void }) {\n  const { colors, isDark } = useTheme();\n  const styles = getStyles(colors);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.content}>\n        <View style={styles.iconBackground}>\n          <Feather name=\"wifi\" size={48} color=\"#FFFFFF\" />\n        </View>\n\n        <Text style={styles.title}>You are Back Online!</Text>\n        <Text style={styles.message}>Your connection has been restored.</Text>\n\n        <TouchableOpacity style={styles.retryButton} onPress={onContinue} activeOpacity={0.8}>\n          <Feather name=\"arrow-right\" size={20} color=\"#FFFFFF\" />\n          <Text style={styles.retryButtonText}>Continue</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/NoteCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1755,1758],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1755,1758],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3586,3589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3586,3589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Alert } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { VoiceNote } from '@/types/notes';\n\ninterface NoteCardProps {\n  note: VoiceNote;\n  onDelete: (id: string) => void;\n  onToggleStar: (id: string) => void;\n}\n\nexport default function NoteCard({ note, onDelete, onToggleStar }: NoteCardProps) {\n  const { colors, isDark } = useTheme();\n  const router = useRouter();\n  const styles = getStyles(colors, isDark);\n\n  const handleDelete = () => {\n    Alert.alert(\n      'Delete Note',\n      'Are you sure you want to delete this note?',\n      [\n        {\n          text: 'Cancel',\n          style: 'cancel',\n        },\n        {\n          text: 'Delete',\n          style: 'destructive',\n          onPress: () => onDelete(note.id),\n        },\n      ]\n    );\n  };\n\n  const formatDate = (timestamp: number): string => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n    if (days === 0) return 'Today';\n    if (days === 1) return 'Yesterday';\n    if (days < 7) return `${days} days ago`;\n    return date.toLocaleDateString();\n  };\n\n  const getLanguageBadge = (language: string): string => {\n    switch (language) {\n      case 'hi':\n        return 'üáÆüá≥ Hindi';\n      case 'hinglish':\n        return 'üáÆüá≥ Hinglish';\n      default:\n        return 'üá¨üáß English';\n    }\n  };\n\n  return (\n    <TouchableOpacity\n      style={styles.card}\n      onPress={() => router.push(`/voice-notes/${note.id}` as any)}\n      activeOpacity={0.7}\n    >\n      <View style={styles.header}>\n        <View style={styles.headerContent}>\n          <Text style={styles.title} numberOfLines={1}>\n            {note.title}\n          </Text>\n          <View style={styles.metaRow}>\n            <Text style={styles.date}>{formatDate(note.updatedAt)}</Text>\n            <Text style={styles.duration}>{note.duration}s</Text>\n            <Text style={styles.language}>{getLanguageBadge(note.language)}</Text>\n          </View>\n        </View>\n        <TouchableOpacity\n          style={styles.starButton}\n          onPress={(e) => {\n            e.stopPropagation();\n            onToggleStar(note.id);\n          }}\n        >\n          <Text style={styles.starIcon}>{note.isStarred ? '‚≠ê' : '‚òÜ'}</Text>\n        </TouchableOpacity>\n      </View>\n\n      <Text style={styles.preview} numberOfLines={3}>\n        {note.summary}\n      </Text>\n\n      {note.tags.length > 0 && (\n        <View style={styles.tagsContainer}>\n          {note.tags.slice(0, 3).map((tag, index) => (\n            <View key={index} style={styles.tag}>\n              <Text style={styles.tagText}>{tag}</Text>\n            </View>\n          ))}\n          {note.tags.length > 3 && (\n            <Text style={styles.moreTags}>+{note.tags.length - 3}</Text>\n          )}\n        </View>\n      )}\n\n      <View style={styles.footer}>\n        <TouchableOpacity\n          style={styles.footerButton}\n          onPress={(e) => {\n            e.stopPropagation();\n            handleDelete();\n          }}\n        >\n          <Text style={styles.footerButtonText}>Delete</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.footerButton, styles.editButton]}\n          onPress={(e) => {\n            e.stopPropagation();\n            router.push(`/voice-notes/${note.id}/edit` as any);\n          }}\n        >\n          <Text style={[styles.footerButtonText, { color: colors.white }]}>Edit</Text>\n        </TouchableOpacity>\n      </View>\n    </TouchableOpacity>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) => StyleSheet.create({\n  card: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.lg,\n    marginBottom: Spacing.md,\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.08,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: Spacing.sm,\n  },\n  headerContent: {\n    flex: 1,\n  },\n  title: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.semibold,\n    color: isDark ? colors.text : colors.charcoal,\n    marginBottom: Spacing.xs,\n  },\n  metaRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    gap: Spacing.sm,\n  },\n  date: {\n    fontSize: FontSizes.xs,\n    color: colors.textSecondary,\n  },\n  duration: {\n    fontSize: FontSizes.xs,\n    color: colors.primary,\n    fontWeight: FontWeights.medium,\n  },\n  language: {\n    fontSize: FontSizes.xs,\n    color: colors.textSecondary,\n  },\n  starButton: {\n    padding: Spacing.xs,\n    marginLeft: Spacing.sm,\n  },\n  starIcon: {\n    fontSize: FontSizes.lg,\n  },\n  preview: {\n    fontSize: FontSizes.sm,\n    color: colors.text,\n    lineHeight: FontSizes.sm * 1.5,\n    marginBottom: Spacing.sm,\n  },\n  tagsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    marginBottom: Spacing.md,\n    gap: Spacing.xs,\n  },\n  tag: {\n    backgroundColor: colors.lightGray,\n    paddingHorizontal: Spacing.sm,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.sm,\n  },\n  tagText: {\n    fontSize: FontSizes.xs,\n    color: colors.text,\n    fontWeight: FontWeights.medium,\n  },\n  moreTags: {\n    fontSize: FontSizes.xs,\n    color: colors.textSecondary,\n    fontStyle: 'italic',\n  },\n  footer: {\n    flexDirection: 'row',\n    borderTopWidth: 1,\n    borderTopColor: colors.lightGray,\n    paddingTop: Spacing.sm,\n    gap: Spacing.sm,\n  },\n  footerButton: {\n    flex: 1,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.sm,\n    alignItems: 'center',\n  },\n  footerButtonText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n    color: colors.primary,\n  },\n  editButton: {\n    backgroundColor: colors.primary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/PasswordInput.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, forwardRef, useMemo } from 'react';\nimport {\n  View,\n  TextInput,\n  StyleSheet,\n  TouchableOpacity,\n  Text,\n  Animated,\n  Easing,\n} from 'react-native';\nimport { Feather } from '@expo/vector-icons';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\n\ninterface PasswordInputProps {\n  value: string;\n  onChangeText: (text: string) => void;\n  error?: string;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  onTogglePassword?: (visible: boolean) => void;\n}\n\nexport const PasswordInput = forwardRef<TextInput, PasswordInputProps>(\n  ({ value, onChangeText, error, onFocus, onBlur, onTogglePassword }, ref) => {\n    const { colors } = useTheme();\n    const [isPasswordVisible, setIsPasswordVisible] = useState(false);\n    const [isFocused, setIsFocused] = useState(false);\n    const eyeAnim = useMemo(() => new Animated.Value(0), []);\n    const dotAnim = useMemo(() => new Animated.Value(1), []);\n\n    const handleFocus = () => {\n      setIsFocused(true);\n      onFocus?.();\n    };\n\n    const handleBlur = () => {\n      setIsFocused(false);\n      onBlur?.();\n    };\n\n    const togglePassword = () => {\n      const newVisible = !isPasswordVisible;\n      setIsPasswordVisible(newVisible);\n      onTogglePassword?.(newVisible);\n\n      Animated.timing(eyeAnim, {\n        toValue: newVisible ? 1 : 0,\n        duration: 200,\n        useNativeDriver: true,\n        easing: Easing.out(Easing.ease),\n      }).start();\n\n      Animated.timing(dotAnim, {\n        toValue: newVisible ? 0 : 1,\n        duration: 300,\n        useNativeDriver: true,\n        easing: Easing.out(Easing.back(1.5)),\n      }).start();\n    };\n\n    const styles = getStyles(colors);\n\n    return (\n      <View style={styles.container}>\n        <Text style={styles.label}>Password</Text>\n        <View\n          style={[\n            styles.inputWrapper,\n            isFocused && styles.inputWrapperFocused,\n            error && styles.inputWrapperError,\n          ]}\n        >\n          <View style={styles.textContainer}>\n            {value.length > 0 && !isPasswordVisible ? (\n              <View style={styles.passwordDots}>\n                {Array.from({ length: Math.min(value.length, 12) }).map((_, index) => (\n                  <Animated.View\n                    key={index}\n                    style={[\n                      styles.dot,\n                      {\n                        backgroundColor: colors.text,\n                        opacity: dotAnim,\n                        transform: [\n                          {\n                            scale: dotAnim.interpolate({\n                              inputRange: [0, 1],\n                              outputRange: [0.3, 1],\n                            }),\n                          },\n                        ],\n                      },\n                    ]}\n                  />\n                ))}\n              </View>\n            ) : (\n              <TextInput\n                ref={ref}\n                style={styles.input}\n                placeholder=\"Enter your password\"\n                placeholderTextColor={colors.textSecondary}\n                secureTextEntry={!isPasswordVisible}\n                value={value}\n                onChangeText={onChangeText}\n                onFocus={handleFocus}\n                onBlur={handleBlur}\n                autoCapitalize=\"none\"\n              />\n            )}\n          </View>\n          <TouchableOpacity\n            style={styles.eyeButton}\n            onPress={togglePassword}\n            hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n            activeOpacity={0.7}\n          >\n            <Animated.View\n              style={[\n                styles.eyeIconWrapper,\n                {\n                  transform: [\n                    {\n                      scale: eyeAnim.interpolate({\n                        inputRange: [0, 1],\n                        outputRange: [1, 1.2],\n                      }),\n                    },\n                  ],\n                },\n              ]}\n            >\n              <Feather\n                name={isPasswordVisible ? 'eye-off' : 'eye'}\n                size={22}\n                color={isFocused ? colors.primary : colors.textSecondary}\n              />\n            </Animated.View>\n          </TouchableOpacity>\n        </View>\n        {error && <Text style={styles.errorText}>{error}</Text>}\n      </View>\n    );\n  }\n);\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      marginBottom: Spacing.lg,\n    },\n    label: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.medium,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    inputWrapper: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      borderWidth: 1,\n      borderColor: colors.lightGray,\n      paddingHorizontal: Spacing.md,\n    },\n    inputWrapperFocused: {\n      borderColor: colors.primary,\n      shadowColor: colors.primary,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.2,\n      shadowRadius: 8,\n      elevation: 3,\n    },\n    inputWrapperError: {\n      borderColor: colors.error,\n    },\n    textContainer: {\n      flex: 1,\n      paddingVertical: Spacing.md,\n    },\n    input: {\n      fontSize: FontSizes.md,\n      color: colors.text,\n      padding: 0,\n      margin: 0,\n    },\n    passwordDots: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: 6,\n    },\n    dot: {\n      width: 10,\n      height: 10,\n      borderRadius: 5,\n    },\n    eyeButton: {\n      padding: Spacing.xs,\n    },\n    eyeIconWrapper: {\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    errorText: {\n      fontSize: FontSizes.sm,\n      color: colors.error,\n      marginTop: Spacing.xs,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/PathwaysTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/PathwaysView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/PerformanceChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDark' is defined but never used. Allowed unused args must match /^_/u.","line":88,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, StyleSheet, Text, Dimensions } from 'react-native';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { analyticsService } from '@/services/AnalyticsService';\n\nconst { width: screenWidth } = Dimensions.get('window');\nconst chartWidth = screenWidth - Spacing.lg * 2 - Spacing.lg * 2;\nconst barWidth = (chartWidth / 8) - 8;\n\nexport default function PerformanceChart() {\n  const { colors, isDark } = useTheme();\n  const styles = getStyles(colors, isDark);\n\n  const chartData = analyticsService.getPerformanceChartData();\n  \n  // If no data, show placeholder\n  if (chartData.accuracyData.length === 0) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.emptyChart}>\n          <Text style={styles.emptyText}>No performance data yet</Text>\n        </View>\n      </View>\n    );\n  }\n\n  const maxAccuracy = Math.max(...chartData.accuracyData, 100);\n  \n  return (\n    <View style={styles.container}>\n      {/* Y-axis labels */}\n      <View style={styles.yAxis}>\n        <Text style={styles.yAxisLabel}>100%</Text>\n        <Text style={styles.yAxisLabel}>75%</Text>\n        <Text style={styles.yAxisLabel}>50%</Text>\n        <Text style={styles.yAxisLabel}>25%</Text>\n        <Text style={styles.yAxisLabel}>0%</Text>\n      </View>\n\n      {/* Chart area */}\n      <View style={styles.chartArea}>\n        {/* Grid lines */}\n        {['100', '75', '50', '25', '0'].map((percent) => (\n          <View\n            key={percent}\n            style={[\n              styles.gridLine,\n              { bottom: `${parseInt(percent)}%` },\n            ]}\n          />\n        ))}\n\n        {/* Bars */}\n        <View style={styles.barsContainer}>\n          {chartData.accuracyData.map((accuracy, index) => {\n            const height = (accuracy / maxAccuracy) * 100;\n            const barColor = accuracy >= 70 \n              ? colors.success \n              : accuracy >= 50 \n              ? colors.warning \n              : colors.error;\n            \n            return (\n              <View key={index} style={styles.barContainer}>\n                <View style={styles.barWrapper}>\n                  <View\n                    style={[\n                      styles.bar,\n                      {\n                        height: `${height}%`,\n                        backgroundColor: barColor,\n                      },\n                    ]}\n                  />\n                  <Text style={styles.barLabel}>{accuracy}%</Text>\n                </View>\n                <Text style={styles.xAxisLabel}>{chartData.labels[index]}</Text>\n              </View>\n            );\n          })}\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) => StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    padding: Spacing.md,\n    height: 200,\n  },\n  yAxis: {\n    width: 40,\n    justifyContent: 'space-between',\n    alignItems: 'flex-end',\n    paddingRight: Spacing.xs,\n  },\n  yAxisLabel: {\n    fontSize: FontSizes.xs,\n    color: colors.textSecondary,\n    textAlign: 'right',\n    transform: [{ translateY: -6 }],\n  },\n  chartArea: {\n    flex: 1,\n    position: 'relative',\n    paddingLeft: Spacing.sm,\n  },\n  gridLine: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    height: 1,\n    backgroundColor: colors.lightGray,\n  },\n  barsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    height: '100%',\n    alignItems: 'flex-end',\n  },\n  barContainer: {\n    alignItems: 'center',\n    width: barWidth,\n  },\n  barWrapper: {\n    alignItems: 'center',\n    height: '100%',\n    justifyContent: 'flex-end',\n  },\n  bar: {\n    width: '100%',\n    borderTopLeftRadius: 4,\n    borderTopRightRadius: 4,\n  },\n  barLabel: {\n    fontSize: FontSizes.xs,\n    fontWeight: FontWeights.medium,\n    color: colors.text,\n    marginTop: Spacing.xs,\n  },\n  xAxisLabel: {\n    fontSize: FontSizes.xs,\n    color: colors.textSecondary,\n    marginTop: Spacing.xs,\n  },\n  emptyChart: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  emptyText: {\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/PomodoroTimer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":1,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TimerPhase' is defined but never used.","line":13,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onSessionComplete' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showSettings' is assigned a value but never used.","line":43,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowSettings' is assigned a value but never used.","line":43,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":39},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadSettings` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/home/engine/project/components/PomodoroTimer.tsx:47:5\n  45 |\n  46 |   useEffect(() => {\n> 47 |     loadSettings();\n     |     ^^^^^^^^^^^^ `loadSettings` accessed before it is declared\n  48 |     loadActiveTimer();\n  49 |   }, []);\n  50 |\n\n/home/engine/project/components/PomodoroTimer.tsx:51:3\n  49 |   }, []);\n  50 |\n> 51 |   const loadSettings = async () => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 52 |     const loadedSettings = await timerService.loadSettings();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 53 |     setSettings(loadedSettings);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |     setSelectedDuration(loadedSettings.studyDuration);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |   };\n     | ^^^^^ `loadSettings` is declared here\n  56 |\n  57 |   const loadActiveTimer = async () => {\n  58 |     const state = await timerService.loadActiveState();","line":47,"column":5,"nodeType":null,"endLine":47,"endColumn":17},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadActiveTimer` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/home/engine/project/components/PomodoroTimer.tsx:48:5\n  46 |   useEffect(() => {\n  47 |     loadSettings();\n> 48 |     loadActiveTimer();\n     |     ^^^^^^^^^^^^^^^ `loadActiveTimer` accessed before it is declared\n  49 |   }, []);\n  50 |\n  51 |   const loadSettings = async () => {\n\n/home/engine/project/components/PomodoroTimer.tsx:57:3\n  55 |   };\n  56 |\n> 57 |   const loadActiveTimer = async () => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |     const state = await timerService.loadActiveState();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |     setActiveState(state);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 60 |   };\n     | ^^^^^ `loadActiveTimer` is declared here\n  61 |\n  62 |   useEffect(() => {\n  63 |     const unsubscribe = timerService.subscribe((state) => {","line":48,"column":5,"nodeType":null,"endLine":48,"endColumn":20},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleTimerComplete` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/home/engine/project/components/PomodoroTimer.tsx:68:9\n  66 |       // Check if timer completed\n  67 |       if (state && state.remainingTime <= 0) {\n> 68 |         handleTimerComplete(state);\n     |         ^^^^^^^^^^^^^^^^^^^ `handleTimerComplete` accessed before it is declared\n  69 |       }\n  70 |     });\n  71 |\n\n/home/engine/project/components/PomodoroTimer.tsx:77:3\n  75 |   }, []);\n  76 |\n> 77 |   const handleTimerComplete = async (state: ActiveTimerState) => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 78 |     const session = await timerService.getSession(state.sessionId);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 79 |     if (session && state.phase === 'study') {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 80 |       // Session completed, transition to break\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 81 |       // In a real app, you might trigger a notification here\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 82 |     }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 83 |   };\n     | ^^^^^ `handleTimerComplete` is declared here\n  84 |\n  85 |   const formatTime = (seconds: number): string => {\n  86 |     const mins = Math.floor(seconds / 60);","line":68,"column":9,"nodeType":null,"endLine":68,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatTime' is assigned a value but never used.","line":85,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getProgress' is assigned a value but never used.","line":91,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleStartBreak' is assigned a value but never used.","line":115,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getPhaseText' is assigned a value but never used.","line":131,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":131,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isRunning' is assigned a value but never used.","line":138,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":138,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onStart' is defined but never used. Allowed unused args must match /^_/u.","line":277,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":277,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'settings' is defined but never used. Allowed unused args must match /^_/u.","line":383,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":383,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onDurationChange' is defined but never used. Allowed unused args must match /^_/u.","line":384,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":384,"endColumn":19}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  Platform,\n} from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { timerService, ActiveTimerState } from '@/services/TimerService';\nimport { TimerSettings, TimerPhase } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\n\ninterface PomodoroTimerProps {\n  visible: boolean;\n  onClose: () => void;\n  subject?: string;\n  chapter?: string;\n  onSessionStart?: (sessionId: string) => void;\n  onSessionComplete?: (sessionId: string, focusScore: number) => void;\n}\n\nexport default function PomodoroTimer({\n  visible,\n  onClose,\n  subject,\n  chapter,\n  onSessionStart,\n  onSessionComplete,\n}: PomodoroTimerProps) {\n  const { colors } = useTheme();\n  const [settings, setSettings] = useState<TimerSettings>({\n    studyDuration: 25,\n    breakDuration: 5,\n    soundEnabled: true,\n    hapticEnabled: true,\n    autoStartBreak: false,\n    autoStartStudy: false,\n  });\n  const [activeState, setActiveState] = useState<ActiveTimerState | null>(null);\n  const [showSettings, setShowSettings] = useState(false);\n  const [selectedDuration, setSelectedDuration] = useState(25);\n\n  useEffect(() => {\n    loadSettings();\n    loadActiveTimer();\n  }, []);\n\n  const loadSettings = async () => {\n    const loadedSettings = await timerService.loadSettings();\n    setSettings(loadedSettings);\n    setSelectedDuration(loadedSettings.studyDuration);\n  };\n\n  const loadActiveTimer = async () => {\n    const state = await timerService.loadActiveState();\n    setActiveState(state);\n  };\n\n  useEffect(() => {\n    const unsubscribe = timerService.subscribe((state) => {\n      setActiveState(state);\n      \n      // Check if timer completed\n      if (state && state.remainingTime <= 0) {\n        handleTimerComplete(state);\n      }\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  const handleTimerComplete = async (state: ActiveTimerState) => {\n    const session = await timerService.getSession(state.sessionId);\n    if (session && state.phase === 'study') {\n      // Session completed, transition to break\n      // In a real app, you might trigger a notification here\n    }\n  };\n\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getProgress = (): number => {\n    if (!activeState) return 0;\n    return ((activeState.totalDuration - activeState.remainingTime) / activeState.totalDuration) * 100;\n  };\n\n  const handleStart = async () => {\n    const sessionId = await timerService.startStudySession(selectedDuration, settings.breakDuration, subject, chapter);\n    if (onSessionStart) {\n      onSessionStart(sessionId);\n    }\n  };\n\n  const handlePause = async () => {\n    await timerService.pauseSession();\n  };\n\n  const handleResume = async () => {\n    await timerService.resumeSession();\n  };\n\n  const handleReset = async () => {\n    await timerService.resetSession();\n  };\n\n  const handleStartBreak = async () => {\n    if (!activeState) return;\n    await timerService.startBreakSession(settings.breakDuration);\n  };\n\n  const handleDurationChange = async (duration: number) => {\n    setSelectedDuration(duration);\n    await timerService.saveSettings({ studyDuration: duration });\n    setSettings((prev) => ({ ...prev, studyDuration: duration }));\n  };\n\n  const handleBreakDurationChange = async (duration: number) => {\n    await timerService.saveSettings({ breakDuration: duration });\n    setSettings((prev) => ({ ...prev, breakDuration: duration }));\n  };\n\n  const getPhaseText = (): string => {\n    if (!activeState) return 'Ready to Focus';\n    if (activeState.phase === 'study') return 'Study Phase';\n    if (activeState.phase === 'break') return 'Break Time';\n    return 'Paused';\n  };\n\n  const isRunning = activeState && activeState.phase !== 'paused';\n\n  const styles = getStyles(colors);\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      presentationStyle=\"pageSheet\"\n      onRequestClose={onClose}\n    >\n      <View style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n            <Feather name=\"x\" size={24} color={colors.text} />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Pomodoro Timer</Text>\n          <View style={styles.headerSpacer} />\n        </View>\n\n        {!activeState ? (\n          <SetupView\n            colors={colors}\n            selectedDuration={selectedDuration}\n            onDurationChange={handleDurationChange}\n            onStart={handleStart}\n            subject={subject}\n            chapter={chapter}\n          />\n        ) : activeState.phase === 'break' ? (\n          <BreakTimerView\n            colors={colors}\n            activeState={activeState}\n            settings={settings}\n            onDurationChange={handleBreakDurationChange}\n            onResume={handleResume}\n            onPause={handlePause}\n            onReset={handleReset}\n            onEndBreak={handleStart}\n          />\n        ) : (\n          <StudyTimerView\n            colors={colors}\n            activeState={activeState}\n            settings={settings}\n            onDurationChange={handleDurationChange}\n            onStart={handleStart}\n            onPause={handlePause}\n            onResume={handleResume}\n            onReset={handleReset}\n          />\n        )}\n      </View>\n    </Modal>\n  );\n}\n\ninterface SetupViewProps {\n  colors: ThemeColors;\n  selectedDuration: number;\n  onDurationChange: (duration: number) => void;\n  onStart: () => void;\n  subject?: string;\n  chapter?: string;\n}\n\nfunction SetupView({\n  colors,\n  selectedDuration,\n  onDurationChange,\n  onStart,\n  subject,\n  chapter,\n}: SetupViewProps) {\n  const styles = getStyles(colors);\n  const durations = [15, 25, 30, 45, 60];\n\n  return (\n    <View style={styles.content}>\n      {(subject || chapter) && (\n        <View style={styles.contextContainer}>\n          <Text style={styles.contextText}>\n            {subject && `üìö ${subject}`}\n            {subject && chapter && ' ‚Ä¢ '}\n            {chapter && `üìñ ${chapter}`}\n          </Text>\n        </View>\n      )}\n\n      <Text style={styles.phaseTitle}>Ready to Focus?</Text>\n      <Text style={styles.phaseSubtitle}>Choose your study duration</Text>\n\n      <View style={styles.durationContainer}>\n        {durations.map((duration) => (\n          <TouchableOpacity\n            key={duration}\n            style={[\n              styles.durationButton,\n              selectedDuration === duration && styles.durationButtonActive,\n            ]}\n            onPress={() => onDurationChange(duration)}\n            activeOpacity={0.8}\n          >\n            <Text\n              style={[\n                styles.durationButtonText,\n                selectedDuration === duration && styles.durationButtonTextActive,\n              ]}\n            >\n              {duration} min\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      <TouchableOpacity style={styles.startButton} onPress={onStart} activeOpacity={0.8}>\n        <Feather name=\"play\" size={24} color=\"#FFFFFF\" />\n        <Text style={styles.startButtonText}>Start Study Session</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\ninterface StudyTimerViewProps {\n  colors: ThemeColors;\n  activeState: ActiveTimerState;\n  settings: TimerSettings;\n  onDurationChange: (duration: number) => void;\n  onStart: () => void;\n  onPause: () => void;\n  onResume: () => void;\n  onReset: () => void;\n}\n\nfunction StudyTimerView({\n  colors,\n  activeState,\n  settings,\n  onDurationChange,\n  onStart,\n  onPause,\n  onResume,\n  onReset,\n}: StudyTimerViewProps) {\n  const styles = getStyles(colors);\n  const [showDurationSelector, setShowDurationSelector] = useState(false);\n\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const isPaused = activeState.phase === 'paused';\n\n  return (\n    <View style={styles.content}>\n      <Text style={styles.phaseTitle}>Study Phase</Text>\n      <Text style={styles.phaseSubtitle}>Stay focused and grow your tree!</Text>\n\n      <View style={styles.timerContainer}>\n        <View style={[styles.timerRing, { borderColor: colors.primary }]}>\n          <Text style={[styles.timerText, { color: colors.primary }]}>\n            {formatTime(activeState.remainingTime)}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.controlsContainer}>\n        <TouchableOpacity\n          style={[styles.controlButton, styles.secondaryButton]}\n          onPress={onReset}\n          activeOpacity={0.8}\n        >\n          <Feather name=\"rotate-ccw\" size={20} color={colors.text} />\n          <Text style={[styles.controlButtonText, { color: colors.text }]}>Reset</Text>\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={[styles.controlButton, styles.primaryButton, { backgroundColor: colors.primary }]}\n          onPress={isPaused ? onResume : onPause}\n          activeOpacity={0.8}\n        >\n          <Feather name={isPaused ? 'play' : 'pause'} size={24} color=\"#FFFFFF\" />\n          <Text style={styles.controlButtonText}>\n            {isPaused ? 'Resume' : 'Pause'}\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      {!showDurationSelector && (\n        <TouchableOpacity\n          style={styles.changeDurationButton}\n          onPress={() => setShowDurationSelector(true)}\n          activeOpacity={0.8}\n        >\n          <Text style={styles.changeDurationText}>Change duration</Text>\n        </TouchableOpacity>\n      )}\n\n      {showDurationSelector && (\n        <View style={styles.durationSelector}>\n          {[15, 25, 30, 45, 60].map((duration) => (\n            <TouchableOpacity\n              key={duration}\n              style={[\n                styles.durationOption,\n                settings.studyDuration === duration && styles.durationOptionActive,\n              ]}\n              onPress={() => {\n                onDurationChange(duration);\n                setShowDurationSelector(false);\n              }}\n              activeOpacity={0.8}\n            >\n              <Text\n                style={[\n                  styles.durationOptionText,\n                  settings.studyDuration === duration && styles.durationOptionTextActive,\n                ]}\n              >\n                {duration} min\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      )}\n    </View>\n  );\n}\n\ninterface BreakTimerViewProps {\n  colors: ThemeColors;\n  activeState: ActiveTimerState;\n  settings: TimerSettings;\n  onDurationChange: (duration: number) => void;\n  onResume: () => void;\n  onPause: () => void;\n  onReset: () => void;\n  onEndBreak: () => void;\n}\n\nfunction BreakTimerView({\n  colors,\n  activeState,\n  settings,\n  onDurationChange,\n  onResume,\n  onPause,\n  onReset,\n  onEndBreak,\n}: BreakTimerViewProps) {\n  const styles = getStyles(colors);\n\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const isPaused = activeState.phase === 'paused';\n\n  return (\n    <View style={styles.content}>\n      <Text style={styles.phaseTitle}>Break Time!</Text>\n      <Text style={styles.phaseSubtitle}>Take a well-deserved break</Text>\n\n      <View style={styles.timerContainer}>\n        <View style={[styles.timerRing, { borderColor: colors.warning }]}>\n          <Text style={[styles.timerText, { color: colors.warning }]}>\n            {formatTime(activeState.remainingTime)}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.controlsContainer}>\n        <TouchableOpacity\n          style={[styles.controlButton, styles.secondaryButton]}\n          onPress={onReset}\n          activeOpacity={0.8}\n        >\n          <Feather name=\"rotate-ccw\" size={20} color={colors.text} />\n          <Text style={[styles.controlButtonText, { color: colors.text }]}>End</Text>\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={[styles.controlButton, styles.primaryButton, { backgroundColor: colors.primary }]}\n          onPress={isPaused ? onResume : onPause}\n          activeOpacity={0.8}\n        >\n          <Feather name={isPaused ? 'play' : 'pause'} size={24} color=\"#FFFFFF\" />\n          <Text style={styles.controlButtonText}>\n            {isPaused ? 'Resume' : 'Pause'}\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      <TouchableOpacity\n        style={styles.endBreakButton}\n        onPress={onEndBreak}\n        activeOpacity={0.8}\n      >\n        <Feather name=\"arrow-right\" size={20} color={colors.primary} />\n        <Text style={styles.endBreakButtonText}>Start New Study Session</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background,\n      paddingTop: Platform.select({ ios: 50, default: 20 }),\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      paddingHorizontal: Spacing.lg,\n      paddingVertical: Spacing.md,\n    },\n    headerTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    closeButton: {\n      padding: Spacing.sm,\n    },\n    headerSpacer: {\n      width: 40,\n    },\n    content: {\n      flex: 1,\n      paddingHorizontal: Spacing.xl,\n      paddingTop: Spacing.xl,\n    },\n    contextContainer: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      marginBottom: Spacing.xl,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    contextText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textAlign: 'center',\n    },\n    phaseTitle: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      textAlign: 'center',\n      marginBottom: Spacing.sm,\n    },\n    phaseSubtitle: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginBottom: Spacing.xxl,\n    },\n    durationContainer: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      gap: Spacing.md,\n      marginBottom: Spacing.xxl,\n    },\n    durationButton: {\n      backgroundColor: colors.cardBackground,\n      paddingHorizontal: Spacing.xl,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      borderWidth: 2,\n      borderColor: colors.border,\n    },\n    durationButtonActive: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primary,\n    },\n    durationButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n    },\n    durationButtonTextActive: {\n      color: colors.white,\n    },\n    timerContainer: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginVertical: Spacing.xxl,\n    },\n    timerRing: {\n      width: 250,\n      height: 250,\n      borderRadius: 125,\n      borderWidth: 8,\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.cardBackground,\n    },\n    timerText: {\n      fontSize: 48,\n      fontWeight: FontWeights.bold,\n    },\n    controlsContainer: {\n      flexDirection: 'row',\n      justifyContent: 'center',\n      gap: Spacing.lg,\n      marginBottom: Spacing.xl,\n    },\n    controlButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.xl,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.xl,\n      gap: Spacing.sm,\n    },\n    secondaryButton: {\n      backgroundColor: colors.cardBackground,\n      borderWidth: 2,\n      borderColor: colors.border,\n    },\n    primaryButton: {\n      shadowColor: colors.primary,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.3,\n      shadowRadius: 8,\n      elevation: 4,\n    },\n    controlButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n    changeDurationButton: {\n      alignItems: 'center',\n      paddingVertical: Spacing.md,\n    },\n    changeDurationText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textDecorationLine: 'underline',\n    },\n    durationSelector: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      gap: Spacing.sm,\n      marginTop: Spacing.md,\n    },\n    durationOption: {\n      paddingHorizontal: Spacing.lg,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.md,\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    durationOptionActive: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primary,\n    },\n    durationOptionText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.medium,\n      color: colors.text,\n    },\n    durationOptionTextActive: {\n      color: colors.white,\n    },\n    startButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.primary,\n      paddingHorizontal: Spacing.xxl,\n      paddingVertical: Spacing.lg,\n      borderRadius: BorderRadius.xl,\n      gap: Spacing.md,\n      shadowColor: colors.primary,\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.3,\n      shadowRadius: 12,\n      elevation: 6,\n    },\n    startButtonText: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.white,\n    },\n    endBreakButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.cardBackground,\n      paddingHorizontal: Spacing.xl,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.xl,\n      gap: Spacing.sm,\n      borderWidth: 2,\n      borderColor: colors.primary,\n    },\n    endBreakButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.primary,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ProgressRing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/QAPhotoUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[688,691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[688,691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[898,901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[898,901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, TouchableOpacity, Text, Image, StyleSheet, Alert } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { pickImage, pickDocument, Attachment } from '@/services/FileUploadService';\nimport { Colors } from '@/constants/colors';\n\ninterface QAPhotoUploadProps {\n  onAttachment: (attachment: Attachment) => void;\n  attachment: Attachment | null;\n  onRemove: () => void;\n}\n\nexport const QAPhotoUpload: React.FC<QAPhotoUploadProps> = ({ onAttachment, attachment, onRemove }) => {\n  const handlePickImage = async () => {\n    try {\n      const result = await pickImage(false);\n      if (result) onAttachment(result);\n    } catch (e: any) {\n      Alert.alert('Error', e.message);\n    }\n  };\n\n  const handlePickDocument = async () => {\n    try {\n      const result = await pickDocument();\n      if (result) onAttachment(result);\n    } catch (e: any) {\n      Alert.alert('Error', e.message);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {attachment ? (\n        <View style={styles.attachmentPreview}>\n          {attachment.type === 'image' ? (\n            <Image source={{ uri: attachment.uri }} style={styles.previewImage} />\n          ) : (\n            <View style={styles.fileIcon}>\n              <Ionicons name=\"document-text\" size={40} color={Colors.light.primary} />\n              <Text style={styles.fileName} numberOfLines={1}>{attachment.name}</Text>\n            </View>\n          )}\n          <TouchableOpacity style={styles.removeBtn} onPress={onRemove}>\n            <Ionicons name=\"close-circle\" size={24} color={Colors.light.error} />\n          </TouchableOpacity>\n        </View>\n      ) : (\n        <View style={styles.buttonsRow}>\n          <TouchableOpacity style={styles.uploadBtn} onPress={handlePickImage}>\n            <Ionicons name=\"image-outline\" size={24} color={Colors.light.primary} />\n            <Text style={styles.uploadText}>Add Image</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.uploadBtn} onPress={handlePickDocument}>\n            <Ionicons name=\"document-outline\" size={24} color={Colors.light.primary} />\n            <Text style={styles.uploadText}>Add File</Text>\n          </TouchableOpacity>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: 10,\n  },\n  buttonsRow: {\n    flexDirection: 'row',\n    gap: 10,\n  },\n  uploadBtn: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 12,\n    borderWidth: 1,\n    borderColor: Colors.light.primary,\n    borderStyle: 'dashed',\n    borderRadius: 8,\n    gap: 8,\n  },\n  uploadText: {\n    color: Colors.light.primary,\n    fontWeight: '600',\n  },\n  attachmentPreview: {\n    position: 'relative',\n    height: 150,\n    width: '100%',\n    borderRadius: 8,\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  previewImage: {\n    width: '100%',\n    height: '100%',\n  },\n  fileIcon: {\n    alignItems: 'center',\n  },\n  fileName: {\n    marginTop: 4,\n    paddingHorizontal: 20,\n    fontSize: 12,\n  },\n  removeBtn: {\n    position: 'absolute',\n    top: 5,\n    right: 5,\n    backgroundColor: 'white',\n    borderRadius: 12,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/QuestionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[659,662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[659,662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { TouchableOpacity, View, Text, StyleSheet } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Question } from '@/types/qa';\nimport { Colors } from '@/constants/colors';\nimport { useUserStore } from '@/store/userStore';\n\ninterface QuestionCardProps {\n  question: Question;\n  onPress: () => void;\n  showFavorite?: boolean;\n}\n\nexport const QuestionCard: React.FC<QuestionCardProps> = ({ \n  question, \n  onPress,\n  showFavorite = true,\n}) => {\n  const { isFavorite, addToFavorites, removeFromFavorites } = useUserStore();\n  const favorite = isFavorite(question.id);\n\n  const handleFavoritePress = (e: any) => {\n    e.stopPropagation();\n    if (favorite) {\n      removeFromFavorites(question.id);\n    } else {\n      addToFavorites(question.id);\n    }\n  };\n\n  const getDifficultyColor = () => {\n    switch (question.difficulty) {\n      case 'easy': return Colors.light.success;\n      case 'medium': return Colors.light.warning;\n      case 'hard': return Colors.light.error;\n      default: return Colors.light.textSecondary;\n    }\n  };\n\n  return (\n    <TouchableOpacity style={styles.card} onPress={onPress}>\n      <View style={styles.header}>\n        <View style={[styles.badge, { backgroundColor: getDifficultyColor() + '20' }]}>\n          <Text style={[styles.badgeText, { color: getDifficultyColor() }]}>\n            {question.difficulty.toUpperCase()}\n          </Text>\n        </View>\n        <Text style={styles.subjectText}>{question.subject} ‚Ä¢ {question.topic}</Text>\n        {showFavorite && (\n          <TouchableOpacity \n            style={styles.favoriteBtn} \n            onPress={handleFavoritePress}\n          >\n            <Ionicons \n              name={favorite ? 'bookmark' : 'bookmark-outline'} \n              size={20} \n              color={favorite ? Colors.light.primary : Colors.light.textSecondary} \n            />\n          </TouchableOpacity>\n        )}\n      </View>\n      \n      <Text style={styles.title} numberOfLines={2}>{question.title}</Text>\n      \n      <View style={styles.footer}>\n        <View style={styles.stat}>\n          <Ionicons name=\"chatbubble-outline\" size={16} color={Colors.light.textSecondary} />\n          <Text style={styles.statText}>{question.answerCount || 0} answers</Text>\n        </View>\n        <View style={styles.stat}>\n          <Ionicons name=\"eye-outline\" size={16} color={Colors.light.textSecondary} />\n          <Text style={styles.statText}>{question.viewCount || 0} views</Text>\n        </View>\n        <Text style={styles.timeText}>{new Date(question.createdAt).toLocaleDateString()}</Text>\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: Colors.light.cardBackground,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n    gap: 8,\n  },\n  badge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  badgeText: {\n    fontSize: 10,\n    fontWeight: '700',\n  },\n  subjectText: {\n    fontSize: 12,\n    color: Colors.light.textSecondary,\n    fontWeight: '500',\n    flex: 1,\n  },\n  favoriteBtn: {\n    padding: 4,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: Colors.light.text,\n    marginBottom: 12,\n    lineHeight: 22,\n  },\n  footer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  stat: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  statText: {\n    fontSize: 12,\n    color: Colors.light.textSecondary,\n  },\n  timeText: {\n    marginLeft: 'auto',\n    fontSize: 12,\n    color: Colors.light.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/QuestionFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":243,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7793,7796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7793,7796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Colors } from '@/constants/colors';\nimport { QuestionDifficulty, QuestionStatus } from '@/services/QASearchService';\n\ninterface QuestionFiltersProps {\n  difficulties?: QuestionDifficulty[];\n  status?: QuestionStatus[];\n  subject?: string;\n  topic?: string;\n  subjects?: string[];\n  topics?: string[];\n  onFiltersChange: (filters: FilterState) => void;\n  onClear: () => void;\n}\n\nexport interface FilterState {\n  difficulties: QuestionDifficulty[];\n  status: QuestionStatus[];\n  subject: string;\n  topic: string;\n}\n\nconst DIFFICULTY_OPTIONS: { value: QuestionDifficulty; label: string; color: string }[] = [\n  { value: 'easy', label: 'Easy', color: Colors.light.success },\n  { value: 'medium', label: 'Medium', color: Colors.light.warning },\n  { value: 'hard', label: 'Hard', color: Colors.light.error },\n];\n\nconst STATUS_OPTIONS: { value: QuestionStatus; label: string; icon: string }[] = [\n  { value: 'unanswered', label: 'Unanswered', icon: 'chatbubble-outline' },\n  { value: 'answered', label: 'Answered', icon: 'checkmark-circle-outline' },\n  { value: 'solved', label: 'Solved', icon: 'checkmark-done-outline' },\n];\n\nexport const QuestionFilters: React.FC<QuestionFiltersProps> = ({\n  difficulties: initialDifficulties = [],\n  status: initialStatus = [],\n  subject: initialSubject = '',\n  topic: initialTopic = '',\n  subjects = [],\n  topics = [],\n  onFiltersChange,\n  onClear,\n}) => {\n  const [filters, setFilters] = useState<FilterState>({\n    difficulties: initialDifficulties,\n    status: initialStatus,\n    subject: initialSubject,\n    topic: initialTopic,\n  });\n\n  const [expandedSections, setExpandedSections] = useState({\n    difficulty: true,\n    status: true,\n    subject: false,\n    topic: false,\n  });\n\n  const hasActiveFilters = \n    filters.difficulties.length > 0 ||\n    filters.status.length > 0 ||\n    filters.subject.length > 0 ||\n    filters.topic.length > 0;\n\n  const toggleDifficulty = (difficulty: QuestionDifficulty) => {\n    const newDifficulties = filters.difficulties.includes(difficulty)\n      ? filters.difficulties.filter(d => d !== difficulty)\n      : [...filters.difficulties, difficulty];\n    \n    const newFilters = { ...filters, difficulties: newDifficulties };\n    setFilters(newFilters);\n    onFiltersChange(newFilters);\n  };\n\n  const toggleStatus = (status: QuestionStatus) => {\n    const newStatus = filters.status.includes(status)\n      ? filters.status.filter(s => s !== status)\n      : [...filters.status, status];\n    \n    const newFilters = { ...filters, status: newStatus };\n    setFilters(newFilters);\n    onFiltersChange(newFilters);\n  };\n\n  const toggleSection = (section: keyof typeof expandedSections) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [section]: !prev[section],\n    }));\n  };\n\n  const handleSubjectChange = (subject: string) => {\n    const newFilters = { ...filters, subject, topic: '' };\n    setFilters(newFilters);\n    onFiltersChange(newFilters);\n  };\n\n  const handleTopicChange = (topic: string) => {\n    const newFilters = { ...filters, topic };\n    setFilters(newFilters);\n    onFiltersChange(newFilters);\n  };\n\n  const handleClear = () => {\n    const clearedFilters: FilterState = {\n      difficulties: [],\n      status: [],\n      subject: '',\n      topic: '',\n    };\n    setFilters(clearedFilters);\n    onClear();\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* Filter Header */}\n      <View style={styles.header}>\n        <Text style={styles.title}>Filters</Text>\n        {hasActiveFilters && (\n          <TouchableOpacity style={styles.clearButton} onPress={handleClear}>\n            <Text style={styles.clearText}>Clear All</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n\n      {/* Active Filter Tags */}\n      {hasActiveFilters && (\n        <ScrollView \n          horizontal \n          showsHorizontalScrollIndicator={false}\n          style={styles.activeTagsContainer}\n        >\n          {filters.difficulties.map(d => (\n            <TouchableOpacity\n              key={d}\n              style={[styles.filterTag, { borderColor: getDifficultyColor(d) }]}\n              onPress={() => toggleDifficulty(d)}\n            >\n              <Text style={[styles.filterTagText, { color: getDifficultyColor(d) }]}>\n                {d}\n              </Text>\n              <Ionicons name=\"close\" size={12} color={getDifficultyColor(d)} />\n            </TouchableOpacity>\n          ))}\n          {filters.status.map(s => (\n            <TouchableOpacity\n              key={s}\n              style={[styles.filterTag, { borderColor: Colors.light.primary }]}\n              onPress={() => toggleStatus(s)}\n            >\n              <Text style={[styles.filterTagText, { color: Colors.light.primary }]}>\n                {s}\n              </Text>\n              <Ionicons name=\"close\" size={12} color={Colors.light.primary} />\n            </TouchableOpacity>\n          ))}\n          {filters.subject && (\n            <TouchableOpacity\n              style={[styles.filterTag, { borderColor: Colors.light.primary }]}\n              onPress={() => handleSubjectChange('')}\n            >\n              <Text style={[styles.filterTagText, { color: Colors.light.primary }]}>\n                {filters.subject}\n              </Text>\n              <Ionicons name=\"close\" size={12} color={Colors.light.primary} />\n            </TouchableOpacity>\n          )}\n          {filters.topic && (\n            <TouchableOpacity\n              style={[styles.filterTag, { borderColor: Colors.light.primary }]}\n              onPress={() => handleTopicChange('')}\n            >\n              <Text style={[styles.filterTagText, { color: Colors.light.primary }]}>\n                {filters.topic}\n              </Text>\n              <Ionicons name=\"close\" size={12} color={Colors.light.primary} />\n            </TouchableOpacity>\n          )}\n        </ScrollView>\n      )}\n\n      {/* Difficulty Section */}\n      <FilterSection\n        title=\"Difficulty\"\n        isExpanded={expandedSections.difficulty}\n        onToggle={() => toggleSection('difficulty')}\n      >\n        <View style={styles.chipContainer}>\n          {DIFFICULTY_OPTIONS.map(option => (\n            <TouchableOpacity\n              key={option.value}\n              style={[\n                styles.chip,\n                filters.difficulties.includes(option.value) && {\n                  backgroundColor: option.color + '20',\n                  borderColor: option.color,\n                },\n              ]}\n              onPress={() => toggleDifficulty(option.value)}\n            >\n              <Text\n                style={[\n                  styles.chipText,\n                  filters.difficulties.includes(option.value) && { color: option.color },\n                ]}\n              >\n                {option.label}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      </FilterSection>\n\n      {/* Status Section */}\n      <FilterSection\n        title=\"Status\"\n        isExpanded={expandedSections.status}\n        onToggle={() => toggleSection('status')}\n      >\n        <View style={styles.chipContainer}>\n          {STATUS_OPTIONS.map(option => (\n            <TouchableOpacity\n              key={option.value}\n              style={[\n                styles.chip,\n                filters.status.includes(option.value) && {\n                  backgroundColor: Colors.light.primary + '20',\n                  borderColor: Colors.light.primary,\n                },\n              ]}\n              onPress={() => toggleStatus(option.value)}\n            >\n              <Ionicons\n                name={option.icon as any}\n                size={16}\n                color={filters.status.includes(option.value) ? Colors.light.primary : Colors.light.textSecondary}\n              />\n              <Text\n                style={[\n                  styles.chipText,\n                  filters.status.includes(option.value) && { color: Colors.light.primary },\n                ]}\n              >\n                {option.label}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      </FilterSection>\n\n      {/* Subject Section */}\n      <FilterSection\n        title=\"Subject\"\n        isExpanded={expandedSections.subject}\n        onToggle={() => toggleSection('subject')}\n      >\n        {subjects.length > 0 ? (\n          <View style={styles.chipContainer}>\n            {subjects.map(subject => (\n              <TouchableOpacity\n                key={subject}\n                style={[\n                  styles.chip,\n                  filters.subject === subject && {\n                    backgroundColor: Colors.light.primary + '20',\n                    borderColor: Colors.light.primary,\n                  },\n                ]}\n                onPress={() => handleSubjectChange(\n                  filters.subject === subject ? '' : subject\n                )}\n              >\n                <Text\n                  style={[\n                    styles.chipText,\n                    filters.subject === subject && { color: Colors.light.primary },\n                  ]}\n                >\n                  {subject}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n        ) : (\n          <Text style={styles.noOptions}>No subjects available</Text>\n        )}\n      </FilterSection>\n\n      {/* Topic Section (only shown when subject is selected) */}\n      {filters.subject && (\n        <FilterSection\n          title=\"Topic\"\n          isExpanded={expandedSections.topic}\n          onToggle={() => toggleSection('topic')}\n        >\n          {topics.length > 0 ? (\n            <View style={styles.chipContainer}>\n              {topics.map(topic => (\n                <TouchableOpacity\n                  key={topic}\n                  style={[\n                    styles.chip,\n                    filters.topic === topic && {\n                      backgroundColor: Colors.light.primary + '20',\n                      borderColor: Colors.light.primary,\n                    },\n                  ]}\n                  onPress={() => handleTopicChange(\n                    filters.topic === topic ? '' : topic\n                  )}\n                >\n                  <Text\n                    style={[\n                      styles.chipText,\n                      filters.topic === topic && { color: Colors.light.primary },\n                    ]}\n                  >\n                    {topic}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n          ) : (\n            <Text style={styles.noOptions}>No topics available for this subject</Text>\n          )}\n        </FilterSection>\n      )}\n    </View>\n  );\n};\n\ninterface FilterSectionProps {\n  title: string;\n  isExpanded: boolean;\n  onToggle: () => void;\n  children: React.ReactNode;\n}\n\nconst FilterSection: React.FC<FilterSectionProps> = ({\n  title,\n  isExpanded,\n  onToggle,\n  children,\n}) => (\n  <View style={styles.section}>\n    <TouchableOpacity style={styles.sectionHeader} onPress={onToggle}>\n      <Text style={styles.sectionTitle}>{title}</Text>\n      <Ionicons\n        name={isExpanded ? 'chevron-up' : 'chevron-down'}\n        size={20}\n        color={Colors.light.textSecondary}\n      />\n    </TouchableOpacity>\n    {isExpanded && <View style={styles.sectionContent}>{children}</View>}\n  </View>\n);\n\nconst getDifficultyColor = (difficulty: QuestionDifficulty): string => {\n  switch (difficulty) {\n    case 'easy': return Colors.light.success;\n    case 'medium': return Colors.light.warning;\n    case 'hard': return Colors.light.error;\n    default: return Colors.light.textSecondary;\n  }\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: Colors.light.cardBackground,\n    borderRadius: 12,\n    marginHorizontal: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: Colors.light.border,\n    overflow: 'hidden',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.light.border,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: Colors.light.text,\n  },\n  clearButton: {\n    padding: 4,\n  },\n  clearText: {\n    fontSize: 14,\n    color: Colors.light.error,\n    fontWeight: '500',\n  },\n  activeTagsContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.light.border,\n  },\n  filterTag: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: Colors.light.background,\n    borderWidth: 1,\n    borderRadius: 16,\n    paddingHorizontal: 10,\n    paddingVertical: 4,\n    marginRight: 8,\n    gap: 4,\n  },\n  filterTagText: {\n    fontSize: 12,\n    fontWeight: '600',\n    textTransform: 'capitalize',\n  },\n  section: {\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.light.border,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  sectionTitle: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: Colors.light.textSecondary,\n  },\n  sectionContent: {\n    paddingHorizontal: 16,\n    paddingBottom: 12,\n  },\n  chipContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  chip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: Colors.light.background,\n    borderWidth: 1,\n    borderColor: Colors.light.border,\n    borderRadius: 20,\n    paddingHorizontal: 14,\n    paddingVertical: 8,\n    gap: 6,\n  },\n  chipText: {\n    fontSize: 14,\n    color: Colors.light.textSecondary,\n    fontWeight: '500',\n  },\n  noOptions: {\n    fontSize: 14,\n    color: Colors.light.textSecondary,\n    fontStyle: 'italic',\n  },\n});\n\nexport default QuestionFilters;\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/QuizCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onPrevious' is defined but never used. Allowed unused args must match /^_/u.","line":40,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused args must match /^_/u.","line":238,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":238,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Dimensions,\n  GestureResponderEvent,\n} from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport { runOnJS } from 'react-native-reanimated';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { QuizQuestion, useQuizStore, useQuizProgress, useIsQuestionAnswered } from '@/store/quizStore';\nimport { sanitizeTextForDisplay } from '@/utils/sanitizer';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst SWIPE_THRESHOLD = SCREEN_WIDTH * 0.3;\n\ninterface QuizCardProps {\n  question: QuizQuestion;\n  questionNumber: number;\n  totalQuestions: number;\n  onNext?: () => void;\n  onPrevious?: () => void;\n}\n\ninterface OptionStyle {\n  backgroundColor: string;\n  borderColor: string;\n  textColor: string;\n}\n\nexport default function QuizCard({\n  question,\n  questionNumber,\n  totalQuestions,\n  onNext,\n  onPrevious,\n}: QuizCardProps) {\n  const { colors, isDark } = useTheme();\n  const { selectAnswer, selectedAnswers } = useQuizStore();\n  const { isLastQuestion } = useQuizProgress();\n  const isAnswered = useIsQuestionAnswered(questionNumber - 1);\n\n  const safeQuestionText = useMemo(\n    () => sanitizeTextForDisplay(question.question, { maxLength: 500 }),\n    [question.question]\n  );\n\n  const safeOptions = useMemo(\n    () => question.options.map((opt) => sanitizeTextForDisplay(opt, { maxLength: 200 })),\n    [question.options]\n  );\n\n  const safeExplanationText = useMemo(\n    () => sanitizeTextForDisplay(question.explanation, { maxLength: 800 }),\n    [question.explanation]\n  );\n  \n  const [animationState] = useState({\n    scale: new Animated.Value(1),\n    translateX: new Animated.Value(0),\n    opacity: new Animated.Value(1),\n    feedbackOpacity: new Animated.Value(0),\n  });\n\n  const handleOptionPress = useCallback(\n    (optionIndex: number) => {\n      if (isAnswered) return;\n\n      // Animate button press\n      Animated.sequence([\n        Animated.timing(animationState.scale, {\n          toValue: 0.95,\n          duration: 100,\n          useNativeDriver: true,\n        }),\n        Animated.timing(animationState.scale, {\n          toValue: 1,\n          duration: 100,\n          useNativeDriver: true,\n        }),\n      ]).start();\n\n      // Select answer\n      selectAnswer(questionNumber - 1, optionIndex);\n\n      // Show feedback animation\n      Animated.sequence([\n        Animated.timing(animationState.feedbackOpacity, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n        Animated.delay(2000),\n        Animated.timing(animationState.feedbackOpacity, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    },\n    [isAnswered, questionNumber, selectAnswer, animationState]\n  );\n\n  const handleSwipeLeft = useCallback(() => {\n    if (!isLastQuestion && isAnswered) {\n      runOnJS(onNext ?? (() => {}))();\n    }\n  }, [isLastQuestion, isAnswered, onNext]);\n\n  const gesture = Gesture.Pan()\n    .onUpdate((event) => {\n      if (!isAnswered) return;\n      \n      const { translationX } = event;\n      animationState.translateX.setValue(translationX);\n      \n      // Calculate swipe progress\n      const progress = Math.min(Math.abs(translationX) / SWIPE_THRESHOLD, 1);\n      animationState.opacity.setValue(1 - progress * 0.3);\n    })\n    .onEnd((event) => {\n      if (!isAnswered) {\n        animationState.translateX.setValue(0);\n        animationState.opacity.setValue(1);\n        return;\n      }\n\n      const { translationX } = event;\n      \n      if (translationX < -SWIPE_THRESHOLD && !isLastQuestion) {\n        Animated.timing(animationState.translateX, {\n          toValue: -SCREEN_WIDTH,\n          duration: 200,\n          useNativeDriver: true,\n        }).start(() => {\n          animationState.translateX.setValue(0);\n          animationState.opacity.setValue(1);\n          runOnJS(handleSwipeLeft)();\n        });\n      } else {\n        Animated.parallel([\n          Animated.spring(animationState.translateX, {\n            toValue: 0,\n            useNativeDriver: true,\n          }),\n          Animated.spring(animationState.opacity, {\n            toValue: 1,\n            useNativeDriver: true,\n          }),\n        ]).start();\n      }\n    });\n\n  const getOptionStyle = (index: number): OptionStyle => {\n    const isSelected = selectedAnswers[questionNumber - 1] === index;\n    const isCorrect = question.correctAnswer === index;\n    const showFeedback = isAnswered;\n\n    let backgroundColor = colors.cardBackground;\n    let borderColor = colors.lightGray;\n    let textColor = colors.text;\n\n    if (showFeedback) {\n      if (isCorrect) {\n        backgroundColor = isDark ? '#1E3D2A' : '#E8F5E9';\n        borderColor = colors.primary;\n        textColor = isDark ? '#A8D5BA' : '#2E7D32';\n      } else if (isSelected && !isCorrect) {\n        backgroundColor = isDark ? '#3D1E1E' : '#FFEBEE';\n        borderColor = '#E07856';\n        textColor = isDark ? '#F5A5A5' : '#C62828';\n      }\n    } else if (isSelected) {\n      backgroundColor = isDark ? '#2A3D2A' : '#F5F1E8';\n      borderColor = colors.primary;\n      textColor = colors.primary;\n    }\n\n    return { backgroundColor, borderColor, textColor };\n  };\n\n  const styles = getStyles(colors, isDark);\n\n  return (\n    <GestureDetector gesture={gesture}>\n      <Animated.View\n        style={[\n          styles.card,\n          {\n            transform: [\n              { translateX: animationState.translateX },\n              { scale: animationState.scale },\n            ],\n            opacity: animationState.opacity,\n          },\n        ]}\n      >\n        {/* Progress Bar */}\n        <View style={styles.progressContainer}>\n          <View style={styles.progressBackground}>\n            <Animated.View\n              style={[\n                styles.progressFill,\n                {\n                  width: `${(questionNumber / totalQuestions) * 100}%`,\n                },\n              ]}\n            />\n          </View>\n          <Text style={styles.progressText}>\n            Question {questionNumber} of {totalQuestions}\n          </Text>\n        </View>\n\n        {/* Question */}\n        <View style={styles.questionContainer}>\n          <Text style={styles.questionText}>{safeQuestionText}</Text>\n        </View>\n\n        {/* Options */}\n        <View style={styles.optionsContainer}>\n          {safeOptions.map((option, index) => {\n            const optionStyle = getOptionStyle(index);\n            return (\n              <TouchableOpacity\n                key={index}\n                style={[\n                  styles.optionButton,\n                  {\n                    backgroundColor: optionStyle.backgroundColor,\n                    borderColor: optionStyle.borderColor,\n                  },\n                ]}\n                onPress={(e: GestureResponderEvent) => handleOptionPress(index)}\n                disabled={isAnswered}\n                activeOpacity={isAnswered ? 1 : 0.8}\n              >\n                <View\n                  style={[\n                    styles.optionIndicator,\n                    {\n                      backgroundColor: optionStyle.backgroundColor,\n                      borderColor: optionStyle.borderColor,\n                    },\n                  ]}\n                >\n                  <Text\n                    style={[\n                      styles.optionLetter,\n                      { color: isAnswered && question.correctAnswer === index ? colors.primary : colors.textSecondary },\n                    ]}\n                  >\n                    {String.fromCharCode(65 + index)}\n                  </Text>\n                </View>\n                <Text style={[styles.optionText, { color: optionStyle.textColor }]}>\n                  {option}\n                </Text>\n                {isAnswered && question.correctAnswer === index && (\n                  <Text style={styles.correctIcon}>‚úì</Text>\n                )}\n                {isAnswered && selectedAnswers[questionNumber - 1] === index && question.correctAnswer !== index && (\n                  <Text style={styles.wrongIcon}>‚úó</Text>\n                )}\n              </TouchableOpacity>\n            );\n          })}\n        </View>\n\n        {/* Feedback/Explanation */}\n        {isAnswered && (\n          <Animated.View\n            style={[\n              styles.explanationContainer,\n              {\n                backgroundColor: isDark ? '#2A2A2A' : '#FFFFFF',\n                opacity: animationState.feedbackOpacity,\n              },\n            ]}\n          >\n            <Text style={styles.explanationTitle}>\n              {selectedAnswers[questionNumber - 1] === question.correctAnswer\n                ? '‚úì Correct!'\n                : '‚úó Not quite right'}\n            </Text>\n            <Text style={styles.explanationText}>{safeExplanationText}</Text>\n          </Animated.View>\n        )}\n\n        {/* Swipe hint */}\n        {isAnswered && !isLastQuestion && (\n          <View style={styles.swipeHint}>\n            <Text style={styles.swipeHintText}>‚Üê Swipe left for next question</Text>\n          </View>\n        )}\n      </Animated.View>\n    </GestureDetector>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) =>\n  StyleSheet.create({\n    card: {\n      flex: 1,\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.xl,\n      padding: Spacing.xl,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.1,\n      shadowRadius: 12,\n      elevation: 5,\n    },\n    progressContainer: {\n      marginBottom: Spacing.lg,\n    },\n    progressBackground: {\n      height: 8,\n      backgroundColor: colors.lightGray,\n      borderRadius: 4,\n      overflow: 'hidden',\n    },\n    progressFill: {\n      height: '100%',\n      backgroundColor: colors.primary,\n      borderRadius: 4,\n    },\n    progressText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginTop: Spacing.xs,\n      textAlign: 'center',\n    },\n    questionContainer: {\n      marginBottom: Spacing.xl,\n    },\n    questionText: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.semibold,\n      color: isDark ? colors.text : colors.charcoal,\n      lineHeight: FontSizes.lg * 1.4,\n    },\n    optionsContainer: {\n      flex: 1,\n    },\n    optionButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      borderWidth: 2,\n      marginBottom: Spacing.md,\n      minHeight: 56,\n    },\n    optionIndicator: {\n      width: 32,\n      height: 32,\n      borderRadius: 16,\n      borderWidth: 2,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    optionLetter: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.bold,\n    },\n    optionText: {\n      flex: 1,\n      fontSize: FontSizes.md,\n      lineHeight: FontSizes.md * 1.4,\n    },\n    correctIcon: {\n      fontSize: FontSizes.lg,\n      color: colors.primary,\n      marginLeft: Spacing.sm,\n    },\n    wrongIcon: {\n      fontSize: FontSizes.lg,\n      color: '#E07856',\n      marginLeft: Spacing.sm,\n    },\n    explanationContainer: {\n      marginTop: Spacing.md,\n      padding: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      borderLeftWidth: 4,\n      borderLeftColor: colors.primary,\n    },\n    explanationTitle: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.primary,\n      marginBottom: Spacing.sm,\n    },\n    explanationText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      lineHeight: FontSizes.sm * 1.5,\n    },\n    swipeHint: {\n      alignItems: 'center',\n      marginTop: Spacing.md,\n      padding: Spacing.sm,\n    },\n    swipeHintText: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      opacity: 0.7,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/QuizModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FontSizes' is defined but never used.","line":12,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FontWeights' is defined but never used.","line":12,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Modal,\n  TouchableWithoutFeedback,\n  Animated,\n  Dimensions,\n  TouchableOpacity,\n} from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { useQuizStore } from '@/store/quizStore';\nimport { useUserStore } from '@/store/userStore';\nimport { generateQuizQuestions } from '@/services/quizGenerator';\nimport { checkNetworkConnectivity } from '@/services/networkService';\nimport { ContentValidator } from '@/services/ContentValidator';\nimport QuizCard from './QuizCard';\nimport QuizResultsScreen from './QuizResultsScreen';\nimport { QuestionSkeleton } from './SkeletonLoader';\nimport NoConnectionScreen from './NoConnectionScreen';\nimport { Feather } from '@expo/vector-icons';\nimport AdContainer from './AdContainer';\nimport { AD_UNIT_IDS } from '@/config/adConfig';\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst MODAL_HEIGHT = SCREEN_HEIGHT * 0.85;\n\ninterface QuizModalProps {\n  visible: boolean;\n  onClose: () => void;\n  className: string;\n  subject: string;\n  chapter: string;\n}\n\nexport default function QuizModal({\n  visible,\n  onClose,\n  className,\n  subject,\n  chapter,\n}: QuizModalProps) {\n  const { colors } = useTheme();\n  const ageGroup = useUserStore((s) => s.ageGroup) ?? 'under12';\n  const {\n    questions,\n    isQuizActive,\n    isLoading,\n    error,\n    currentQuestionIndex,\n    resetQuiz,\n    setQuestions,\n    setLoading,\n    setError,\n  } = useQuizStore();\n  const [isConnected, setIsConnected] = useState(true);\n  const [slideAnim] = useState(new Animated.Value(MODAL_HEIGHT));\n\n  useEffect(() => {\n    if (visible) {\n      Animated.spring(slideAnim, {\n        toValue: 0,\n        useNativeDriver: true,\n        friction: 8,\n        tension: 40,\n      }).start();\n    } else {\n      Animated.timing(slideAnim, {\n        toValue: MODAL_HEIGHT,\n        duration: 250,\n        useNativeDriver: true,\n      }).start();\n    }\n  }, [visible, slideAnim]);\n\n  const handleLoadQuiz = useCallback(async () => {\n    const connected = await checkNetworkConnectivity();\n    setIsConnected(connected);\n\n    if (!connected) return;\n\n    setLoading(true);\n    try {\n      const quizQuestions = await generateQuizQuestions(className, subject, chapter);\n\n      const safeQuestions = await ContentValidator.validateQuizQuestions(quizQuestions, {\n        contentId: `quiz:${className}:${subject}:${chapter}`,\n        ageGroup,\n        source: 'QuizModal',\n      });\n\n      if (safeQuestions.length === 0) {\n        throw new Error('Quiz content is unavailable right now.');\n      }\n\n      setQuestions(safeQuestions);\n    } catch (err) {\n      console.error('Failed to load quiz:', err);\n      setError(err instanceof Error ? err.message : 'Failed to load quiz');\n    } finally {\n      setLoading(false);\n    }\n  }, [className, subject, chapter, ageGroup, setQuestions, setLoading, setError]);\n\n  useEffect(() => {\n    if (visible && questions.length === 0 && !error) {\n      handleLoadQuiz();\n    }\n  }, [visible, questions.length, error, handleLoadQuiz]);\n\n  const handleClose = useCallback(() => {\n    Animated.timing(slideAnim, {\n      toValue: MODAL_HEIGHT,\n      duration: 250,\n      useNativeDriver: true,\n    }).start(() => {\n      resetQuiz();\n      onClose();\n    });\n  }, [slideAnim, resetQuiz, onClose]);\n\n  const handleRetry = useCallback(() => {\n    setError(null);\n    handleLoadQuiz();\n  }, [handleLoadQuiz, setError]);\n\n  const handleNext = useCallback(() => {\n    const { nextQuestion } = useQuizStore.getState();\n    nextQuestion();\n  }, []);\n\n  const handlePrevious = useCallback(() => {\n    const { previousQuestion } = useQuizStore.getState();\n    previousQuestion();\n  }, []);\n\n  const handleBackToLesson = useCallback(() => {\n    handleClose();\n  }, [handleClose]);\n\n  const currentQuestion = questions[currentQuestionIndex];\n\n  const styles = getStyles(colors);\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"none\"\n      onRequestClose={handleClose}\n    >\n      <TouchableWithoutFeedback onPress={handleClose}>\n        <View style={styles.overlay}>\n          <TouchableWithoutFeedback>\n            <Animated.View\n              style={[\n                styles.modalContainer,\n                {\n                  transform: [{ translateY: slideAnim }],\n                },\n              ]}\n            >\n              {/* Header */}\n              <View style={styles.header}>\n                <View style={styles.headerContent}>\n                  <View style={styles.chip}>\n                    <Feather name=\"book-open\" size={14} color=\"#FFFFFF\" />\n                    <Text style={styles.chipText}>{subject}</Text>\n                  </View>\n                  <Text style={styles.chapterTitle}>{chapter}</Text>\n                </View>\n                <TouchableOpacity\n                  style={styles.closeButton}\n                  onPress={handleClose}\n                  activeOpacity={0.7}\n                >\n                  <Feather name=\"x\" size={24} color={colors.textSecondary} />\n                </TouchableOpacity>\n              </View>\n\n              {/* Content */}\n              <View style={styles.content}>\n                {!isConnected ? (\n                  <NoConnectionScreen\n                    onRetry={handleRetry}\n                    message=\"Check your internet connection to load quiz questions.\"\n                  />\n                ) : isLoading ? (\n                  <View style={styles.loadingContainer}>\n                    <QuestionSkeleton />\n                    <QuestionSkeleton />\n                    <QuestionSkeleton />\n                  </View>\n                ) : error ? (\n                  <View style={styles.errorContainer}>\n                    <Feather\n                      name=\"alert-triangle\"\n                      size={48}\n                      color={colors.error}\n                    />\n                    <Text style={styles.errorTitle}>Unable to Load Quiz</Text>\n                    <Text style={styles.errorMessage}>{error}</Text>\n                    <TouchableOpacity\n                      style={styles.retryButton}\n                      onPress={handleRetry}\n                      activeOpacity={0.8}\n                    >\n                      <Feather name=\"refresh-cw\" size={20} color=\"#FFFFFF\" />\n                      <Text style={styles.retryButtonText}>Try Again</Text>\n                    </TouchableOpacity>\n                  </View>\n                ) : questions.length > 0 && isQuizActive && currentQuestion ? (\n                  <QuizCard\n                    question={currentQuestion}\n                    questionNumber={currentQuestionIndex + 1}\n                    totalQuestions={questions.length}\n                    onNext={handleNext}\n                    onPrevious={handlePrevious}\n                  />\n                ) : questions.length > 0 && !isQuizActive ? (\n                  <>\n                    <QuizResultsScreen\n                      onRetry={handleRetry}\n                      onBackToLesson={handleBackToLesson}\n                    />\n                    <AdContainer unitId={AD_UNIT_IDS.BANNER_QUIZ} />\n                  </>\n                ) : null}\n              </View>\n            </Animated.View>\n          </TouchableWithoutFeedback>\n        </View>\n      </TouchableWithoutFeedback>\n    </Modal>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    overlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      justifyContent: 'flex-end',\n    },\n    modalContainer: {\n      height: MODAL_HEIGHT,\n      backgroundColor: colors.background,\n      borderTopLeftRadius: BorderRadius.xl,\n      borderTopRightRadius: BorderRadius.xl,\n      overflow: 'hidden',\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: -4 },\n      shadowOpacity: 0.15,\n      shadowRadius: 16,\n      elevation: 10,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'flex-start',\n      justifyContent: 'space-between',\n      padding: Spacing.lg,\n      borderBottomWidth: 1,\n      borderBottomColor: colors.lightGray,\n    },\n    headerContent: {\n      flex: 1,\n    },\n    chip: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.primary,\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.xs,\n      borderRadius: 20,\n      alignSelf: 'flex-start',\n      marginBottom: Spacing.sm,\n    },\n    chipText: {\n      fontSize: 12,\n      fontWeight: '500' as const,\n      color: '#FFFFFF',\n      marginLeft: 4,\n    },\n    chapterTitle: {\n      fontSize: 20,\n      fontWeight: '600' as const,\n      color: colors.text,\n    },\n    closeButton: {\n      padding: Spacing.sm,\n      marginTop: -Spacing.sm,\n      marginRight: -Spacing.sm,\n    },\n    content: {\n      flex: 1,\n      padding: Spacing.lg,\n    },\n    loadingContainer: {\n      flex: 1,\n    },\n    errorContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: Spacing.xl,\n    },\n    errorTitle: {\n      fontSize: 20,\n      fontWeight: '600' as const,\n      color: colors.text,\n      marginTop: Spacing.lg,\n      marginBottom: Spacing.sm,\n    },\n    errorMessage: {\n      fontSize: 16,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginBottom: Spacing.xl,\n    },\n    retryButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.primary,\n      paddingVertical: Spacing.md,\n      paddingHorizontal: Spacing.xl,\n      borderRadius: BorderRadius.lg,\n      minWidth: 160,\n      minHeight: 56,\n    },\n    retryButtonText: {\n      fontSize: 16,\n      fontWeight: '600' as const,\n      color: '#FFFFFF',\n      marginLeft: 8,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/QuizResultsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/RankBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Spacing' is defined but never used.","line":5,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BorderRadius' is defined but never used.","line":5,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[433,436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[433,436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'progress' is assigned a value but never used.","line":22,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'gamificationData' is assigned a value but never used.","line":23,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2195,2198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2195,2198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { useCurrentRank } from '@/store/xpStore';\nimport { useUserStore } from '@/store/userStore';\nimport { FontSizes, FontWeights, Spacing, BorderRadius } from '@/constants/theme';\n\ninterface RankBadgeProps {\n  size?: 'small' | 'medium' | 'large';\n  showProgress?: boolean;\n  clickable?: boolean;\n  onPress?: () => void;\n  style?: any;\n}\n\nexport default function RankBadge({ \n  size = 'medium', \n  showProgress = false, \n  clickable = false,\n  onPress,\n  style \n}: RankBadgeProps) {\n  const { rank, progress, xpToNext } = useCurrentRank();\n  const { gamificationData } = useUserStore();\n\n  const getSize = () => {\n    switch (size) {\n      case 'small':\n        return {\n          container: { padding: 6, borderRadius: 12 },\n          icon: 16,\n          name: FontSizes.xs,\n          progress: FontSizes.xs,\n        };\n      case 'large':\n        return {\n          container: { padding: 16, borderRadius: 20 },\n          icon: 32,\n          name: FontSizes.lg,\n          progress: FontSizes.sm,\n        };\n      default:\n        return {\n          container: { padding: 10, borderRadius: 16 },\n          icon: 24,\n          name: FontSizes.md,\n          progress: FontSizes.xs,\n        };\n    }\n  };\n\n  const sizeConfig = getSize();\n  const styles = getStyles(rank.color, sizeConfig);\n\n  const BadgeComponent = (\n    <View style={[styles.container, sizeConfig.container, style]}>\n      <Text style={[styles.icon, { fontSize: sizeConfig.icon }]}>{rank.icon}</Text>\n      <View style={styles.textContainer}>\n        <Text style={[styles.rankName, { fontSize: sizeConfig.name }]}>{rank.name}</Text>\n        {showProgress && xpToNext > 0 && (\n          <Text style={[styles.progress, { fontSize: sizeConfig.progress }]}>\n            {xpToNext} XP to {rank.name === 'Guru' ? 'Max' : 'Next'}\n          </Text>\n        )}\n      </View>\n    </View>\n  );\n\n  if (clickable && onPress) {\n    return (\n      <TouchableOpacity onPress={onPress} activeOpacity={0.7}>\n        {BadgeComponent}\n      </TouchableOpacity>\n    );\n  }\n\n  return BadgeComponent;\n}\n\nconst getStyles = (color: string, sizeConfig: any) => StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: color + '20', // 20% opacity\n    borderWidth: 2,\n    borderColor: color,\n    ...sizeConfig.container,\n  },\n  icon: {\n    marginRight: 8,\n  },\n  textContainer: {\n    flex: 1,\n  },\n  rankName: {\n    fontWeight: FontWeights.bold,\n    color: color,\n    marginBottom: 2,\n  },\n  progress: {\n    color: '#666666',\n    fontWeight: FontWeights.medium,\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/RankDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'textSize' is assigned a value but never used.","line":23,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'borderRadius' is assigned a value but never used.","line":100,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":100,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { useCurrentRank, Rank } from '@/store/xpStore';\n\ninterface RankDisplayProps {\n  showProgress?: boolean;\n  size?: 'small' | 'medium' | 'large';\n  showAnimation?: boolean;\n}\n\nexport default function RankDisplay({\n  showProgress = false,\n  size = 'medium',\n  showAnimation = false,\n}: RankDisplayProps) {\n  const { colors, isDark } = useTheme();\n  const { rank, progress, currentXP, xpToNext } = useCurrentRank();\n\n  const scale = size === 'small' ? 0.8 : size === 'large' ? 1.2 : 1;\n  const iconSize = size === 'small' ? 24 : size === 'large' ? 48 : 32;\n  const textSize = size === 'small' ? FontSizes.sm : size === 'large' ? FontSizes.xl : FontSizes.lg;\n\n  const styles = getStyles(colors, isDark, size);\n\n  const isMaxRank = !Number.isFinite(xpToNext) || xpToNext <= 0;\n  const maxXP = isMaxRank ? currentXP : rank.maxXP;\n\n  return (\n    <View style={[styles.container, { transform: [{ scale }] }]}>\n      <View style={styles.badgeContainer}>\n        <View style={[styles.iconContainer, { borderColor: rank.color }]}>\n          <Text style={[styles.icon, { fontSize: iconSize }]}>{rank.icon}</Text>\n        </View>\n        \n        <View style={styles.infoContainer}>\n          <Text style={styles.rankLabel}>Current Rank</Text>\n          <Text style={[styles.rankName, { color: rank.color }]}>{rank.name}</Text>\n          \n          {showProgress && (\n            <View style={styles.progressInfo}>\n              <View style={styles.progressBar}>\n                <View\n                  style={[\n                    styles.progressFill,\n                    {\n                      width: `${Math.min(progress * 100, 100)}%`,\n                      backgroundColor: rank.color,\n                    },\n                  ]}\n                />\n              </View>\n              <Text style={styles.progressText}>\n                {currentXP} / {isMaxRank ? '‚àû' : maxXP} XP\n              </Text>\n            </View>\n          )}\n        </View>\n      </View>\n\n      {showAnimation && !isMaxRank && (\n        <View style={styles.nextRankHint}>\n          <Text style={styles.nextRankText}>\n            ‚¨ÜÔ∏è {rank.name === 'Novice' ? 'Seeker' : rank.name === 'Seeker' ? 'Scholar' : 'Sage'} in {xpToNext} XP\n          </Text>\n        </View>\n      )}\n    </View>\n  );\n}\n\ninterface RankBadgeProps {\n  rank: Rank;\n  size?: 'small' | 'medium' | 'large';\n  showLabel?: boolean;\n}\n\nexport function RankBadge({ rank, size = 'medium', showLabel = true }: RankBadgeProps) {\n  const { colors, isDark } = useTheme();\n  const styles = getStyles(colors, isDark, size);\n\n  const scale = size === 'small' ? 0.8 : size === 'large' ? 1.2 : 1;\n  const iconSize = size === 'small' ? 20 : size === 'large' ? 40 : 28;\n\n  return (\n    <View style={[styles.badgeOnly, { transform: [{ scale }] }]}>\n      <View style={[styles.badgeIconContainer, { borderColor: rank.color }]}>\n        <Text style={{ fontSize: iconSize }}>{rank.icon}</Text>\n      </View>\n      {showLabel && (\n        <Text style={[styles.badgeLabel, { color: rank.color }]}>{rank.name}</Text>\n      )}\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean, size: string) => {\n  const padding = size === 'small' ? Spacing.sm : size === 'large' ? Spacing.xl : Spacing.lg;\n  const borderRadius = size === 'small' ? BorderRadius.md : BorderRadius.lg;\n\n  return StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: padding,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 8,\n      elevation: 3,\n    },\n    badgeContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    iconContainer: {\n      width: 64,\n      height: 64,\n      borderRadius: 32,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      borderWidth: 3,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    icon: {\n      // Icon is rendered as text (emoji)\n    },\n    infoContainer: {\n      flex: 1,\n    },\n    rankLabel: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginBottom: 2,\n    },\n    rankName: {\n      fontSize: size === 'small' ? FontSizes.lg : FontSizes.xl,\n      fontWeight: FontWeights.bold,\n      marginBottom: Spacing.xs,\n    },\n    progressInfo: {\n      marginTop: Spacing.xs,\n    },\n    progressBar: {\n      height: 6,\n      backgroundColor: colors.lightGray,\n      borderRadius: 3,\n      overflow: 'hidden',\n      marginBottom: 4,\n    },\n    progressFill: {\n      height: '100%',\n      borderRadius: 3,\n    },\n    progressText: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n    },\n    nextRankHint: {\n      marginTop: Spacing.md,\n      paddingTop: Spacing.md,\n      borderTopWidth: 1,\n      borderTopColor: colors.lightGray,\n      alignItems: 'center',\n    },\n    nextRankText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      fontWeight: FontWeights.medium,\n    },\n    // Badge-only styles\n    badgeOnly: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.cardBackground,\n      padding: Spacing.sm,\n      borderRadius: BorderRadius.lg,\n    },\n    badgeIconContainer: {\n      width: 40,\n      height: 40,\n      borderRadius: 20,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      borderWidth: 2,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.sm,\n    },\n    badgeLabel: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n    },\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ReputationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/SessionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'focusTracker' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[398,401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[398,401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4050,4053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4050,4053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n} from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { PomodoroSession } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\nimport { focusTracker } from '@/services/FocusTracker';\n\ninterface SessionCardProps {\n  session: PomodoroSession;\n  colors: any;\n}\n\nexport default function SessionCard({ session, colors }: SessionCardProps) {\n  const formatDate = (dateString: string): string => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return 'Today';\n    }\n    if (date.toDateString() === yesterday.toDateString()) {\n      return 'Yesterday';\n    }\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n  };\n\n  const formatTime = (dateString: string): string => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const formatDuration = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    return `${mins}m`;\n  };\n\n  const getFocusScoreColor = (score: number): string => {\n    if (score >= 90) return colors.success || '#4CAF50';\n    if (score >= 70) return '#8BC34A';\n    if (score >= 50) return colors.warning || '#FFC107';\n    return colors.error || '#F44336';\n  };\n\n  const getFocusScoreLabel = (score: number): string => {\n    if (score >= 90) return 'Excellent';\n    if (score >= 70) return 'Great';\n    if (score >= 50) return 'Good';\n    if (score >= 30) return 'Fair';\n    return 'Needs Focus';\n  };\n\n  const styles = getStyles(colors);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <View style={styles.headerLeft}>\n          <Text style={styles.date}>{formatDate(session.startTime)}</Text>\n          <Text style={styles.time}>{formatTime(session.startTime)}</Text>\n        </View>\n        <View style={styles.headerRight}>\n          {session.treeSurvived ? (\n            <View style={styles.treeBadge}>\n              <Feather name=\"check-circle\" size={16} color=\"#4CAF50\" />\n              <Text style={styles.treeBadgeText}>Tree Grown</Text>\n            </View>\n          ) : (\n            <View style={styles.treeBadgeDead}>\n              <Feather name=\"x-circle\" size={16} color=\"#F44336\" />\n              <Text style={styles.treeBadgeText}>Tree Died</Text>\n            </View>\n          )}\n        </View>\n      </View>\n\n      <View style={styles.content}>\n        <View style={styles.infoRow}>\n          <View style={styles.infoItem}>\n            <Feather name=\"clock\" size={16} color={colors.textSecondary} />\n            <Text style={styles.infoText}>\n              Studied for {formatDuration(session.actualStudyTime)}\n            </Text>\n          </View>\n          {session.subject && (\n            <View style={styles.infoItem}>\n              <Feather name=\"book\" size={16} color={colors.textSecondary} />\n              <Text style={styles.infoText} numberOfLines={1}>\n                {session.subject}\n                {session.chapter && ` ‚Ä¢ ${session.chapter}`}\n              </Text>\n            </View>\n          )}\n        </View>\n\n        <View style={styles.scoreRow}>\n          <Text style={styles.scoreLabel}>Focus Score</Text>\n          <View style={styles.scoreContainer}>\n            <View\n              style={[\n                styles.scoreBadge,\n                { backgroundColor: getFocusScoreColor(session.focusScore) },\n              ]}\n            >\n              <Text style={styles.scoreValue}>{session.focusScore}%</Text>\n            </View>\n            <Text style={[styles.scoreText, { color: getFocusScoreColor(session.focusScore) }]}>\n              {getFocusScoreLabel(session.focusScore)}\n            </Text>\n          </View>\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: any) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n      elevation: 2,\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    headerLeft: {\n      flex: 1,\n    },\n    headerRight: {},\n    date: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.xs,\n    },\n    time: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n    },\n    treeBadge: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.xs,\n      backgroundColor: '#E8F5E9',\n      paddingHorizontal: Spacing.sm,\n      paddingVertical: Spacing.xs,\n      borderRadius: BorderRadius.sm,\n    },\n    treeBadgeDead: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.xs,\n      backgroundColor: '#FFEBEE',\n      paddingHorizontal: Spacing.sm,\n      paddingVertical: Spacing.xs,\n      borderRadius: BorderRadius.sm,\n    },\n    treeBadgeText: {\n      fontSize: FontSizes.xs,\n      fontWeight: FontWeights.semibold,\n      color: colors.textSecondary,\n    },\n    content: {\n      gap: Spacing.md,\n    },\n    infoRow: {\n      gap: Spacing.sm,\n    },\n    infoItem: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.sm,\n    },\n    infoText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      flex: 1,\n    },\n    scoreRow: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      paddingTop: Spacing.md,\n      borderTopWidth: 1,\n      borderTopColor: colors.border,\n    },\n    scoreLabel: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n    },\n    scoreContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.sm,\n    },\n    scoreBadge: {\n      paddingHorizontal: Spacing.sm,\n      paddingVertical: Spacing.xs,\n      borderRadius: BorderRadius.sm,\n    },\n    scoreValue: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.bold,\n      color: colors.white,\n    },\n    scoreText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/SkeletonLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/SmartyChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/SocialNotificationBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/StreakBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Easing' is defined but never used.","line":2,"column":62,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Platform' is defined but never used.","line":2,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Animated, Easing, Platform } from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Feather } from '@expo/vector-icons';\n\ninterface StreakBadgeProps {\n  streak: number;\n  showDetails?: boolean;\n  onStreakPress?: () => void;\n  animateOnChange?: boolean;\n}\n\nexport default function StreakBadge({\n  streak,\n  showDetails = true,\n  onStreakPress,\n  animateOnChange = false,\n}: StreakBadgeProps) {\n  const { colors, isDark } = useTheme();\n  const scaleAnim = useMemo(() => new Animated.Value(1), []);\n\n  useEffect(() => {\n    if (animateOnChange && streak > 0) {\n      Animated.sequence([\n        Animated.timing(scaleAnim, {\n          toValue: 1.3,\n          duration: 150,\n          useNativeDriver: true,\n        }),\n        Animated.spring(scaleAnim, {\n          toValue: 1,\n          friction: 4,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    }\n  }, [streak, animateOnChange, scaleAnim]);\n\n  const styles = getStyles(colors, isDark);\n\n  const isZeroStreak = streak === 0;\n\n  return (\n    <TouchableOpacity\n      style={[\n        styles.container,\n        isZeroStreak && styles.containerDisabled,\n      ]}\n      onPress={onStreakPress}\n      activeOpacity={0.7}\n      disabled={!onStreakPress}\n    >\n      <Animated.View\n        style={[\n          styles.badgeContent,\n          { transform: [{ scale: scaleAnim }] },\n        ]}\n      >\n        <View style={[styles.iconContainer, isZeroStreak && styles.iconContainerDisabled]}>\n          <Feather\n            name=\"sun\"\n            size={24}\n            color={isZeroStreak ? colors.textSecondary : '#FF8C42'}\n          />\n        </View>\n        \n        <View style={styles.textContainer}>\n          <View style={styles.streakRow}>\n            <Text style={[styles.streakNumber, isZeroStreak && styles.textDisabled]}>\n              {streak}\n            </Text>\n            <Text style={[styles.streakLabel, isZeroStreak && styles.textDisabled]}>\n              {streak === 1 ? 'day' : 'days'}\n            </Text>\n          </View>\n          \n          {showDetails && !isZeroStreak && (\n            <Text style={styles.streakMessage}>\n              Keep it up! üî•\n            </Text>\n          )}\n          \n          {isZeroStreak && (\n            <Text style={[styles.streakMessage, styles.textDisabled]}>\n              Start your streak!\n            </Text>\n          )}\n        </View>\n      </Animated.View>\n    </TouchableOpacity>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 8,\n      elevation: 3,\n      borderWidth: 1,\n      borderColor: colors.lightGray,\n    },\n    containerDisabled: {\n      opacity: 0.8,\n    },\n    badgeContent: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    iconContainer: {\n      width: 48,\n      height: 48,\n      borderRadius: 24,\n      backgroundColor: isDark ? '#2A2A2A' : '#FFF5EB',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    iconContainerDisabled: {\n      backgroundColor: colors.lightGray,\n    },\n    textContainer: {\n      flex: 1,\n    },\n    streakRow: {\n      flexDirection: 'row',\n      alignItems: 'baseline',\n    },\n    streakNumber: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: '#FF8C42',\n      marginRight: Spacing.xs,\n    },\n    streakLabel: {\n      fontSize: FontSizes.md,\n      color: '#FF8C42',\n      fontWeight: FontWeights.medium,\n    },\n    streakMessage: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: 2,\n    },\n    textDisabled: {\n      color: colors.textSecondary,\n    },\n  });\n\n// Freeze placeholder component\nexport function StreakFreeze() {\n  const { colors, isDark } = useTheme();\n  const styles = getFreezeStyles(colors, isDark);\n\n  return (\n    <View style={[styles.container, styles.freezeContainer]}>\n      <View style={styles.freezeBadgeContent}>\n        <View style={styles.freezeIconContainer}>\n          <Feather name=\"cloud-snow\" size={20} color={colors.textSecondary} />\n        </View>\n        <View style={styles.freezeTextContainer}>\n          <View style={styles.freezeRow}>\n            <Text style={[styles.freezeTitle, styles.textDisabled]}>\n              Streak Freeze\n            </Text>\n            <View style={styles.lockBadge}>\n              <Feather name=\"lock\" size={12} color={colors.textSecondary} />\n            </View>\n          </View>\n          <Text style={[styles.freezeSubtitle, styles.textDisabled]}>\n            Unlock with Premium\n          </Text>\n        </View>\n      </View>\n      <Text style={styles.freezeDescription}>\n        Coming soon - protect your streak from breaks!\n      </Text>\n    </View>\n  );\n}\n\nconst getFreezeStyles = (colors: ThemeColors, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.md,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 8,\n      elevation: 3,\n      borderWidth: 1,\n      borderColor: colors.lightGray,\n    },\n    freezeContainer: {\n      marginTop: Spacing.md,\n      backgroundColor: isDark ? '#1A1A1A' : '#F9F9F9',\n      borderStyle: 'dashed' as const,\n      borderWidth: 2,\n      borderColor: colors.lightGray,\n    },\n    freezeBadgeContent: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    freezeIconContainer: {\n      width: 40,\n      height: 40,\n      borderRadius: 20,\n      backgroundColor: colors.lightGray,\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    freezeTextContainer: {\n      flex: 1,\n    },\n    freezeRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    freezeTitle: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n    },\n    lockBadge: {\n      marginLeft: Spacing.sm,\n    },\n    freezeSubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginTop: 2,\n    },\n    freezeDescription: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: Spacing.sm,\n      fontStyle: 'italic',\n    },\n    textDisabled: {\n      opacity: 0.6,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/StreamSelectionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/TrendingQuestions.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4143,4146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4143,4146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  ActivityIndicator,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useRouter } from 'expo-router';\nimport { Colors } from '@/constants/colors';\nimport { Question } from '@/types/qa';\nimport { qaSearchService, DiscoverySection } from '@/services/QASearchService';\n\ninterface TrendingQuestionsProps {\n  onQuestionPress?: (questionId: string) => void;\n  maxItems?: number;\n}\n\ntype SectionKey = keyof DiscoverySection;\n\nconst SECTIONS: { key: SectionKey; title: string; icon: string }[] = [\n  { key: 'trending', title: 'Trending', icon: 'flame-outline' },\n  { key: 'recent', title: 'Recently Asked', icon: 'time-outline' },\n  { key: 'popular', title: 'Popular', icon: 'eye-outline' },\n  { key: 'helpful', title: 'Most Helpful', icon: 'thumbs-up-outline' },\n];\n\nexport const TrendingQuestions: React.FC<TrendingQuestionsProps> = ({\n  onQuestionPress,\n  maxItems = 5,\n}) => {\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [discoveryData, setDiscoveryData] = useState<DiscoverySection | null>(null);\n  const [activeSection, setActiveSection] = useState<SectionKey>('trending');\n\n  useEffect(() => {\n    const fetchDiscovery = async () => {\n      try {\n        const data = await qaSearchService.getDiscoverySections();\n        setDiscoveryData(data);\n      } catch (error) {\n        console.error('Failed to fetch discovery data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchDiscovery();\n  }, []);\n\n  const handleQuestionPress = (questionId: string) => {\n    if (onQuestionPress) {\n      onQuestionPress(questionId);\n    } else {\n      router.push({\n        pathname: '/question-detail',\n        params: { questionId },\n      });\n    }\n  };\n\n  const renderQuestionItem = ({ item, index }: { item: Question; index: number }) => (\n    <TouchableOpacity\n      style={styles.questionItem}\n      onPress={() => handleQuestionPress(item.id)}\n    >\n      <View style={styles.rankContainer}>\n        <Text style={styles.rankText}>#{index + 1}</Text>\n      </View>\n      <View style={styles.questionContent}>\n        <Text style={styles.questionTitle} numberOfLines={2}>\n          {item.title}\n        </Text>\n        <View style={styles.questionMeta}>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"chatbubble-outline\" size={14} color={Colors.light.textSecondary} />\n            <Text style={styles.metaText}>{item.answerCount || 0}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"eye-outline\" size={14} color={Colors.light.textSecondary} />\n            <Text style={styles.metaText}>{item.viewCount || 0}</Text>\n          </View>\n          <View style={[styles.difficultyBadge, { backgroundColor: getDifficultyColor(item.difficulty) + '20' }]}>\n            <Text style={[styles.difficultyText, { color: getDifficultyColor(item.difficulty) }]}>\n              {item.difficulty}\n            </Text>\n          </View>\n        </View>\n      </View>\n      <Ionicons name=\"chevron-forward\" size={20} color={Colors.light.textSecondary} />\n    </TouchableOpacity>\n  );\n\n  if (loading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"small\" color={Colors.light.primary} />\n      </View>\n    );\n  }\n\n  if (!discoveryData) {\n    return null;\n  }\n\n  const currentQuestions = discoveryData[activeSection];\n\n  return (\n    <View style={styles.container}>\n      {/* Section Tabs */}\n      <ScrollView\n        horizontal\n        showsHorizontalScrollIndicator={false}\n        style={styles.sectionTabs}\n        contentContainerStyle={styles.sectionTabsContent}\n      >\n        {SECTIONS.map(section => (\n          <TouchableOpacity\n            key={section.key}\n            style={[\n              styles.sectionTab,\n              activeSection === section.key && styles.sectionTabActive,\n            ]}\n            onPress={() => setActiveSection(section.key)}\n          >\n            <Ionicons\n              name={section.icon as any}\n              size={18}\n              color={activeSection === section.key ? Colors.light.primary : Colors.light.textSecondary}\n            />\n            <Text\n              style={[\n                styles.sectionTabText,\n                activeSection === section.key && styles.sectionTabTextActive,\n              ]}\n            >\n              {section.title}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n\n      {/* Questions List */}\n      {currentQuestions.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"chatbubbles-outline\" size={40} color={Colors.light.textSecondary} />\n          <Text style={styles.emptyText}>No questions yet</Text>\n        </View>\n      ) : (\n        <FlatList\n          data={currentQuestions.slice(0, maxItems)}\n          keyExtractor={item => item.id}\n          renderItem={renderQuestionItem}\n          scrollEnabled={false}\n          contentContainerStyle={styles.questionsList}\n        />\n      )}\n    </View>\n  );\n};\n\nconst getDifficultyColor = (difficulty: string): string => {\n  switch (difficulty) {\n    case 'easy': return Colors.light.success;\n    case 'medium': return Colors.light.warning;\n    case 'hard': return Colors.light.error;\n    default: return Colors.light.textSecondary;\n  }\n};\n\nimport { ScrollView } from 'react-native';\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: Colors.light.cardBackground,\n    borderRadius: 12,\n    marginHorizontal: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: Colors.light.border,\n    overflow: 'hidden',\n  },\n  loadingContainer: {\n    padding: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  sectionTabs: {\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.light.border,\n  },\n  sectionTabsContent: {\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n  },\n  sectionTab: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 14,\n    paddingVertical: 8,\n    borderRadius: 20,\n    marginHorizontal: 4,\n    gap: 6,\n  },\n  sectionTabActive: {\n    backgroundColor: Colors.light.primary + '15',\n  },\n  sectionTabText: {\n    fontSize: 13,\n    fontWeight: '500',\n    color: Colors.light.textSecondary,\n  },\n  sectionTabTextActive: {\n    color: Colors.light.primary,\n  },\n  questionsList: {\n    padding: 12,\n  },\n  questionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 8,\n    backgroundColor: Colors.light.background,\n  },\n  rankContainer: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: Colors.light.primary + '15',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  rankText: {\n    fontSize: 12,\n    fontWeight: '700',\n    color: Colors.light.primary,\n  },\n  questionContent: {\n    flex: 1,\n    marginRight: 8,\n  },\n  questionTitle: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: Colors.light.text,\n    marginBottom: 6,\n    lineHeight: 20,\n  },\n  questionMeta: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: 12,\n    color: Colors.light.textSecondary,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  difficultyText: {\n    fontSize: 10,\n    fontWeight: '700',\n    textTransform: 'uppercase',\n  },\n  emptyContainer: {\n    padding: 32,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  emptyText: {\n    marginTop: 8,\n    fontSize: 14,\n    color: Colors.light.textSecondary,\n  },\n});\n\nexport default TrendingQuestions;\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/TrophyRoom.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Achievement' is defined but never used.","line":14,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3602,3605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3602,3605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  Animated,\n  Platform,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { useAchievementStore, Achievement, AchievementCategory } from '@/store/achievementStore';\nimport AchievementCard from './AchievementCard';\nimport { Feather } from '@expo/vector-icons';\n\ntype CategoryFilter = 'all' | AchievementCategory;\n\nconst CATEGORIES: { key: CategoryFilter; label: string; icon: string }[] = [\n  { key: 'all', label: 'All', icon: ' trophy' },\n  { key: 'streak', label: 'Streaks', icon: 'zap' },\n  { key: 'quiz', label: 'Quizzes', icon: 'clipboard' },\n  { key: 'learning', label: 'Learning', icon: 'book-open' },\n  { key: 'xp', label: 'XP', icon: 'star' },\n];\n\nexport default function TrophyRoom() {\n  const { colors, isDark } = useTheme();\n  const router = useRouter();\n  const { achievements, getUnlockedCount } = useAchievementStore();\n  const [activeCategory, setActiveCategory] = useState<CategoryFilter>('all');\n\n  const filteredAchievements = useMemo(() => {\n    if (activeCategory === 'all') {\n      return achievements;\n    }\n    return achievements.filter((a) => a.category === activeCategory);\n  }, [achievements, activeCategory]);\n\n  const unlockedCount = getUnlockedCount();\n  const totalCount = achievements.length;\n  const progressPercent = Math.round((unlockedCount / totalCount) * 100);\n\n  const styles = getStyles(colors, isDark);\n\n  return (\n    <View style={styles.container}>\n      {/* Header */}\n      <View style={styles.header}>\n        <TouchableOpacity\n          style={styles.backButton}\n          onPress={() => router.back()}\n          activeOpacity={0.7}\n        >\n          <Feather name=\"arrow-left\" size={24} color={colors.text} />\n        </TouchableOpacity>\n        <Text style={styles.title}>Trophy Room</Text>\n        <View style={styles.headerRight} />\n      </View>\n\n      {/* Progress Summary */}\n      <View style={styles.progressCard}>\n        <View style={styles.progressHeader}>\n          <View style={styles.trophyIcon}>\n            <Text style={styles.trophyEmoji}>üèÜ</Text>\n          </View>\n          <View style={styles.progressInfo}>\n            <Text style={styles.progressTitle}>Your Collection</Text>\n            <Text style={styles.progressSubtitle}>\n              {unlockedCount} of {totalCount} unlocked\n            </Text>\n          </View>\n        </View>\n\n        {/* Progress Bar */}\n        <View style={styles.overallProgressBar}>\n          <View style={styles.overallProgressBackground}>\n            <Animated.View\n              style={[\n                styles.overallProgressFill,\n                { width: `${progressPercent}%` },\n              ]}\n            />\n          </View>\n        </View>\n\n        <Text style={styles.progressPercent}>{progressPercent}% Complete</Text>\n      </View>\n\n      {/* Category Filter Tabs */}\n      <ScrollView\n        horizontal\n        showsHorizontalScrollIndicator={false}\n        contentContainerStyle={styles.categoryTabs}\n      >\n        {CATEGORIES.map((cat) => (\n          <TouchableOpacity\n            key={cat.key}\n            style={[\n              styles.categoryTab,\n              activeCategory === cat.key && styles.categoryTabActive,\n            ]}\n            onPress={() => setActiveCategory(cat.key)}\n            activeOpacity={0.7}\n          >\n            <Feather\n              name={cat.icon.trim() as any}\n              size={16}\n              color={activeCategory === cat.key ? '#FFFFFF' : colors.textSecondary}\n            />\n            <Text\n              style={[\n                styles.categoryTabText,\n                activeCategory === cat.key && styles.categoryTabTextActive,\n              ]}\n            >\n              {cat.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n\n      {/* Achievements Grid */}\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={styles.achievementsGrid}\n        showsVerticalScrollIndicator={false}\n      >\n        {filteredAchievements.map((achievement) => (\n          <View key={achievement.id} style={styles.achievementWrapper}>\n            <AchievementCard\n              achievement={achievement}\n              showUnlockDate={true}\n              animateOnUnlock={false}\n            />\n          </View>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.lg,\n      paddingTop: Platform.select({ web: Spacing.lg, default: Spacing.lg + 20 }),\n      paddingBottom: Spacing.md,\n      backgroundColor: colors.background,\n    },\n    backButton: {\n      padding: Spacing.sm,\n      marginRight: Spacing.sm,\n    },\n    title: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    headerRight: {\n      width: 40,\n    },\n    progressCard: {\n      backgroundColor: colors.cardBackground,\n      marginHorizontal: Spacing.lg,\n      marginBottom: Spacing.lg,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 8,\n      elevation: 3,\n    },\n    progressHeader: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    trophyIcon: {\n      width: 56,\n      height: 56,\n      borderRadius: 28,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    trophyEmoji: {\n      fontSize: 32,\n    },\n    progressInfo: {\n      flex: 1,\n    },\n    progressTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n    },\n    progressSubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginTop: 2,\n    },\n    overallProgressBar: {\n      height: 10,\n      backgroundColor: colors.lightGray,\n      borderRadius: 5,\n      overflow: 'hidden',\n      marginBottom: Spacing.sm,\n    },\n    overallProgressBackground: {\n      flex: 1,\n    },\n    overallProgressFill: {\n      height: '100%',\n      backgroundColor: colors.primary,\n      borderRadius: 5,\n    },\n    progressPercent: {\n      fontSize: FontSizes.sm,\n      color: colors.primary,\n      fontWeight: FontWeights.semibold,\n      textAlign: 'right',\n    },\n    categoryTabs: {\n      paddingHorizontal: Spacing.lg,\n      marginBottom: Spacing.md,\n      gap: Spacing.sm,\n    },\n    categoryTab: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.xl,\n      backgroundColor: colors.cardBackground,\n      marginRight: Spacing.sm,\n      borderWidth: 1,\n      borderColor: colors.lightGray,\n    },\n    categoryTabActive: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primary,\n    },\n    categoryTabText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.medium,\n      color: colors.textSecondary,\n      marginLeft: Spacing.xs,\n    },\n    categoryTabTextActive: {\n      color: '#FFFFFF',\n    },\n    scrollView: {\n      flex: 1,\n    },\n    achievementsGrid: {\n      paddingHorizontal: Spacing.lg,\n      paddingBottom: Spacing.xxl,\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: Spacing.md,\n    },\n    achievementWrapper: {\n      width: Platform.select({\n        web: '48%',\n        default: '100%',\n      } as const),\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/VirtualForest.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Dimensions' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setTreeType' is assigned a value but never used.","line":25,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":31},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadForestData` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/home/engine/project/components/VirtualForest.tsx:34:5\n  32 |\n  33 |   useEffect(() => {\n> 34 |     loadForestData();\n     |     ^^^^^^^^^^^^^^ `loadForestData` accessed before it is declared\n  35 |     \n  36 |     // Subscribe to growth updates\n  37 |     const interval = setInterval(() => {\n\n/home/engine/project/components/VirtualForest.tsx:47:3\n  45 |   }, [sessionId]);\n  46 |\n> 47 |   const loadForestData = async () => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |     const trees = await focusTracker.getRecentTrees(20);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 49 |     const stats = await focusTracker.getForestStats();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 50 |     setRecentTrees(trees);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 51 |     setForestStats(stats);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 52 |   };\n     | ^^^^^ `loadForestData` is declared here\n  53 |\n  54 |   const handleRestartTree = async () => {\n  55 |     if (sessionId) {","line":34,"column":5,"nodeType":null,"endLine":34,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  Dimensions,\n} from 'react-native';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { focusTracker } from '@/services/FocusTracker';\nimport { Tree } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\n\ninterface VirtualForestProps {\n  sessionId?: string;\n  showHistory?: boolean;\n}\n\nexport default function VirtualForest({ sessionId, showHistory = false }: VirtualForestProps) {\n  const { colors } = useTheme();\n  const [currentGrowth, setCurrentGrowth] = useState(0);\n  const [isTreeAlive, setIsTreeAlive] = useState(false);\n  const [treeType, setTreeType] = useState<Tree['type']>('oak');\n  const [recentTrees, setRecentTrees] = useState<Tree[]>([]);\n  const [forestStats, setForestStats] = useState({\n    totalTrees: 0,\n    treesThisWeek: 0,\n    forestScore: 0,\n  });\n\n  useEffect(() => {\n    loadForestData();\n    \n    // Subscribe to growth updates\n    const interval = setInterval(() => {\n      if (sessionId) {\n        setCurrentGrowth(focusTracker.getCurrentGrowth());\n        setIsTreeAlive(focusTracker.isTreeAlive());\n      }\n    }, 500);\n\n    return () => clearInterval(interval);\n  }, [sessionId]);\n\n  const loadForestData = async () => {\n    const trees = await focusTracker.getRecentTrees(20);\n    const stats = await focusTracker.getForestStats();\n    setRecentTrees(trees);\n    setForestStats(stats);\n  };\n\n  const handleRestartTree = async () => {\n    if (sessionId) {\n      await focusTracker.restartTree(sessionId);\n      setCurrentGrowth(0);\n      setIsTreeAlive(true);\n    }\n  };\n\n  const getTreeSize = (growth: number): number => {\n    const baseSize = 40;\n    const maxSize = 100;\n    return baseSize + (growth / 100) * (maxSize - baseSize);\n  };\n\n  const getTreeOpacity = (growth: number, alive: boolean): number => {\n    if (!alive) return 0.3;\n    return 0.5 + (growth / 100) * 0.5;\n  };\n\n  const renderTree = (tree: Tree, index: number, isCurrent = false) => {\n    const treeEmoji = focusTracker.getTreeEmoji(tree.type);\n    const size = isCurrent ? getTreeSize(currentGrowth) : getTreeSize(tree.growth);\n    const opacity = isCurrent ? getTreeOpacity(currentGrowth, isTreeAlive) : getTreeOpacity(tree.growth, tree.alive);\n    const isDead = isCurrent ? !isTreeAlive : !tree.alive;\n\n    return (\n      <View key={tree.id || index} style={[styles.treeContainer, { width: size + 20 }]}>\n        <View\n          style={[\n            styles.tree,\n            {\n              width: size,\n              height: size,\n              opacity,\n              transform: [{ scale: isDead ? 0.8 : 1 }],\n            },\n          ]}\n        >\n          <Text style={[styles.treeEmoji, { fontSize: size * 0.6 }]}>{treeEmoji}</Text>\n          {isDead && <Text style={styles.deadIcon}>üíÄ</Text>}\n        </View>\n        {!isCurrent && !isDead && tree.growth >= 100 && (\n          <View style={styles.grownBadge}>\n            <Feather name=\"check-circle\" size={12} color=\"#4CAF50\" />\n          </View>\n        )}\n      </View>\n    );\n  };\n\n  const styles = getStyles(colors);\n\n  return (\n    <View style={styles.container}>\n      {/* Forest Header */}\n      <View style={styles.header}>\n        <View>\n          <Text style={styles.title}>Virtual Forest</Text>\n          <Text style={styles.subtitle}>\n            {isTreeAlive\n              ? 'Stay focused to grow your tree!'\n              : 'Tree died ‚Ä¢ Restart to try again'}\n          </Text>\n        </View>\n        <View style={styles.statsContainer}>\n          <View style={styles.statItem}>\n            <Text style={styles.statValue}>{forestStats.treesThisWeek}</Text>\n            <Text style={styles.statLabel}>This Week</Text>\n          </View>\n          <View style={styles.statDivider} />\n          <View style={styles.statItem}>\n            <Text style={styles.statValue}>{forestStats.totalTrees}</Text>\n            <Text style={styles.statLabel}>Total</Text>\n          </View>\n        </View>\n      </View>\n\n      {/* Current Growing Tree */}\n      {sessionId && (\n        <View style={styles.currentTreeSection}>\n          <Text style={styles.sectionTitle}>Growing Now</Text>\n          <View style={styles.currentTreeContainer}>\n            {isTreeAlive ? (\n              <View style={styles.growingTreeWrapper}>\n                <View\n                  style={[\n                    styles.growingTree,\n                    {\n                      width: 120,\n                      height: 120,\n                    },\n                  ]}\n                >\n                  <Text style={[styles.growingTreeEmoji, { fontSize: 80 }]}>\n                    {focusTracker.getTreeEmoji(treeType)}\n                  </Text>\n                </View>\n                <View style={styles.growthIndicator}>\n                  <View style={styles.growthBarBackground}>\n                    <View\n                      style={[\n                        styles.growthBarFill,\n                        {\n                          width: `${currentGrowth}%`,\n                          backgroundColor: colors.primary,\n                        },\n                      ]}\n                    />\n                  </View>\n                  <Text style={styles.growthText}>{Math.round(currentGrowth)}%</Text>\n                </View>\n              </View>\n            ) : (\n              <View style={styles.deadTreeWrapper}>\n                <Text style={styles.deadTreeEmoji}>üçÇ</Text>\n                <Text style={styles.deadText}>Oh no! Your tree died.</Text>\n                <TouchableOpacity\n                  style={styles.restartButton}\n                  onPress={handleRestartTree}\n                  activeOpacity={0.8}\n                >\n                  <Feather name=\"refresh-ccw\" size={18} color=\"#FFFFFF\" />\n                  <Text style={styles.restartButtonText}>Restart</Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n        </View>\n      )}\n\n      {/* Forest History */}\n      {showHistory && recentTrees.length > 0 && (\n        <View style={styles.historySection}>\n          <View style={styles.historyHeader}>\n            <Text style={styles.sectionTitle}>Your Forest</Text>\n            <TouchableOpacity\n              style={styles.refreshButton}\n              onPress={loadForestData}\n              activeOpacity={0.7}\n            >\n              <Feather name=\"refresh-cw\" size={16} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n          <ScrollView\n            horizontal\n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={styles.forestGrid}\n          >\n            {recentTrees.map((tree, index) => renderTree(tree, index))}\n          </ScrollView>\n        </View>\n      )}\n\n      {/* Empty State */}\n      {showHistory && recentTrees.length === 0 && (\n        <View style={styles.emptyState}>\n          <Text style={styles.emptyEmoji}>üå±</Text>\n          <Text style={styles.emptyTitle}>Start Your Forest</Text>\n          <Text style={styles.emptyText}>\n            Complete focus sessions to grow your first tree!\n          </Text>\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'flex-start',\n      marginBottom: Spacing.lg,\n    },\n    title: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.xs,\n    },\n    subtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      maxWidth: 180,\n    },\n    statsContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.md,\n      padding: Spacing.sm,\n      gap: Spacing.sm,\n    },\n    statItem: {\n      alignItems: 'center',\n      paddingHorizontal: Spacing.sm,\n    },\n    statDivider: {\n      width: 1,\n      height: 30,\n      backgroundColor: colors.border,\n    },\n    statValue: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.primary,\n    },\n    statLabel: {\n      fontSize: 10,\n      color: colors.textSecondary,\n    },\n    currentTreeSection: {\n      marginBottom: Spacing.lg,\n    },\n    sectionTitle: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.md,\n    },\n    currentTreeContainer: {\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.xl,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: 200,\n    },\n    growingTreeWrapper: {\n      alignItems: 'center',\n    },\n    growingTree: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginBottom: Spacing.lg,\n    },\n    growingTreeEmoji: {\n      shadowColor: colors.primary,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.2,\n      shadowRadius: 8,\n      elevation: 4,\n    },\n    growthIndicator: {\n      width: '100%',\n      alignItems: 'center',\n    },\n    growthBarBackground: {\n      width: '100%',\n      height: 8,\n      backgroundColor: colors.border,\n      borderRadius: 4,\n      overflow: 'hidden',\n      marginBottom: Spacing.xs,\n    },\n    growthBarFill: {\n      height: '100%',\n      borderRadius: 4,\n    },\n    growthText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n      color: colors.textSecondary,\n    },\n    deadTreeWrapper: {\n      alignItems: 'center',\n    },\n    deadTreeEmoji: {\n      fontSize: 80,\n      marginBottom: Spacing.md,\n      opacity: 0.5,\n    },\n    deadText: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginBottom: Spacing.lg,\n    },\n    restartButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.primary,\n      paddingHorizontal: Spacing.lg,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.xl,\n      gap: Spacing.sm,\n    },\n    restartButtonText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n    historySection: {\n      marginTop: Spacing.lg,\n    },\n    historyHeader: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    refreshButton: {\n      padding: Spacing.xs,\n    },\n    forestGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: Spacing.sm,\n      paddingHorizontal: Spacing.xs,\n    },\n    treeContainer: {\n      alignItems: 'center',\n      position: 'relative',\n    },\n    tree: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.background,\n      borderRadius: 100,\n    },\n    treeEmoji: {\n      textAlign: 'center',\n      lineHeight: 1,\n    },\n    deadIcon: {\n      position: 'absolute',\n      bottom: -5,\n      right: -5,\n      fontSize: 16,\n    },\n    grownBadge: {\n      position: 'absolute',\n      top: -5,\n      right: -5,\n      backgroundColor: colors.background,\n      borderRadius: 12,\n      padding: 2,\n    },\n    emptyState: {\n      alignItems: 'center',\n      paddingVertical: Spacing.xxl,\n    },\n    emptyEmoji: {\n      fontSize: 64,\n      marginBottom: Spacing.lg,\n    },\n    emptyTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    emptyText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textAlign: 'center',\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/VoiceRecorder.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'screenWidth' is assigned a value but never used.","line":23,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'scaleAnimation' and 'waveAnimation'. Either include them or remove the dependency array.","line":70,"column":6,"nodeType":"ArrayExpression","endLine":70,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [isRecording, scaleAnimation, waveAnimation]","fix":{"range":[2042,2055],"text":"[isRecording, scaleAnimation, waveAnimation]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDark' is defined but never used. Allowed unused args must match /^_/u.","line":222,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":222,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  Dimensions,\n} from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withRepeat,\n  withSpring,\n  withTiming,\n} from 'react-native-reanimated';\nimport { useTheme, ThemeColors } from './ThemeContext';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { speechToTextService } from '@/services/SpeechToTextService';\nimport { noteSummarizerService } from '@/services/NoteSummarizerService';\nimport { TranscriptionResult } from '@/types/notes';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\ninterface VoiceRecorderProps {\n  onTranscriptionComplete: (text: string) => void;\n  language?: 'en' | 'hi' | 'hinglish';\n  subject?: string;\n  chapter?: string;\n}\n\nexport default function VoiceRecorder({\n  onTranscriptionComplete,\n  language = 'en',\n  subject,\n  chapter,\n}: VoiceRecorderProps) {\n  const { colors, isDark } = useTheme();\n  const [isRecording, setIsRecording] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n\n  const waveAnimation = useSharedValue(0);\n  const scaleAnimation = useSharedValue(1);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isRecording) {\n      interval = setInterval(() => {\n        setRecordingTime((prev) => prev + 1);\n      }, 1000);\n    }\n    return () => clearInterval(interval);\n  }, [isRecording]);\n\n  useEffect(() => {\n    if (isRecording) {\n      waveAnimation.value = withRepeat(\n        withSpring(1, { damping: 0.5, stiffness: 100 }),\n        -1,\n        true\n      );\n      scaleAnimation.value = withTiming(1.1, { duration: 300 });\n    } else {\n      waveAnimation.value = withTiming(0, { duration: 300 });\n      scaleAnimation.value = withTiming(1, { duration: 300 });\n    }\n  }, [isRecording]);\n\n  const waveAnimatedStyle = useAnimatedStyle(() => ({\n    opacity: 0.5 + waveAnimation.value * 0.5,\n    height: 30 + waveAnimation.value * 40,\n  }));\n\n  const buttonAnimatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scaleAnimation.value }],\n  }));\n\n  const startRecording = async () => {\n    setError(null);\n    setTranscript('');\n    setRecordingTime(0);\n\n    // Check permissions\n    const hasPermission = await speechToTextService.requestPermissions();\n    if (!hasPermission) {\n      setError('Microphone permission denied. Please enable it in settings.');\n      return;\n    }\n\n    // Check if speech recognition is supported\n    if (!speechToTextService.isSupported()) {\n      setError('Speech recognition is not supported on this device.');\n      return;\n    }\n\n    try {\n      await speechToTextService.startListening(\n        (result: TranscriptionResult) => {\n          setTranscript(result.text);\n        },\n        (errorMessage: string) => {\n          setError(errorMessage);\n          stopRecording();\n        },\n        language\n      );\n      setIsRecording(true);\n    } catch (err) {\n      setError('Failed to start recording. Please try again.');\n      console.error('Recording error:', err);\n    }\n  };\n\n  const stopRecording = async () => {\n    if (!isRecording) return;\n\n    setIsRecording(false);\n    await speechToTextService.stopListening();\n\n    if (transcript.trim()) {\n      setIsProcessing(true);\n      try {\n        const summarizedResult = await noteSummarizerService.summarizeText(\n          transcript,\n          { subject, chapter, language }\n        );\n        onTranscriptionComplete(summarizedResult.summary);\n      } catch (err) {\n        console.error('Summarization error:', err);\n        onTranscriptionComplete(transcript);\n      } finally {\n        setIsProcessing(false);\n      }\n    }\n  };\n\n  const styles = getStyles(colors, isDark);\n\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* Waveform visualization */}\n      <View style={styles.waveformContainer}>\n        {Array.from({ length: 5 }).map((_, index) => (\n          <Animated.View\n            key={index}\n            style={[\n              styles.waveformBar,\n              waveAnimatedStyle,\n              {\n                animationDelay: `${index * 0.1}s`,\n                opacity: isRecording ? 1 : 0.3,\n              },\n            ]}\n          />\n        ))}\n      </View>\n\n      {/* Live transcript */}\n      {(isRecording || transcript) && (\n        <View style={styles.transcriptContainer}>\n          {isRecording && (\n            <View style={styles.recordingIndicator}>\n              <View style={[styles.recordingDot, { backgroundColor: colors.error }]} />\n              <Text style={styles.recordingTime}>{formatTime(recordingTime)}</Text>\n            </View>\n          )}\n          <Text style={styles.transcript} numberOfLines={3}>\n            {transcript || (isRecording ? 'Listening...' : '')}\n          </Text>\n        </View>\n      )}\n\n      {/* Error message */}\n      {error && (\n        <View style={styles.errorContainer}>\n          <Text style={styles.errorText}>{error}</Text>\n        </View>\n      )}\n\n      {/* Processing indicator */}\n      {isProcessing && (\n        <View style={styles.processingContainer}>\n          <ActivityIndicator size=\"small\" color={colors.primary} />\n          <Text style={styles.processingText}>Processing...</Text>\n        </View>\n      )}\n\n      {/* Record button */}\n      <View style={styles.buttonContainer}>\n        <Animated.View style={buttonAnimatedStyle}>\n          <TouchableOpacity\n            style={[\n              styles.recordButton,\n              isRecording && styles.recordingButton,\n            ]}\n            onPress={isRecording ? stopRecording : startRecording}\n            disabled={isProcessing}\n            activeOpacity={0.7}\n          >\n            <Text style={styles.recordButtonText}>\n              {isRecording ? '‚èπ' : 'üéôÔ∏è'}\n            </Text>\n          </TouchableOpacity>\n        </Animated.View>\n        <Text style={styles.buttonLabel}>\n          {isRecording ? 'Tap to stop' : 'Tap to record'}\n        </Text>\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) => StyleSheet.create({\n  container: {\n    padding: Spacing.md,\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n  },\n  waveformContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 80,\n    gap: 4,\n    marginBottom: Spacing.md,\n  },\n  waveformBar: {\n    width: 6,\n    backgroundColor: colors.primary,\n    borderRadius: BorderRadius.full,\n  },\n  transcriptContainer: {\n    width: '100%',\n    minHeight: 60,\n    marginBottom: Spacing.md,\n  },\n  recordingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: Spacing.sm,\n  },\n  recordingDot: {\n    width: 8,\n    height: 8,\n    borderRadius: BorderRadius.full,\n    marginRight: Spacing.sm,\n  },\n  recordingTime: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n    color: colors.error,\n  },\n  transcript: {\n    fontSize: FontSizes.md,\n    color: colors.text,\n    textAlign: 'center',\n    fontStyle: 'italic',\n  },\n  errorContainer: {\n    width: '100%',\n    padding: Spacing.sm,\n    backgroundColor: `${colors.error}20`,\n    borderRadius: BorderRadius.md,\n    marginBottom: Spacing.md,\n  },\n  errorText: {\n    fontSize: FontSizes.sm,\n    color: colors.error,\n    textAlign: 'center',\n  },\n  processingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: Spacing.md,\n  },\n  processingText: {\n    marginLeft: Spacing.sm,\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n  },\n  buttonContainer: {\n    alignItems: 'center',\n  },\n  recordButton: {\n    width: 64,\n    height: 64,\n    borderRadius: BorderRadius.full,\n    backgroundColor: colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 4,\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  recordingButton: {\n    backgroundColor: colors.error,\n  },\n  recordButtonText: {\n    fontSize: FontSizes.xl,\n  },\n  buttonLabel: {\n    marginTop: Spacing.sm,\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/WeakAreaCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/WelcomeSlider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/components/XPBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/config/adConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/config/affiliateConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/constants/animations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/constants/colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/constants/curriculum.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":140,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7329,7332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7329,7332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const CLASS_OPTIONS = [\n  'Class 1',\n  'Class 2',\n  'Class 3',\n  'Class 4',\n  'Class 5',\n  'Class 6',\n  'Class 7',\n  'Class 8',\n  'Class 9',\n  'Class 10',\n  'Class 11',\n  'Class 12',\n  'Class 12+',\n];\n\nconst CLASS_1_5_SUBJECTS = ['English', 'Hindi', 'Maths', 'EVS'];\n\nconst CLASS_6_10_SUBJECTS = ['Mathematics', 'Science', 'Social Science', 'English', 'Hindi'];\n\nconst STREAM_SUBJECTS: Record<string, string[]> = {\n  Science: ['Physics', 'Chemistry', 'Biology', 'Mathematics', 'English'],\n  Commerce: ['Economics', 'Accounts', 'Business Studies', 'Mathematics', 'English'],\n  Arts: ['History', 'Geography', 'Political Science', 'English', 'Hindi'],\n};\n\nconst PATHWAY_CATEGORIES = [\n  { id: 'competitive', name: 'Competitive Exams', icon: 'üéØ' },\n  { id: 'skills', name: 'Skill Building', icon: 'üõ†Ô∏è' },\n];\n\nconst PATHWAY_DATA: Record<string, Record<string, string[]>> = {\n  'Competitive Exams': {\n    JEE: ['Kinematics', 'Thermodynamics', 'Electromagnetism', 'Optics', 'Modern Physics'],\n    NEET: ['Cell Structure', 'Genetics', 'Human Physiology', 'Ecology', 'Biomolecules'],\n    UPSC: ['Ancient Indian History', 'Medieval India', 'Indian Polity', 'Geography', 'Economy'],\n  },\n  'Skill Building': {\n    Coding: ['JavaScript Basics', 'React Fundamentals', 'API Integration', 'Database Design', 'Node.js'],\n    Design: ['Design Principles', 'Color Theory', 'Typography', 'UI/UX Basics', 'Figma'],\n    'Video Editing': ['Premiere Pro Basics', 'Color Grading', 'Effects', 'Audio', 'Export'],\n  },\n};\n\nconst CHAPTER_DATA: Record<string, Record<string, string[]>> = {\n  English: {\n    'Class 1': ['Neha\\'s Alarm Clock', 'A Happy Child', 'Three Little Pigs'],\n    'Class 2': ['First Day at School', 'Haldiram\\'s', 'The Paddle-Pool'],\n    'Class 3': ['The Magic Garden', 'Nina and the Baby Sparrows', 'Enormous Turnip'],\n    'Class 4': ['Wake Up!', 'Noses', 'Run!'],\n    'Class 5': ['Wonderful Waste!', 'Flying Together', 'Around the World'],\n  },\n  Hindi: {\n    'Class 1': ['‡§ù‡•Ç‡§†‡§æ ‡§∏‡§æ‡§•‡•Ä', '‡§Ü‡§Æ ‡§ï‡•Ä ‡§ï‡§π‡§æ‡§®‡•Ä', '‡§™‡§§‡§Ç‡§ó'],\n    'Class 2': ['‡§ä‡§Å‡§ü ‡§ö‡§≤‡§æ', '‡§¨‡•ã‡§≤‡•ã ‡§≠‡§æ‡§à', '‡§Æ‡•ç‡§Ø‡§æ‡§ä‡§Å'],\n    'Class 3': ['‡§ï‡§ï‡•ç‡§ï‡•Ç', '‡§∂‡•á‡§ñ‡•Ä‡§¨‡§æ‡§ú‡§º ‡§Æ‡§ï‡•ç‡§ñ‡•Ä', '‡§ö‡§æ‡§Ç‡§¶ ‡§∏‡•á ‡§§‡•ã‡§°‡§º‡•Ä ‡§≤‡§ï‡§°‡§º‡•Ä'],\n    'Class 4': ['‡§™‡§æ‡§™‡§æ ‡§ú‡§¨ ‡§¨‡§ö‡•ç‡§ö‡•á ‡§•‡•á', '‡§¶‡§æ‡§® ‡§ï‡§æ ‡§π‡§ø‡§∏‡§æ‡§¨', '‡§•‡§™‡•ç‡§™‡§°‡§º ‡§∞‡•ã‡§ü‡•Ä ‡§ñ‡§æ‡§ì'],\n    'Class 5': ['‡§∞‡§æ‡§ñ ‡§ï‡•Ä ‡§∞‡§∏‡•ç‡§∏‡•Ä', '‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§§‡•ç‡§Ø‡•ã‡§π‡§æ‡§∞', '‡§¨‡§ø‡§∏‡•ç‡§ï‡•Å‡§ü'],\n  },\n  Maths: {\n    'Class 1': ['Shapes and Space', 'Numbers from One to Nine', 'Addition'],\n    'Class 2': ['What is Long, What is Round?', 'Counting in Groups', 'How Much Can You Carry?'],\n    'Class 3': ['Where to Look From?', 'Fun with Numbers', 'Give and Take'],\n    'Class 4': ['Building with Bricks', 'Long and Short', 'A Trip to Bhopal'],\n    'Class 5': ['The Fish Tale', 'Shapes and Angles', 'How Many Squares?'],\n  },\n  EVS: {\n    'Class 1': ['Living and Non-living Things', 'My Body', 'Our Family'],\n    'Class 2': ['Our Food', 'Clothes', 'Housing'],\n    'Class 3': ['Poonam\\'s Day out', 'The Plant Fairy', 'Water O\\' Water!'],\n    'Class 4': ['Going to School', 'Ear to Ear', 'A Day with Nandu'],\n    'Class 5': ['Super Senses', 'A Snake Charmer\\'s Story', 'From Tasting to Digesting'],\n  },\n  Mathematics: {\n    'Class 6': ['Knowing Our Numbers', 'Whole Numbers', 'Playing with Numbers'],\n    'Class 7': ['Integers', 'Fractions and Decimals', 'Data Handling'],\n    'Class 8': ['Rational Numbers', 'Linear Equations in One Variable', 'Understanding Quadrilaterals'],\n    'Class 9': ['Number Systems', 'Polynomials', 'Coordinate Geometry'],\n    'Class 10': ['Real Numbers', 'Polynomials', 'Pair of Linear Equations in Two Variables'],\n  },\n  Science: {\n    'Class 6': ['Food: Where Does It Come From?', 'Components of Food', 'Fibre to Fabric'],\n    'Class 7': ['Nutrition in Plants', 'Nutrition in Animals', 'Fibre to Fabric'],\n    'Class 8': ['Crop Production and Management', 'Microorganisms: Friend and Foe', 'Synthetic Fibres and Plastics'],\n    'Class 9': ['Matter in Our Surroundings', 'Is Matter Around Us Pure?', 'Atoms and Molecules'],\n    'Class 10': ['Chemical Reactions and Equations', 'Acids, Bases and Salts', 'Metals and Non-metals'],\n  },\n  'Social Science': {\n    'Class 6': ['History: What, Where, How and When?', 'Geography: The Earth in the Solar System', 'Civics: Understanding Diversity'],\n    'Class 7': ['History: Tracing Changes Through a Thousand Years', 'Geography: Environment', 'Civics: On Equality'],\n    'Class 8': ['History: How, When and Where', 'Geography: Resources', 'Civics: The Indian Constitution'],\n    'Class 9': ['History: The French Revolution', 'Geography: India - Size and Location', 'Civics: What is Democracy? Why Democracy?'],\n    'Class 10': ['History: The Rise of Nationalism in Europe', 'Geography: Resources and Development', 'Civics: Power Sharing'],\n  },\n  Physics: {\n    'Class 11': ['Physical World', 'Units and Measurements', 'Motion in a Straight Line', 'Laws of Motion', 'Work, Energy and Power'],\n    'Class 12': ['Electric Charges and Fields', 'Electrostatic Potential', 'Current Electricity', 'Moving Charges', 'Magnetism'],\n  },\n  Chemistry: {\n    'Class 11': ['Some Basic Concepts of Chemistry', 'Structure of Atom', 'Classification of Elements', 'Chemical Bonding', 'Thermodynamics'],\n    'Class 12': ['Solutions', 'Electrochemistry', 'Surface Chemistry', 'd-block Elements', 'Alcohols and Phenols'],\n  },\n  Biology: {\n    'Class 11': ['The Living World', 'Biological Classification', 'Plant Kingdom', 'Animal Kingdom', 'Morphology'],\n    'Class 12': ['Reproduction in Organisms', 'Genetics', 'Evolution', 'Ecology', 'Biotechnology'],\n  },\n  Economics: {\n    'Class 11': ['Introduction to Economics', 'Collection of Data', 'Organisation of Data', 'Presentation of Data', 'Measures of Central Tendency'],\n    'Class 12': ['Consumer Equilibrium', 'Demand', 'Elasticity', 'Production', 'Cost'],\n  },\n  Accounts: {\n    'Class 11': ['Introduction to Accounting', 'Theory Base of Accounting', 'Recording of Transactions', 'Bank Reconciliation', 'Depreciation'],\n    'Class 12': ['Accounting for Partnership', 'Reconstitution of Partnership', 'Analysis of Financial Statements', 'Cash Flow Statement'],\n  },\n  'Business Studies': {\n    'Class 11': ['Nature and Significance of Management', 'Principles of Management', 'Business Environment', 'Planning', 'Organising'],\n    'Class 12': ['Nature and Significance of Principles', 'Directing', 'Controlling', 'Financial Markets', 'Marketing'],\n  },\n  History: {\n    'Class 11': ['From the Beginning of Time', 'Writing and City Life', 'An Empire Across Two Continents', 'The Central Islamic Lands', 'Nomadic Empires'],\n    'Class 12': ['Bricks, Beads and Bones', 'Kings, Farmers and Towns', 'Trade and Territory', 'Thinkers, Beliefs and Buildings', 'History of the Vijayanagara'],\n  },\n  Geography: {\n    'Class 11': ['Geography as a Discipline', 'The Earth', 'Landforms', 'Climate', 'Oceans'],\n    'Class 12': ['Human Geography', 'Migration', 'Human Development', 'Human Settlements', 'Land Resources'],\n  },\n  'Political Science': {\n    'Class 11': ['Political Theory: An Introduction', 'Freedom', 'Equality', 'Social Justice', 'Rights'],\n    'Class 12': ['Concept of Constitution', 'Rights in the Indian Constitution', 'Organs of Government', 'State Government', 'Local Government'],\n  },\n};\n\nexport interface LessonContent {\n  title: string;\n  icon: string;\n  bulletPoints: string[];\n  paragraphs: string[];\n}\n\nconst LESSON_DATA: Record<string, any> = {\n  'Class 10': {\n    Science: {\n      'Chemical Reactions and Equations': [\n        {\n          title: 'What is a Chemical Reaction?',\n          icon: '‚öóÔ∏è',\n          bulletPoints: [\n            'A chemical reaction is a process where substances change into different substances',\n            'The original substances are called reactants, and the new substances are products',\n            'Chemical reactions involve breaking and forming of chemical bonds',\n            'Signs of a chemical reaction include change in color, gas production, or temperature change',\n          ],\n          paragraphs: [\n            'A chemical reaction is a process that leads to the chemical transformation of one set of chemical substances to another. When a chemical reaction occurs, the atoms that make up the reactants are rearranged to form different products. For example, when you burn wood, the carbon in the wood reacts with oxygen in the air to produce carbon dioxide and water vapor. This is why you see flames and feel heat - it is energy being released during the reaction.',\n          ],\n        },\n        {\n          title: 'Acids, Bases and Salts',\n          icon: 'üß™',\n          bulletPoints: [\n            'Acids taste sour and turn blue litmus paper red',\n            'Bases taste bitter and feel slippery, turning red litmus blue',\n            'Salts are formed when acids react with bases',\n            'pH scale measures how acidic or basic a solution is',\n          ],\n          paragraphs: [\n            'Acids, bases, and salts are fundamental chemical compounds that we encounter in our daily lives. Lemon juice, vinegar, and stomach acid are examples of acids. They contain hydrogen ions (H+) that give them their characteristic sour taste. Bases like soap, baking soda, and bleach contain hydroxide ions (OH-) and feel slippery to the touch. When an acid and base react together, they neutralize each other and form a salt and water.',\n          ],\n        },\n      ],\n      'Acids, Bases and Salts': [\n        {\n          title: 'Understanding Acids',\n          icon: 'üçã',\n          bulletPoints: [\n            'Acids are substances that release hydrogen ions (H+) in water',\n            'They have a sour taste and pH less than 7',\n            'Common acids include hydrochloric acid, sulfuric acid, and citric acid',\n            'Acids can be organic or inorganic',\n          ],\n          paragraphs: [\n            'Acids are an essential part of chemistry and everyday life. In the kitchen, you find acids in lemon juice (citric acid), vinegar (acetic acid), and tomatoes (tartaric acid). In laboratories, strong acids like hydrochloric acid and sulfuric acid are used for various purposes. Understanding acids helps us understand how they react with other substances and their importance in industry and medicine.',\n          ],\n        },\n      ],\n    },\n    Mathematics: {\n      'Real Numbers': [\n        {\n          title: 'Real Numbers',\n          icon: 'üî¢',\n          bulletPoints: [\n            'Real numbers include both rational and irrational numbers',\n            'Rational numbers can be expressed as fractions',\n            'Irrational numbers cannot be expressed as simple fractions',\n            'Every real number has a decimal representation',\n          ],\n          paragraphs: [\n            'Real numbers form the foundation of mathematics and include all the numbers we use in everyday life. They include whole numbers like 5, fractions like 3/4, and special numbers like œÄ (pi) and ‚àö2 (square root of 2) that cannot be written as simple fractions. Understanding real numbers is essential for solving equations and understanding more advanced mathematical concepts.',\n          ],\n        },\n      ],\n    },\n  },\n  'Class 12+': {\n    'Competitive Exams': {\n      JEE: {\n        'Kinematics': {\n          title: 'Kinematics',\n          icon: 'üìê',\n          bulletPoints: [\n            'Kinematics describes motion without considering its causes',\n            'Key concepts include displacement, velocity, and acceleration',\n            'Equations of motion relate these quantities',\n            'Projectile motion combines horizontal and vertical motion',\n          ],\n          paragraphs: [\n            'Kinematics is the branch of mechanics that describes the motion of objects without considering the forces that cause the motion. It is fundamental to understanding physics and is heavily tested in JEE. The three equations of motion (v = u + at, s = ut + ¬Ωat¬≤, v¬≤ = u¬≤ + 2as) form the backbone of this chapter and can solve most kinematics problems.',\n          ],\n        },\n        'Thermodynamics': {\n          title: 'Thermodynamics',\n          icon: 'üå°Ô∏è',\n          bulletPoints: [\n            'Thermodynamics deals with heat, work, and energy transfer',\n            'Zeroth law establishes thermal equilibrium',\n            'First law is conservation of energy',\n            'Second law defines entropy and direction of processes',\n          ],\n          paragraphs: [\n            'Thermodynamics is the study of relationships between heat, work, temperature, and energy. The laws of thermodynamics govern everything from engine efficiency to the behavior of the universe. The first law states that energy cannot be created or destroyed, only transformed. The second law introduces entropy, explaining why some processes happen naturally while others require external energy.',\n          ],\n        },\n        'Electromagnetism': {\n          title: 'Electromagnetism',\n          icon: '‚ö°',\n          bulletPoints: [\n            'Electric charges create electric and magnetic fields',\n            'Maxwell\\'s equations unify electricity and magnetism',\n            'Electromagnetic waves include light, radio, and X-rays',\n            'Lorentz force describes charged particle motion in fields',\n          ],\n          paragraphs: [\n            'Electromagnetism is one of the four fundamental forces of nature and is responsible for light, electricity, and magnetism. James Maxwell unified electricity and magnetism into a single theory, predicting the existence of electromagnetic waves that travel at the speed of light. This chapter covers electric fields, magnetic fields, electromagnetic induction, and alternating currents.',\n          ],\n        },\n      },\n      NEET: {\n        'Cell Structure': {\n          title: 'Cell Structure',\n          icon: 'üî¨',\n          bulletPoints: [\n            'Cell is the basic unit of life',\n            'Prokaryotic cells lack a nucleus, eukaryotic cells have one',\n            'Organelles have specific functions within the cell',\n            'Cell membrane controls what enters and exits',\n          ],\n          paragraphs: [\n            'The cell is the fundamental structural and functional unit of all living organisms. Cells are often called \"building blocks of life.\" Prokaryotic cells, found in bacteria, are simpler and lack a defined nucleus. Eukaryotic cells, found in plants and animals, have complex structures including a nucleus that houses DNA, mitochondria for energy production, and endoplasmic reticulum for protein synthesis.',\n          ],\n        },\n        'Genetics': {\n          title: 'Genetics',\n          icon: 'üß¨',\n          bulletPoints: [\n            'DNA stores genetic information in genes',\n            'Mendel\\'s laws explain inheritance patterns',\n            'Chromosomes carry genes in cells',\n            'Mutations can change genetic information',\n          ],\n          paragraphs: [\n            'Genetics is the branch of biology that studies genes, heredity, and variation in living organisms. Gregor Mendel, known as the father of genetics, discovered the fundamental laws of inheritance through his pea plant experiments. Understanding genetics is crucial for NEET as it explains how traits are passed from parents to offspring and how genetic disorders occur.',\n          ],\n        },\n      },\n      UPSC: {\n        'Ancient Indian History': {\n          title: 'Ancient Indian History',\n          icon: 'üèõÔ∏è',\n          bulletPoints: [\n            'Indus Valley Civilization was urban and advanced',\n            'Vedic period saw the composition of Vedas',\n            'Mauryan Empire was India\\'s first major empire',\n            'Gupta period is called the Golden Age of India',\n          ],\n          paragraphs: [\n            'Ancient Indian History covers the period from the Stone Age to the 8th century CE. The Indus Valley Civilization (3300-1300 BCE) was one of the world\\'s earliest urban cultures with sophisticated town planning. The Vedic period saw the composition of the Rigveda and other sacred texts. The Mauryan Empire under Ashoka unified most of India, while the Gupta period witnessed remarkable achievements in science, mathematics, and arts.',\n          ],\n        },\n      },\n    },\n    'Skill Building': {\n      Coding: {\n        'JavaScript Basics': {\n          title: 'JavaScript Basics',\n          icon: 'üíª',\n          bulletPoints: [\n            'JavaScript is the language of the web',\n            'Variables store data using let, const, and var',\n            'Functions are reusable blocks of code',\n            'Objects store data as key-value pairs',\n          ],\n          paragraphs: [\n            'JavaScript is the programming language that makes websites interactive and dynamic. Originally created for web browsers, it now runs on servers, mobile devices, and even robots. Understanding JavaScript fundamentals like variables, functions, and objects is essential before moving to frameworks like React. JavaScript\\'s flexible nature allows you to build everything from simple calculators to complex web applications.',\n          ],\n        },\n        'React Fundamentals': {\n          title: 'React Fundamentals',\n          icon: '‚öõÔ∏è',\n          bulletPoints: [\n            'React uses components to build user interfaces',\n            'JSX combines HTML and JavaScript',\n            'State manages dynamic data in components',\n            'Props pass data between components',\n          ],\n          paragraphs: [\n            'React is a popular JavaScript library developed by Facebook for building user interfaces. It uses a component-based architecture where reusable UI elements manage their own state. JSX allows you to write HTML-like code directly in JavaScript, making it easier to visualize the UI structure. Understanding the component lifecycle and state management is crucial for building dynamic web applications.',\n          ],\n        },\n      },\n      Design: {\n        'Design Principles': {\n          title: 'Design Principles',\n          icon: 'üé®',\n          bulletPoints: [\n            'Balance distributes visual weight evenly',\n            'Contrast makes elements stand out',\n            'Alignment creates visual connections',\n            'Hierarchy guides the viewer\\'s attention',\n          ],\n          paragraphs: [\n            'Design principles are fundamental guidelines that help create visually appealing and functional designs. Balance can be symmetrical (equal on both sides) or asymmetrical (different elements that balance each other). Contrast helps important elements stand out and improves readability. Good alignment creates a sense of order and professionalism, while hierarchy ensures users can easily understand the most important information first.',\n          ],\n        },\n        'Color Theory': {\n          title: 'Color Theory',\n          icon: 'üåà',\n          bulletPoints: [\n            'Primary colors combine to create secondary colors',\n            'Color wheels show color relationships',\n            'Warm colors feel energetic, cool colors feel calm',\n            'Color psychology affects user emotions',\n          ],\n          paragraphs: [\n            'Color theory is the science and art of using colors. The color wheel shows primary (red, yellow, blue), secondary (orange, green, purple), and tertiary colors. Understanding color harmony helps create pleasing combinations. Warm colors like red and orange evoke energy and urgency, while cool colors like blue and green create calm and trust. Choosing the right colors for your design can significantly impact user experience and brand perception.',\n          ],\n        },\n      },\n    },\n  },\n};\n\nexport function getSubjectsForClass(className: string, stream?: string): string[] {\n  const classNum = parseInt(className.replace('Class ', ''));\n\n  if (classNum >= 1 && classNum <= 5) {\n    return CLASS_1_5_SUBJECTS;\n  } else if (classNum >= 6 && classNum <= 10) {\n    return CLASS_6_10_SUBJECTS;\n  } else if (classNum === 11 || classNum === 12) {\n    if (stream && STREAM_SUBJECTS[stream]) {\n      return STREAM_SUBJECTS[stream];\n    }\n    return ['Science', 'Commerce', 'Arts'];\n  } else if (className === 'Class 12+') {\n    return ['Competitive Exams', 'Skill Building'];\n  }\n\n  return [];\n}\n\nexport function getChaptersForSubject(className: string, subject: string): string[] {\n  if (className === 'Class 12+') {\n    const category = PATHWAY_DATA[subject as keyof typeof PATHWAY_DATA];\n    if (category) {\n      const chapters = Object.keys(category);\n      return chapters.length > 0 ? chapters : ['Select a pathway'];\n    }\n    return ['Select a pathway'];\n  }\n\n  if (['Science', 'Commerce', 'Arts'].includes(subject)) {\n    return ['Select a stream'];\n  }\n\n  if (subject === 'Select a stream') {\n    return ['Select a stream'];\n  }\n\n  const chapters = CHAPTER_DATA[subject]?.[className] || [];\n\n  if (chapters.length === 0) {\n    const streamSubjects = STREAM_SUBJECTS[subject as keyof typeof STREAM_SUBJECTS];\n    if (streamSubjects) {\n      return streamSubjects;\n    }\n    return ['Chapters (Coming Soon)'];\n  }\n\n  return chapters;\n}\n\nexport function getPathwaysForCategory(className: string, category: string): string[] {\n  if (className === 'Class 12+') {\n    return PATHWAY_DATA[category as keyof typeof PATHWAY_DATA] \n      ? Object.keys(PATHWAY_DATA[category as keyof typeof PATHWAY_DATA])\n      : [];\n  }\n  return [];\n}\n\nexport function getPathwayChapters(\n  category: string,\n  pathway: string\n): string[] {\n  return PATHWAY_DATA[category as keyof typeof PATHWAY_DATA]?.[pathway] || [];\n}\n\nexport function getChapterLessons(\n  className: string,\n  subject: string,\n  chapter: string\n): LessonContent[] {\n  const classData = LESSON_DATA[className];\n  if (!classData) {\n    return getDefaultLesson(chapter);\n  }\n\n  const subjectData = classData[subject];\n  if (!subjectData) {\n    return getDefaultLesson(chapter);\n  }\n\n  const chapterData = subjectData[chapter];\n  if (Array.isArray(chapterData)) {\n    return chapterData as LessonContent[];\n  }\n\n  const pathwayData = chapterData as Record<string, LessonContent>;\n  if (pathwayData) {\n    const firstKey = Object.keys(pathwayData)[0];\n    if (firstKey) {\n      return [pathwayData[firstKey]];\n    }\n  }\n\n  return getDefaultLesson(chapter);\n}\n\nfunction getDefaultLesson(chapter: string): LessonContent[] {\n  return [\n    {\n      title: `${chapter} - Introduction`,\n      icon: 'üìñ',\n      bulletPoints: [\n        'This chapter introduces key concepts in this subject',\n        'Understanding these fundamentals is essential for further learning',\n        'Practice problems will help reinforce your understanding',\n      ],\n      paragraphs: [\n        `Welcome to the chapter on ${chapter}. This material is designed to help you understand the fundamental concepts that form the basis of this subject. Take your time to read through the content carefully and try to connect new ideas with things you already know.`,\n      ],\n    },\n  ];\n}\n\nexport function getPathwayCategories() {\n  return PATHWAY_CATEGORIES;\n}\n\nexport function needsStreamSelection(className: string): boolean {\n  const classNum = parseInt(className.replace('Class ', ''));\n  return (classNum === 11 || classNum === 12) && className !== 'Class 12+';\n}\n\n// Smarty's Knowledge Base - Comprehensive educational content for AI responses\nexport const KNOWLEDGE_BASE = {\n  // General Study Tips\n  studyTips: [\n    \"Break your study sessions into 25-minute chunks with 5-minute breaks (Pomodoro technique)\",\n    \"Active recall is more effective than passive reading - test yourself often\",\n    \"Spaced repetition helps you remember information long-term\",\n    \"Teaching others what you've learned reinforces your own understanding\",\n    \"Get enough sleep - your brain consolidates learning while you sleep\",\n    \"Stay hydrated and eat healthy snacks for better focus\",\n    \"Create a dedicated study space free from distractions\",\n    \"Review material within 24 hours of learning it for better retention\",\n  ],\n  \n  // Time Management\n  timeManagement: [\n    \"Use a planner or calendar to schedule study sessions\",\n    \"Tackle difficult subjects when you're most alert\",\n    \"Set specific goals for each study session\",\n    \"Prioritize topics based on exam weight and your weak areas\",\n    \"Balance study time across all subjects, not just favorites\",\n    \"Leave buffer time for unexpected challenges\",\n    \"Review weekly to stay on top of cumulative material\",\n  ],\n\n  // Exam Preparation\n  examPrep: [\n    \"Start preparing weeks before the exam, not days\",\n    \"Practice with past papers to understand the exam format\",\n    \"Focus on understanding concepts, not just memorizing\",\n    \"Create summary sheets for quick revision\",\n    \"Form study groups for discussion and peer learning\",\n    \"Take care of yourself the night before - rest is crucial\",\n    \"Read all questions carefully before answering\",\n    \"Manage your time during the exam wisely\",\n  ],\n\n  // Common Misconceptions\n  misconceptions: {\n    science: [\n      \"Myth: Lightning never strikes the same place twice. Fact: It can and does!\",\n      \"Myth: The Great Wall of China is visible from space. Fact: It's barely visible!\",\n      \"Myth: Humans only use 10% of their brains. Fact: We use all of it!\",\n      \"Myth: Venomous snakes are always deadly. Fact: Most are not harmful to humans.\",\n    ],\n    math: [\n      \"Myth: Math is about memorizing formulas. Fact: It's about understanding patterns!\",\n      \"Myth: Some people are 'math people' and others aren't. Fact: Anyone can learn math with practice!\",\n      \"Myth: You don't need math in real life. Fact: We use math constantly, often without noticing.\",\n    ],\n    history: [\n      \"Myth: Napoleon was very short. Fact: He was average height for his time!\",\n      \"Myth: Vikings wore horned helmets. Fact: That's a modern invention!\",\n      \"Myth: The Middle Ages were called the 'Dark Ages' because it was dark. Fact: It referred to lack of historical records!\",\n    ],\n  },\n\n  // Career Guidance\n  careerPaths: {\n    science: [\n      \"Engineering - Design and build things that solve problems\",\n      \"Medicine - Help people stay healthy and treat illnesses\",\n      \"Research - Discover new knowledge about our world\",\n      \"Environmental Science - Protect our planet\",\n      \"Data Science - Analyze information to find patterns\",\n    ],\n    commerce: [\n      \"Finance - Manage money and investments\",\n      \"Marketing - Help products reach the right people\",\n      \"Accounting - Track and organize financial records\",\n      \"Business - Lead and grow organizations\",\n      \"Economics - Understand how economies work\",\n    ],\n    arts: [\n      \"Teaching - Shape young minds and inspire learning\",\n      \"Journalism - Tell important stories to the world\",\n      \"Design - Create beautiful and functional things\",\n      \"Law - Help people navigate the legal system\",\n      \"Psychology - Understand human behavior and mental health\",\n    ],\n  },\n};\n\n// Helper function to get study tip\nexport function getStudyTip(): string {\n  const tips = KNOWLEDGE_BASE.studyTips;\n  return tips[Math.floor(Math.random() * tips.length)];\n}\n\n// Helper function to get exam prep tip\nexport function getExamPrepTip(): string {\n  const tips = KNOWLEDGE_BASE.examPrep;\n  return tips[Math.floor(Math.random() * tips.length)];\n}\n\n// Helper function to get misconception for a subject\nexport function getMisconception(subject: string): string {\n  const key = subject.toLowerCase() as keyof typeof KNOWLEDGE_BASE.misconceptions;\n  const misconceptions = KNOWLEDGE_BASE.misconceptions[key] || KNOWLEDGE_BASE.misconceptions.science;\n  return misconceptions[Math.floor(Math.random() * misconceptions.length)];\n}\n\n// Helper function to get career paths for a stream\nexport function getCareerPaths(stream: string): string[] {\n  const key = stream.toLowerCase() as keyof typeof KNOWLEDGE_BASE.careerPaths;\n  return KNOWLEDGE_BASE.careerPaths[key] || [];\n}\n\n// Subject explanations for Smarty's knowledge base\nexport const SUBJECT_EXPLANATIONS = {\n  Mathematics: \"Mathematics is the study of numbers, quantities, shapes, and patterns. It develops logical thinking and problem-solving skills that are useful in many fields!\",\n  Physics: \"Physics is the science of matter, energy, and how they interact. It explains everything from tiny atoms to entire galaxies!\",\n  Chemistry: \"Chemistry is the study of substances - what they're made of, how they change, and how they interact. It's everywhere in daily life!\",\n  Biology: \"Biology is the study of living things - from tiny cells to entire ecosystems. It helps us understand life itself!\",\n  \"Social Science\": \"Social Science studies human society and relationships. It includes history, geography, civics, and economics.\",\n  English: \"English develops your reading, writing, and communication skills. It's essential for expressing ideas clearly!\",\n  Hindi: \"Hindi is one of India's major languages. Learning it opens doors to literature, culture, and communication!\",\n  EVS: \"EVS (Environmental Studies) helps us understand the world around us - nature, people, and how we all connect!\",\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/constants/spacing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/constants/theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/context/ChatContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/data/avatarStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/data/booksData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/data/breakActivities.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/data/majorExams.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCurrentYear' is assigned a value but never used.","line":4,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Exam } from '@/types/productivity';\n\n// Current year - dynamically adjust based on current date\nconst getCurrentYear = () => new Date().getFullYear();\nconst getNextYear = () => new Date().getFullYear() + 1;\n\nexport const majorExams: Exam[] = [\n  {\n    id: 'cbse-10',\n    name: 'CBSE Class 10 Board',\n    subject: 'All Subjects',\n    date: `${getNextYear()}-03-15`,\n    dateDisplay: 'March 15, 2025',\n    color: 'yellow',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'cbse-12',\n    name: 'CBSE Class 12 Board',\n    subject: 'All Subjects',\n    date: `${getNextYear()}-02-15`,\n    dateDisplay: 'February 15, 2025',\n    color: 'yellow',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'jee-main-1',\n    name: 'JEE Main Session 1',\n    subject: 'Physics, Chemistry, Maths',\n    date: `${getNextYear()}-01-24`,\n    dateDisplay: 'January 24, 2025',\n    color: 'green',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'jee-main-2',\n    name: 'JEE Main Session 2',\n    subject: 'Physics, Chemistry, Maths',\n    date: `${getNextYear()}-04-04`,\n    dateDisplay: 'April 4, 2025',\n    color: 'yellow',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'jee-main-3',\n    name: 'JEE Main Session 3',\n    subject: 'Physics, Chemistry, Maths',\n    date: `${getNextYear()}-06-05`,\n    dateDisplay: 'June 5, 2025',\n    color: 'green',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'neet',\n    name: 'NEET UG',\n    subject: 'Physics, Chemistry, Biology',\n    date: `${getNextYear()}-05-05`,\n    dateDisplay: 'May 5, 2025',\n    color: 'yellow',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'bitsat',\n    name: 'BITSAT',\n    subject: 'Physics, Chemistry, Maths',\n    date: `${getNextYear()}-05-20`,\n    dateDisplay: 'May 20, 2025',\n    color: 'green',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'viteee',\n    name: 'VITEEE',\n    subject: 'Physics, Chemistry, Maths',\n    date: `${getNextYear()}-04-20`,\n    dateDisplay: 'April 20, 2025',\n    color: 'green',\n    completed: false,\n    isPrePopulated: true,\n  },\n  {\n    id: 'sat',\n    name: 'SAT',\n    subject: 'Reading, Writing, Maths',\n    date: `${getNextYear()}-03-08`,\n    dateDisplay: 'March 8, 2025',\n    color: 'green',\n    completed: false,\n    isPrePopulated: true,\n  },\n];\n\n// Helper function to get days remaining for an exam\nexport const getDaysRemaining = (examDate: string): number => {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const exam = new Date(examDate);\n  exam.setHours(0, 0, 0, 0);\n  const diffTime = exam.getTime() - today.getTime();\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  return diffDays;\n};\n\n// Helper function to determine urgency color\nexport const getUrgencyColor = (daysRemaining: number): 'green' | 'yellow' | 'red' => {\n  if (daysRemaining <= 7) return 'red';\n  if (daysRemaining <= 30) return 'yellow';\n  return 'green';\n};\n\n// Helper function to sort exams by date\nexport const sortExamsByDate = (exams: Exam[]): Exam[] => {\n  return [...exams]\n    .filter((exam) => !exam.completed)\n    .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n};\n\n// Get upcoming exams (not completed, in the future)\nexport const getUpcomingExams = (exams: Exam[], limit: number = 3): Exam[] => {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  \n  return sortExamsByDate(exams)\n    .filter((exam) => new Date(exam.date) >= today)\n    .slice(0, limit);\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/data/seniorData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/AboutScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/AnalyticsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/AvatarStoreScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentXP' is assigned a value but never used.","line":29,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2973,2976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2973,2976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":99,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3053,3056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3053,3056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5352,5355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5352,5355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  Alert,\n  SafeAreaView,\n  FlatList,\n} from 'react-native';\nimport { useTheme } from '@/components/ThemeContext';\nimport { useUserStore } from '@/store/userStore';\nimport { useXPStore } from '@/store/xpStore';\nimport { \n  AVATAR_STORE, \n  AvatarData, \n  getAvatarsByCategory,\n  isAvatarUnlocked \n} from '@/data/avatarStore';\nimport AvatarCard from '@/components/AvatarCard';\nimport CoinDisplay from '@/components/CoinDisplay';\nimport { FontSizes, FontWeights, Spacing, BorderRadius } from '@/constants/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nexport default function AvatarStoreScreen() {\n  const { colors } = useTheme();\n  const { gamificationData, selectedAvatar } = useUserStore();\n  const { currentXP } = useXPStore();\n  const [selectedCategory, setSelectedCategory] = useState<'all' | AvatarData['category']>('all');\n\n  const categories: Array<{ id: string; name: string; icon: string }> = [\n    { id: 'all', name: 'All', icon: 'apps' },\n    { id: 'robot', name: 'Robots', icon: 'robot' },\n    { id: 'animal', name: 'Animals', icon: 'paw' },\n    { id: 'character', name: 'Characters', icon: 'account' },\n    { id: 'fantasy', name: 'Fantasy', icon: 'magic-wand' },\n  ];\n\n  const getFilteredAvatars = () => {\n    if (selectedCategory === 'all') {\n      return AVATAR_STORE;\n    }\n    return getAvatarsByCategory(selectedCategory);\n  };\n\n  const getAvatarStatus = (avatar: AvatarData) => {\n    const isUnlocked = isAvatarUnlocked(\n      avatar.id, \n      useXPStore.getState().getRank().name,\n      { totalLessonsRead: 0, totalQuizzesCompleted: 0 }\n    ) || gamificationData.unlockedAvatars.includes(avatar.id);\n    \n    const isPurchased = gamificationData.purchasedAvatars.includes(avatar.id);\n    \n    return { isUnlocked, isPurchased };\n  };\n\n  const handleAvatarSelect = (avatar: AvatarData) => {\n    Alert.alert(\n      'Avatar Selected!',\n      `${avatar.name} is now your active avatar.`,\n      [{ text: 'Great!' }]\n    );\n  };\n\n  const renderAvatarItem = ({ item }: { item: AvatarData }) => {\n    const { isUnlocked, isPurchased } = getAvatarStatus(item);\n    const isSelected = selectedAvatar === item.id;\n\n    return (\n      <AvatarCard\n        avatar={item}\n        isUnlocked={isUnlocked}\n        isPurchased={isPurchased}\n        isSelected={isSelected}\n        onPurchase={handleAvatarSelect}\n        onSelect={handleAvatarSelect}\n      />\n    );\n  };\n\n  const renderCategoryButton = (category: typeof categories[0]) => {\n    const isSelected = selectedCategory === category.id;\n    \n    return (\n      <TouchableOpacity\n        key={category.id}\n        style={[\n          styles.categoryButton,\n          { \n            backgroundColor: isSelected ? colors.primary : colors.cardBackground,\n            borderColor: colors.primary \n          }\n        ]}\n        onPress={() => setSelectedCategory(category.id as any)}\n      >\n        <MaterialCommunityIcons \n          name={category.icon as any} \n          size={20} \n          color={isSelected ? 'white' : colors.text} \n        />\n        <Text style={[\n          styles.categoryButtonText,\n          { color: isSelected ? 'white' : colors.text }\n        ]}>\n          {category.name}\n        </Text>\n      </TouchableOpacity>\n    );\n  };\n\n  const styles = getStyles(colors);\n\n  return (\n    <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n      {/* Header */}\n      <View style={styles.header}>\n        <Text style={[styles.title, { color: colors.text }]}>\n          Avatar Store\n        </Text>\n        <Text style={[styles.subtitle, { color: colors.textSecondary }]}>\n          Customize your learning companion\n        </Text>\n        \n        {/* Coin Balance */}\n        <View style={styles.balanceContainer}>\n          <CoinDisplay size=\"medium\" animated={true} />\n        </View>\n      </View>\n\n      {/* Categories */}\n      <ScrollView \n        horizontal \n        showsHorizontalScrollIndicator={false}\n        style={styles.categoryContainer}\n        contentContainerStyle={styles.categoryContent}\n      >\n        {categories.map(renderCategoryButton)}\n      </ScrollView>\n\n      {/* Avatar Grid */}\n      <FlatList\n        data={getFilteredAvatars()}\n        renderItem={renderAvatarItem}\n        keyExtractor={(item) => item.id}\n        style={styles.avatarList}\n        contentContainerStyle={styles.avatarListContent}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={\n          <View style={styles.emptyState}>\n            <MaterialCommunityIcons name=\"emoticon-sad-outline\" size={64} color={colors.textSecondary} />\n            <Text style={[styles.emptyStateText, { color: colors.textSecondary }]}>\n              No avatars found in this category\n            </Text>\n          </View>\n        }\n      />\n\n      {/* Bottom Info */}\n      <View style={[styles.infoContainer, { backgroundColor: colors.cardBackground }]}>\n        <MaterialCommunityIcons name=\"information-outline\" size={20} color={colors.textSecondary} />\n        <Text style={[styles.infoText, { color: colors.textSecondary }]}>\n          Earn SmartCoins by completing lessons and quizzes to unlock new avatars!\n        </Text>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst getStyles = (colors: any) => StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    padding: Spacing.lg,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    marginBottom: 4,\n  },\n  subtitle: {\n    fontSize: FontSizes.sm,\n    marginBottom: Spacing.md,\n  },\n  balanceContainer: {\n    marginTop: Spacing.sm,\n  },\n  categoryContainer: {\n    maxHeight: 60,\n  },\n  categoryContent: {\n    paddingHorizontal: Spacing.lg,\n    paddingVertical: Spacing.sm,\n  },\n  categoryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.lg,\n    borderWidth: 1,\n    marginRight: Spacing.sm,\n  },\n  categoryButtonText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.bold,\n    marginLeft: 6,\n  },\n  avatarList: {\n    flex: 1,\n  },\n  avatarListContent: {\n    padding: Spacing.lg,\n    paddingTop: 0,\n  },\n  emptyState: {\n    alignItems: 'center',\n    paddingVertical: Spacing.xl,\n  },\n  emptyStateText: {\n    fontSize: FontSizes.md,\n    marginTop: Spacing.md,\n    textAlign: 'center',\n  },\n  infoContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: colors.lightGray,\n  },\n  infoText: {\n    flex: 1,\n    fontSize: FontSizes.sm,\n    marginLeft: Spacing.sm,\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/ExamDetailsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showAddModal' is assigned a value but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadExam'. Either include it or remove the dependency array.","line":38,"column":6,"nodeType":"ArrayExpression","endLine":38,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [loadExam, params.examId]","fix":{"range":[1114,1129],"text":"[loadExam, params.examId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  TextInput,\n  Modal,\n  Platform,\n} from 'react-native';\nimport { useRouter, useLocalSearchParams } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { examService } from '@/services/ExamService';\nimport { Exam } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\n\nexport default function ExamDetailsScreen() {\n  const router = useRouter();\n  const { colors } = useTheme();\n  const params = useLocalSearchParams<{ examId?: string }>();\n  \n  const [exam, setExam] = useState<Exam | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  \n  // Form state for adding/editing\n  const [formData, setFormData] = useState({\n    name: '',\n    subject: '',\n    date: '',\n  });\n\n  useEffect(() => {\n    loadExam();\n  }, [params.examId]);\n\n  const loadExam = async () => {\n    try {\n      setLoading(true);\n      \n      if (params.examId) {\n        const examData = await examService.getExamById(params.examId);\n        setExam(examData || null);\n      } else {\n        setExam(null);\n      }\n    } catch (error) {\n      console.error('Failed to load exam:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBack = () => {\n    router.back();\n  };\n\n  const handleAddExam = async () => {\n    if (!formData.name || !formData.subject || !formData.date) {\n      return;\n    }\n\n    try {\n      const urgencyDaysRemaining = examService.getDaysRemaining(formData.date) || 0;\n      \n      await examService.addExam({\n        name: formData.name,\n        subject: formData.subject,\n        date: formData.date,\n        dateDisplay: new Date(formData.date).toLocaleDateString('en-US', {\n          month: 'long',\n          day: 'numeric',\n          year: 'numeric',\n        }),\n        color: examService.getUrgencyColor(urgencyDaysRemaining),\n        completed: false,\n        isPrePopulated: false,\n      });\n\n      setShowAddModal(false);\n      setFormData({ name: '', subject: '', date: '' });\n      router.back();\n    } catch (error) {\n      console.error('Failed to add exam:', error);\n    }\n  };\n\n  const handleUpdateExam = async () => {\n    if (!exam || !formData.name || !formData.subject || !formData.date) {\n      return;\n    }\n\n    try {\n      await examService.updateExam(exam.id, {\n        name: formData.name,\n        subject: formData.subject,\n        date: formData.date,\n        dateDisplay: new Date(formData.date).toLocaleDateString('en-US', {\n          month: 'long',\n          day: 'numeric',\n          year: 'numeric',\n        }),\n      });\n\n      setShowEditModal(false);\n      loadExam();\n    } catch (error) {\n      console.error('Failed to update exam:', error);\n    }\n  };\n\n  const handleDeleteExam = async () => {\n    if (!exam) return;\n\n    try {\n      const success = await examService.deleteExam(exam.id);\n      if (success) {\n        router.back();\n      }\n    } catch (error) {\n      console.error('Failed to delete exam:', error);\n    }\n  };\n\n  const handleMarkCompleted = async () => {\n    if (!exam) return;\n\n    try {\n      await examService.markExamCompleted(exam.id);\n      loadExam();\n    } catch (error) {\n      console.error('Failed to mark exam as completed:', error);\n    }\n  };\n\n  const getDaysRemaining = (examDate: string): number => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const exam = new Date(examDate);\n    exam.setHours(0, 0, 0, 0);\n    const diffTime = exam.getTime() - today.getTime();\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  const getUrgencyColors = (color: 'green' | 'yellow' | 'red'): {\n    bg: string;\n    text: string;\n    border: string;\n  } => {\n    if (color === 'red') {\n      return {\n        bg: '#FFEBEE',\n        text: '#C62828',\n        border: '#EF9A9A',\n      };\n    }\n    if (color === 'yellow') {\n      return {\n        bg: '#FFF8E1',\n        text: '#F57C00',\n        border: '#FFCC80',\n      };\n    }\n    return {\n      bg: '#E8F5E9',\n      text: '#2E7D32',\n      border: '#A5D6A7',\n    };\n  };\n\n  const styles = getStyles(colors);\n\n  if (loading) {\n    return (\n      <View style={styles.container}>\n        <Text style={styles.loadingText}>Loading...</Text>\n      </View>\n    );\n  }\n\n  // Show add exam form if no examId provided\n  if (!exam && !params.examId) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={handleBack} style={styles.backButton}>\n            <Feather name=\"arrow-left\" size={24} color={colors.text} />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Add Exam</Text>\n          <View style={styles.headerSpacer} />\n        </View>\n\n        <ScrollView style={styles.scrollView} contentContainerStyle={styles.scrollContent}>\n          <View style={styles.formCard}>\n            <Text style={styles.formLabel}>Exam Name</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"e.g., Mathematics Final\"\n              placeholderTextColor={colors.textSecondary}\n              value={formData.name}\n              onChangeText={(text) => setFormData({ ...formData, name: text })}\n            />\n\n            <Text style={styles.formLabel}>Subject</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"e.g., Mathematics\"\n              placeholderTextColor={colors.textSecondary}\n              value={formData.subject}\n              onChangeText={(text) => setFormData({ ...formData, subject: text })}\n            />\n\n            <Text style={styles.formLabel}>Exam Date</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"YYYY-MM-DD (e.g., 2025-03-15)\"\n              placeholderTextColor={colors.textSecondary}\n              value={formData.date}\n              onChangeText={(text) => setFormData({ ...formData, date: text })}\n            />\n\n            <TouchableOpacity\n              style={styles.submitButton}\n              onPress={handleAddExam}\n              activeOpacity={0.8}\n            >\n              <Feather name=\"plus\" size={20} color=\"#FFFFFF\" />\n              <Text style={styles.submitButtonText}>Add Exam</Text>\n            </TouchableOpacity>\n          </View>\n        </ScrollView>\n      </View>\n    );\n  }\n\n  if (!exam) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={handleBack} style={styles.backButton}>\n            <Feather name=\"arrow-left\" size={24} color={colors.text} />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Exam Details</Text>\n          <View style={styles.headerSpacer} />\n        </View>\n        <View style={styles.errorContainer}>\n          <Text style={styles.errorText}>Exam not found</Text>\n        </View>\n      </View>\n    );\n  }\n\n  const daysRemaining = getDaysRemaining(exam.date);\n  const urgencyColors = getUrgencyColors(exam.color);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity onPress={handleBack} style={styles.backButton}>\n          <Feather name=\"arrow-left\" size={24} color={colors.text} />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>Exam Details</Text>\n        {!exam.isPrePopulated && (\n          <TouchableOpacity\n            onPress={() => {\n              setFormData({\n                name: exam.name,\n                subject: exam.subject,\n                date: exam.date,\n              });\n              setShowEditModal(true);\n            }}\n            style={styles.editButton}\n            activeOpacity={0.7}\n          >\n            <Feather name=\"edit-2\" size={20} color={colors.primary} />\n          </TouchableOpacity>\n        )}\n      </View>\n\n      <ScrollView style={styles.scrollView} contentContainerStyle={styles.scrollContent}>\n        {/* Exam Card */}\n        <View style={styles.examCard}>\n          <View\n            style={[styles.urgencyBanner, { backgroundColor: urgencyColors.bg }]}\n          >\n            <Text style={[styles.urgencyText, { color: urgencyColors.text }]}>\n              {daysRemaining <= 0 ? 'Exam Today' : daysRemaining === 1 ? 'Tomorrow' : `${daysRemaining} days remaining`}\n            </Text>\n          </View>\n\n          <View style={styles.examContent}>\n            <Text style={styles.examName}>{exam.name}</Text>\n            <Text style={styles.examSubject}>{exam.subject}</Text>\n\n            <View style={styles.examDetails}>\n              <View style={styles.detailItem}>\n                <Feather name=\"calendar\" size={20} color={colors.primary} />\n                <Text style={styles.detailText}>{exam.dateDisplay}</Text>\n              </View>\n            </View>\n\n            {exam.completed && (\n              <View style={styles.completedBadge}>\n                <Feather name=\"check-circle\" size={16} color=\"#4CAF50\" />\n                <Text style={styles.completedText}>Completed</Text>\n              </View>\n            )}\n          </View>\n        </View>\n\n        {/* Study Tips */}\n        <View style={styles.tipsCard}>\n          <Text style={styles.tipsTitle}>Study Tips</Text>\n          <View style={styles.tipItem}>\n            <Feather name=\"clock\" size={16} color={colors.primary} />\n            <Text style={styles.tipText}>\n              {daysRemaining > 30\n                ? 'Start with a study schedule'\n                : daysRemaining > 7\n                ? 'Focus on weak areas'\n                : 'Review and practice mock tests'}\n            </Text>\n          </View>\n          <View style={styles.tipItem}>\n            <Feather name=\"target\" size={16} color={colors.primary} />\n            <Text style={styles.tipText}>\n              Use Pomodoro timer for focused study sessions\n            </Text>\n          </View>\n          <View style={styles.tipItem}>\n            <Feather name=\"refresh-cw\" size={16} color={colors.primary} />\n            <Text style={styles.tipText}>\n              Take regular breaks to maintain productivity\n            </Text>\n          </View>\n        </View>\n\n        {/* Actions */}\n        {!exam.completed && (\n          <View style={styles.actionsContainer}>\n            <TouchableOpacity\n              style={styles.actionButton}\n              onPress={handleMarkCompleted}\n              activeOpacity={0.8}\n            >\n              <Feather name=\"check\" size={20} color=\"#FFFFFF\" />\n              <Text style={styles.actionButtonText}>Mark as Completed</Text>\n            </TouchableOpacity>\n\n            {!exam.isPrePopulated && (\n              <TouchableOpacity\n                style={[styles.actionButton, styles.deleteButton]}\n                onPress={handleDeleteExam}\n                activeOpacity={0.8}\n              >\n                <Feather name=\"trash-2\" size={20} color=\"#FFFFFF\" />\n                <Text style={styles.actionButtonText}>Delete Exam</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n        )}\n      </ScrollView>\n\n      {/* Edit Modal */}\n      <Modal\n        visible={showEditModal}\n        animationType=\"slide\"\n        transparent\n        onRequestClose={() => setShowEditModal(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <Text style={styles.modalTitle}>Edit Exam</Text>\n\n            <Text style={styles.formLabel}>Exam Name</Text>\n            <TextInput\n              style={styles.input}\n              value={formData.name}\n              onChangeText={(text) => setFormData({ ...formData, name: text })}\n            />\n\n            <Text style={styles.formLabel}>Subject</Text>\n            <TextInput\n              style={styles.input}\n              value={formData.subject}\n              onChangeText={(text) => setFormData({ ...formData, subject: text })}\n            />\n\n            <Text style={styles.formLabel}>Exam Date (YYYY-MM-DD)</Text>\n            <TextInput\n              style={styles.input}\n              value={formData.date}\n              onChangeText={(text) => setFormData({ ...formData, date: text })}\n            />\n\n            <View style={styles.modalButtons}>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setShowEditModal(false)}\n                activeOpacity={0.8}\n              >\n                <Text style={styles.cancelButtonText}>Cancel</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.saveButton]}\n                onPress={handleUpdateExam}\n                activeOpacity={0.8}\n              >\n                <Text style={styles.saveButtonText}>Save</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      paddingHorizontal: Spacing.lg,\n      paddingTop: Platform.select({ ios: 50, default: 20 }),\n      paddingBottom: Spacing.md,\n      backgroundColor: colors.background,\n    },\n    headerTitle: {\n      fontSize: FontSizes.xl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    backButton: {\n      padding: Spacing.sm,\n    },\n    editButton: {\n      padding: Spacing.sm,\n    },\n    headerSpacer: {\n      width: 40,\n    },\n    loadingText: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginTop: Spacing.xxl,\n    },\n    errorContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.xl,\n    },\n    errorText: {\n      fontSize: FontSizes.lg,\n      color: colors.textSecondary,\n      textAlign: 'center',\n    },\n    scrollView: {\n      flex: 1,\n    },\n    scrollContent: {\n      padding: Spacing.lg,\n      paddingBottom: Spacing.xxl,\n    },\n    examCard: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      overflow: 'hidden',\n      marginBottom: Spacing.md,\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 8,\n      elevation: 4,\n    },\n    urgencyBanner: {\n      padding: Spacing.md,\n      alignItems: 'center',\n    },\n    urgencyText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n    },\n    examContent: {\n      padding: Spacing.xl,\n      alignItems: 'center',\n    },\n    examName: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      textAlign: 'center',\n      marginBottom: Spacing.sm,\n    },\n    examSubject: {\n      fontSize: FontSizes.lg,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginBottom: Spacing.lg,\n    },\n    examDetails: {\n      width: '100%',\n      gap: Spacing.md,\n      marginBottom: Spacing.md,\n    },\n    detailItem: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.md,\n      backgroundColor: colors.background,\n      padding: Spacing.md,\n      borderRadius: BorderRadius.md,\n    },\n    detailText: {\n      fontSize: FontSizes.md,\n      color: colors.text,\n      flex: 1,\n    },\n    completedBadge: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: Spacing.sm,\n      backgroundColor: '#E8F5E9',\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.md,\n    },\n    completedText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: '#4CAF50',\n    },\n    tipsCard: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n    },\n    tipsTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.md,\n    },\n    tipItem: {\n      flexDirection: 'row',\n      alignItems: 'flex-start',\n      gap: Spacing.sm,\n      marginBottom: Spacing.md,\n    },\n    tipText: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      flex: 1,\n      lineHeight: 20,\n    },\n    actionsContainer: {\n      gap: Spacing.md,\n    },\n    actionButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.primary,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.md,\n      gap: Spacing.sm,\n    },\n    deleteButton: {\n      backgroundColor: colors.error,\n    },\n    actionButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n    formCard: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n    },\n    formLabel: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n      marginTop: Spacing.md,\n    },\n    input: {\n      backgroundColor: colors.background,\n      borderWidth: 1,\n      borderColor: colors.border,\n      borderRadius: BorderRadius.md,\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.md,\n      fontSize: FontSizes.md,\n      color: colors.text,\n    },\n    submitButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: colors.primary,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.md,\n      gap: Spacing.sm,\n      marginTop: Spacing.xl,\n    },\n    submitButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n    modalOverlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: Spacing.xl,\n    },\n    modalContent: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.xl,\n      width: '100%',\n      maxWidth: 400,\n    },\n    modalTitle: {\n      fontSize: FontSizes.xl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.lg,\n    },\n    modalButtons: {\n      flexDirection: 'row',\n      gap: Spacing.md,\n      marginTop: Spacing.xl,\n    },\n    modalButton: {\n      flex: 1,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.md,\n      alignItems: 'center',\n    },\n    cancelButton: {\n      backgroundColor: colors.background,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    cancelButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n    },\n    saveButton: {\n      backgroundColor: colors.primary,\n    },\n    saveButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/GroupDetailScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userName' is assigned a value but never used.","line":34,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedAvatar' is assigned a value but never used.","line":34,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":713,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":713,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25540,25543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25540,25543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  Alert,\n  Modal,\n  SafeAreaView,\n  ScrollView,\n  Share,\n  StyleSheet,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport { useLocalSearchParams, useRouter } from 'expo-router';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport { useTheme } from '@/components/ThemeContext';\nimport { studyGroupService, type GroupChatMessage, type GroupNote, type StudyGroup, type StudyScheduleEntry } from '@/services/StudyGroupService';\nimport { groupQuizService, type GroupQuiz } from '@/services/GroupQuizService';\nimport GroupChatMessageItem from '@/components/GroupChatMessage';\nimport GroupNoteCard from '@/components/GroupNoteCard';\nimport GroupLeaderboard from '@/components/GroupLeaderboard';\nimport { useUserStore } from '@/store/userStore';\nimport { useQuizStore } from '@/store/quizStore';\nimport QuizCard from '@/components/QuizCard';\n\nconst TABS = ['Chat', 'Notes', 'Members', 'Quizzes', 'Leaderboard', 'Schedule'] as const;\n\ntype TabKey = (typeof TABS)[number];\n\nexport default function GroupDetailScreen() {\n  const { groupId } = useLocalSearchParams<{ groupId: string }>();\n  const router = useRouter();\n  const { colors, isDark } = useTheme();\n  const { userId, userName, selectedAvatar, selectedClass } = useUserStore();\n\n  const [group, setGroup] = useState<StudyGroup | null>(null);\n  const [tab, setTab] = useState<TabKey>('Chat');\n\n  const [messages, setMessages] = useState<GroupChatMessage[]>([]);\n  const [chatText, setChatText] = useState('');\n\n  const [notes, setNotes] = useState<GroupNote[]>([]);\n  const [noteText, setNoteText] = useState('');\n\n  const [schedule, setSchedule] = useState<StudyScheduleEntry[]>([]);\n  const [scheduleTitle, setScheduleTitle] = useState('');\n  const [scheduleWhen, setScheduleWhen] = useState('');\n\n  const [inviteCode, setInviteCode] = useState<string | null>(null);\n  const [inviteUsername, setInviteUsername] = useState('');\n\n  const [quizzes, setQuizzes] = useState<GroupQuiz[]>([]);\n  const [quizSubject, setQuizSubject] = useState('');\n  const [quizChapter, setQuizChapter] = useState('');\n  const [quizReward, setQuizReward] = useState('25');\n  const [quizDeadlineHours, setQuizDeadlineHours] = useState('24');\n\n  const [activeQuiz, setActiveQuiz] = useState<GroupQuiz | null>(null);\n  const [quizModalVisible, setQuizModalVisible] = useState(false);\n  const [submittingQuiz, setSubmittingQuiz] = useState(false);\n  const [completedQuizResult, setCompletedQuizResult] = useState<{\n    score: number;\n    correctAnswers: number;\n    totalQuestions: number;\n  } | null>(null);\n\n  const isAdmin = Boolean(group?.adminIds.includes(userId));\n\n  const latestQuiz = quizzes[0] ?? null;\n\n  const styles = useMemo(() => getStyles(colors, isDark), [colors, isDark]);\n\n  const loadGroup = useCallback(async () => {\n    if (!groupId) return;\n    const g = await studyGroupService.getGroup(groupId);\n    setGroup(g);\n  }, [groupId]);\n\n  useEffect(() => {\n    loadGroup();\n    const unsub = studyGroupService.subscribeToGroups(() => {\n      loadGroup();\n    });\n    return unsub;\n  }, [loadGroup]);\n\n  useEffect(() => {\n    if (!groupId) return;\n    const unsubChat = studyGroupService.subscribeToChat(groupId, setMessages);\n    const unsubNotes = studyGroupService.subscribeToNotes(groupId, setNotes);\n    const unsubSchedule = studyGroupService.subscribeToSchedule(groupId, setSchedule);\n    const unsubQuizzes = groupQuizService.subscribe(groupId, (items) => {\n      setQuizzes(items);\n    });\n\n    return () => {\n      unsubChat();\n      unsubNotes();\n      unsubSchedule();\n      unsubQuizzes();\n    };\n  }, [groupId]);\n\n  const handleLeaveGroup = async () => {\n    if (!groupId) return;\n    Alert.alert('Leave group?', 'You can join again later with an invite code.', [\n      { text: 'Cancel', style: 'cancel' },\n      {\n        text: 'Leave',\n        style: 'destructive',\n        onPress: async () => {\n          try {\n            await studyGroupService.leaveGroup(groupId);\n            router.back();\n          } catch (error) {\n            Alert.alert('Could not leave', error instanceof Error ? error.message : 'Please try again.');\n          }\n        },\n      },\n    ]);\n  };\n\n  const handleSendMessage = async () => {\n    if (!groupId) return;\n    try {\n      await studyGroupService.sendChatMessage(groupId, chatText);\n      setChatText('');\n    } catch (error) {\n      Alert.alert('Could not send message', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleAddNote = async () => {\n    if (!groupId) return;\n    try {\n      await studyGroupService.addNote(groupId, noteText);\n      setNoteText('');\n    } catch (error) {\n      Alert.alert('Could not post note', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleAddSchedule = async () => {\n    if (!groupId) return;\n\n    const title = scheduleTitle.trim();\n    if (!title) {\n      Alert.alert('Missing title', 'Add a short schedule title.');\n      return;\n    }\n\n    const whenInput = scheduleWhen.trim();\n    const when = whenInput ? new Date(whenInput) : new Date(Date.now() + 60 * 60 * 1000);\n\n    if (Number.isNaN(when.getTime())) {\n      Alert.alert('Invalid date', 'Try a format like 2026-01-02 18:30');\n      return;\n    }\n\n    try {\n      await studyGroupService.addScheduleEntry(groupId, {\n        title,\n        scheduledAt: when.toISOString(),\n      });\n      setScheduleTitle('');\n      setScheduleWhen('');\n    } catch (error) {\n      Alert.alert('Could not add schedule', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleGenerateInvite = async () => {\n    if (!groupId) return;\n    try {\n      const code = await studyGroupService.createInviteCode(groupId);\n      setInviteCode(code);\n      await Share.share({\n        message: `Join my LearnSmart study group ‚Äú${group?.name ?? ''}‚Äù with this invite code: ${code}`,\n      });\n    } catch (error) {\n      Alert.alert('Could not create invite', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleInviteByUsername = async () => {\n    if (!groupId) return;\n    try {\n      await studyGroupService.inviteByUsername(groupId, inviteUsername);\n      setInviteUsername('');\n      Alert.alert('Invite sent', 'If that user is on this device, they will see a notification.');\n    } catch (error) {\n      Alert.alert('Could not invite', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleRemoveMember = async (memberId: string) => {\n    if (!groupId) return;\n    try {\n      await studyGroupService.removeMember(groupId, memberId);\n    } catch (error) {\n      Alert.alert('Could not remove member', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleCreateQuiz = async () => {\n    if (!groupId) return;\n    if (!quizSubject.trim() || !quizChapter.trim()) {\n      Alert.alert('Missing fields', 'Please enter a subject and chapter.');\n      return;\n    }\n\n    const reward = Number(quizReward) || 0;\n    const hours = Number(quizDeadlineHours) || 24;\n\n    try {\n      await groupQuizService.createGroupQuiz({\n        groupId,\n        className: selectedClass || 'Class',\n        subject: quizSubject.trim(),\n        chapter: quizChapter.trim(),\n        deadline: new Date(Date.now() + hours * 60 * 60 * 1000).toISOString(),\n        reward,\n      });\n      setQuizSubject('');\n      setQuizChapter('');\n      setQuizReward('25');\n      setQuizDeadlineHours('24');\n      setTab('Quizzes');\n    } catch (error) {\n      Alert.alert('Could not create quiz', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const openQuiz = (quiz: GroupQuiz) => {\n    setActiveQuiz(quiz);\n    setCompletedQuizResult(null);\n\n    useQuizStore.getState().setQuestions(quiz.questions, quiz.chapter, quiz.subject, quiz.chapter);\n    setQuizModalVisible(true);\n  };\n\n  const closeQuiz = () => {\n    setQuizModalVisible(false);\n    setActiveQuiz(null);\n    setCompletedQuizResult(null);\n    useQuizStore.getState().resetQuiz();\n  };\n\n  const handleEndQuiz = async () => {\n    if (!activeQuiz) return;\n\n    try {\n      const result = await useQuizStore.getState().endQuiz();\n      if (!result) {\n        closeQuiz();\n        return;\n      }\n\n      setCompletedQuizResult({\n        score: result.score,\n        correctAnswers: result.correctAnswers,\n        totalQuestions: result.totalQuestions,\n      });\n    } catch (error) {\n      Alert.alert('Could not finish quiz', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleSubmitQuizResult = async () => {\n    if (!groupId || !activeQuiz) return;\n\n    if (!completedQuizResult) {\n      closeQuiz();\n      return;\n    }\n\n    try {\n      setSubmittingQuiz(true);\n\n      await groupQuizService.submitGroupQuizResult({\n        groupId,\n        groupQuizId: activeQuiz.id,\n        score: completedQuizResult.score,\n        correctAnswers: completedQuizResult.correctAnswers,\n        totalQuestions: completedQuizResult.totalQuestions,\n      });\n\n      closeQuiz();\n      setTab('Leaderboard');\n    } catch (error) {\n      Alert.alert('Could not submit quiz', error instanceof Error ? error.message : 'Please try again.');\n    } finally {\n      setSubmittingQuiz(false);\n    }\n  };\n\n  if (!group) {\n    return (\n      <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n        <View style={styles.content}>\n          <Text style={styles.loadingText}>Loading group‚Ä¶</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n      <ScrollView contentContainerStyle={styles.content}>\n        <View style={styles.groupHeader}>\n          <View style={styles.groupIcon}>\n            <Text style={styles.groupIconText}>{group.icon || 'üë•'}</Text>\n          </View>\n          <View style={styles.groupMeta}>\n            <Text style={styles.groupName} numberOfLines={1}>\n              {group.name}\n            </Text>\n            <Text style={styles.groupDesc} numberOfLines={2}>\n              {group.description}\n            </Text>\n          </View>\n        </View>\n\n        <View style={styles.headerButtons}>\n          <TouchableOpacity style={styles.secondaryButton} onPress={handleLeaveGroup}>\n            <Text style={styles.secondaryButtonText}>Leave</Text>\n          </TouchableOpacity>\n\n          {isAdmin ? (\n            <TouchableOpacity style={styles.primaryButton} onPress={handleGenerateInvite}>\n              <Text style={styles.primaryButtonText}>Invite</Text>\n            </TouchableOpacity>\n          ) : null}\n        </View>\n\n        {inviteCode ? (\n          <View style={styles.inviteCodeCard}>\n            <Text style={styles.inviteTitle}>Invite Code</Text>\n            <Text style={styles.inviteCode}>{inviteCode}</Text>\n            <Text style={styles.inviteHint}>Share this code to let others join.</Text>\n          </View>\n        ) : null}\n\n        {isAdmin ? (\n          <View style={styles.inviteByUsernameCard}>\n            <Text style={styles.sectionTitle}>Invite by username</Text>\n            <View style={styles.inlineRow}>\n              <TextInput\n                value={inviteUsername}\n                onChangeText={setInviteUsername}\n                placeholder=\"Username\"\n                placeholderTextColor={colors.textSecondary}\n                style={styles.input}\n                autoCapitalize=\"none\"\n              />\n              <TouchableOpacity style={styles.joinButton} onPress={handleInviteByUsername}>\n                <Text style={styles.joinButtonText}>Send</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        ) : null}\n\n        <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.tabRow}>\n          {TABS.map((t) => (\n            <TouchableOpacity\n              key={t}\n              style={[styles.tabChip, tab === t ? styles.tabChipActive : null]}\n              onPress={() => setTab(t)}\n            >\n              <Text style={[styles.tabChipText, tab === t ? styles.tabChipTextActive : null]}>{t}</Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n\n        {tab === 'Chat' ? (\n          <View style={styles.tabSection}>\n            {messages.length === 0 ? (\n              <Text style={styles.emptySubtitle}>No messages yet. Say hello!</Text>\n            ) : (\n              messages.map((m) => <GroupChatMessageItem key={m.id} message={m} group={group} />)\n            )}\n\n            <View style={styles.inlineRow}>\n              <TextInput\n                value={chatText}\n                onChangeText={setChatText}\n                placeholder=\"Type a message‚Ä¶\"\n                placeholderTextColor={colors.textSecondary}\n                style={styles.input}\n              />\n              <TouchableOpacity style={styles.joinButton} onPress={handleSendMessage}>\n                <Text style={styles.joinButtonText}>Send</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        ) : null}\n\n        {tab === 'Notes' ? (\n          <View style={styles.tabSection}>\n            <View style={styles.inlineRow}>\n              <TextInput\n                value={noteText}\n                onChangeText={setNoteText}\n                placeholder=\"Share a note with the group‚Ä¶\"\n                placeholderTextColor={colors.textSecondary}\n                style={styles.input}\n              />\n              <TouchableOpacity style={styles.joinButton} onPress={handleAddNote}>\n                <Text style={styles.joinButtonText}>Post</Text>\n              </TouchableOpacity>\n            </View>\n\n            <View style={{ marginTop: Spacing.md }}>\n              {notes.length === 0 ? (\n                <Text style={styles.emptySubtitle}>No notes yet.</Text>\n              ) : (\n                notes.map((n) => <GroupNoteCard key={n.id} note={n} group={group} />)\n              )}\n            </View>\n          </View>\n        ) : null}\n\n        {tab === 'Members' ? (\n          <View style={styles.tabSection}>\n            <Text style={styles.sectionTitle}>Members ({group.members.length})</Text>\n            {group.members.map((memberId) => {\n              const profile = group.memberProfiles[memberId];\n              const displayName = profile?.userName ?? memberId;\n              const isMemberAdmin = group.adminIds.includes(memberId);\n              return (\n                <View key={memberId} style={styles.memberRow}>\n                  <View style={styles.memberMeta}>\n                    <Text style={styles.memberName}>{displayName}</Text>\n                    <Text style={styles.memberRole}>{isMemberAdmin ? 'Admin' : 'Member'}</Text>\n                  </View>\n\n                  {isAdmin && memberId !== userId ? (\n                    <TouchableOpacity style={styles.kickButton} onPress={() => handleRemoveMember(memberId)}>\n                      <Text style={styles.kickText}>Remove</Text>\n                    </TouchableOpacity>\n                  ) : null}\n                </View>\n              );\n            })}\n          </View>\n        ) : null}\n\n        {tab === 'Quizzes' ? (\n          <View style={styles.tabSection}>\n            {isAdmin ? (\n              <View style={styles.quizCreateCard}>\n                <Text style={styles.sectionTitle}>Create a group quiz</Text>\n                <TextInput\n                  value={quizSubject}\n                  onChangeText={setQuizSubject}\n                  placeholder=\"Subject (e.g., Mathematics)\"\n                  placeholderTextColor={colors.textSecondary}\n                  style={styles.input}\n                />\n                <TextInput\n                  value={quizChapter}\n                  onChangeText={setQuizChapter}\n                  placeholder=\"Chapter / Topic\"\n                  placeholderTextColor={colors.textSecondary}\n                  style={[styles.input, { marginTop: Spacing.sm }]}\n                />\n\n                <View style={[styles.inlineRow, { marginTop: Spacing.sm }]}> \n                  <TextInput\n                    value={quizReward}\n                    onChangeText={setQuizReward}\n                    placeholder=\"Reward\"\n                    placeholderTextColor={colors.textSecondary}\n                    style={[styles.input, { flex: 1 }]}\n                    keyboardType=\"numeric\"\n                  />\n                  <View style={{ width: Spacing.md }} />\n                  <TextInput\n                    value={quizDeadlineHours}\n                    onChangeText={setQuizDeadlineHours}\n                    placeholder=\"Hours\"\n                    placeholderTextColor={colors.textSecondary}\n                    style={[styles.input, { flex: 1 }]}\n                    keyboardType=\"numeric\"\n                  />\n                </View>\n\n                <TouchableOpacity style={[styles.primaryButton, { marginTop: Spacing.md }]} onPress={handleCreateQuiz}>\n                  <Text style={styles.primaryButtonText}>Create Quiz</Text>\n                </TouchableOpacity>\n              </View>\n            ) : null}\n\n            <View style={{ marginTop: Spacing.lg }}>\n              <Text style={styles.sectionTitle}>Quiz challenges</Text>\n              {quizzes.length === 0 ? (\n                <Text style={styles.emptySubtitle}>No group quizzes yet.</Text>\n              ) : (\n                quizzes.map((q) => {\n                  const taken = Boolean(q.results[userId]);\n                  return (\n                    <View key={q.id} style={styles.quizRow}>\n                      <View style={{ flex: 1 }}>\n                        <Text style={styles.quizTitle}>{q.subject}: {q.chapter}</Text>\n                        <Text style={styles.quizMeta}>\n                          Reward {q.reward} ¬∑ {Object.keys(q.results).length}/{group.members.length} completed\n                        </Text>\n                      </View>\n                      <TouchableOpacity\n                        style={taken ? styles.secondaryButton : styles.joinButton}\n                        onPress={() => openQuiz(q)}\n                      >\n                        <Text style={taken ? styles.secondaryButtonText : styles.joinButtonText}>{taken ? 'Retake' : 'Take'}</Text>\n                      </TouchableOpacity>\n                    </View>\n                  );\n                })\n              )}\n            </View>\n          </View>\n        ) : null}\n\n        {tab === 'Leaderboard' ? (\n          <View style={styles.tabSection}>\n            <Text style={styles.sectionTitle}>Leaderboard</Text>\n            {!latestQuiz ? (\n              <Text style={styles.emptySubtitle}>Create a quiz to start competing.</Text>\n            ) : (\n              <GroupLeaderboard group={group} quiz={latestQuiz} />\n            )}\n          </View>\n        ) : null}\n\n        {tab === 'Schedule' ? (\n          <View style={styles.tabSection}>\n            <Text style={styles.sectionTitle}>Study schedule</Text>\n            <Text style={styles.emptySubtitle}>Add coordinated study times for your group.</Text>\n\n            <TextInput\n              value={scheduleTitle}\n              onChangeText={setScheduleTitle}\n              placeholder=\"Session title (e.g., Algebra revision)\"\n              placeholderTextColor={colors.textSecondary}\n              style={styles.input}\n            />\n            <TextInput\n              value={scheduleWhen}\n              onChangeText={setScheduleWhen}\n              placeholder=\"When (e.g., 2026-01-02 18:30)\"\n              placeholderTextColor={colors.textSecondary}\n              style={[styles.input, { marginTop: Spacing.sm }]}\n              autoCapitalize=\"none\"\n            />\n            <TouchableOpacity style={[styles.primaryButton, { marginTop: Spacing.md }]} onPress={handleAddSchedule}>\n              <Text style={styles.primaryButtonText}>Add</Text>\n            </TouchableOpacity>\n\n            <View style={{ marginTop: Spacing.lg }}>\n              {schedule.length === 0 ? (\n                <Text style={styles.emptySubtitle}>No scheduled sessions yet.</Text>\n              ) : (\n                schedule\n                  .slice()\n                  .sort((a, b) => new Date(a.scheduledAt).getTime() - new Date(b.scheduledAt).getTime())\n                  .map((s) => (\n                    <View key={s.id} style={styles.scheduleRow}>\n                      <Text style={styles.scheduleTitle}>{s.title}</Text>\n                      <Text style={styles.scheduleMeta}>{new Date(s.scheduledAt).toLocaleString()}</Text>\n                    </View>\n                  ))\n              )}\n            </View>\n          </View>\n        ) : null}\n\n        <View style={styles.bottomSpacer} />\n      </ScrollView>\n\n      <Modal visible={quizModalVisible} transparent animationType=\"slide\" onRequestClose={closeQuiz}>\n        <View style={styles.modalOverlay}>\n          <View style={styles.quizModalCard}>\n            <View style={styles.quizModalHeader}>\n              <Text style={styles.modalTitle} numberOfLines={1}>\n                {activeQuiz ? `${activeQuiz.subject}: ${activeQuiz.chapter}` : 'Group Quiz'}\n              </Text>\n              <TouchableOpacity onPress={closeQuiz}>\n                <Text style={styles.closeText}>‚úï</Text>\n              </TouchableOpacity>\n            </View>\n\n            <View style={styles.quizModalContent}>\n              {activeQuiz ? (\n                <GroupQuizFlow onEnd={handleEndQuiz} onSubmit={handleSubmitQuizResult} submitting={submittingQuiz} />\n              ) : null}\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nfunction GroupQuizFlow({ onFinish, submitting }: { onFinish: () => void; submitting: boolean }) {\n  const { questions, currentQuestionIndex, isQuizActive, selectedAnswers } = useQuizStore();\n  const { colors } = useTheme();\n\n  const isLast = currentQuestionIndex === questions.length - 1;\n  const isAnswered = selectedAnswers[currentQuestionIndex] !== undefined;\n\n  const handleNext = () => {\n    useQuizStore.getState().nextQuestion();\n  };\n\n  const handlePrev = () => {\n    useQuizStore.getState().previousQuestion();\n  };\n\n  if (!isQuizActive) {\n    const score = useQuizStore.getState().score;\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', padding: Spacing.lg }}>\n        <Text style={{ fontSize: FontSizes.xxl, fontWeight: FontWeights.bold, color: colors.primary }}>{score}%</Text>\n        <Text style={{ fontSize: FontSizes.md, color: colors.textSecondary, marginTop: 6, textAlign: 'center' }}>\n          Quiz complete. Your score has been recorded.\n        </Text>\n        <TouchableOpacity\n          onPress={onFinish}\n          disabled={submitting}\n          style={{\n            marginTop: Spacing.lg,\n            backgroundColor: colors.primary,\n            paddingVertical: Spacing.md,\n            paddingHorizontal: Spacing.xl,\n            borderRadius: BorderRadius.lg,\n            opacity: submitting ? 0.7 : 1,\n          }}\n        >\n          <Text style={{ color: '#FFFFFF', fontWeight: FontWeights.bold }}>{submitting ? 'Submitting‚Ä¶' : 'Back to Group'}</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const question = questions[currentQuestionIndex];\n  if (!question) return null;\n\n  return (\n    <View style={{ flex: 1 }}>\n      <QuizCard\n        question={question}\n        questionNumber={currentQuestionIndex + 1}\n        totalQuestions={questions.length}\n        onNext={handleNext}\n        onPrevious={handlePrev}\n      />\n\n      <View style={{ flexDirection: 'row', marginTop: Spacing.md }}>\n        <TouchableOpacity\n          onPress={handlePrev}\n          disabled={currentQuestionIndex === 0}\n          style={{\n            flex: 1,\n            backgroundColor: colors.cardBackground,\n            borderWidth: 1,\n            borderColor: colors.border,\n            borderRadius: BorderRadius.lg,\n            paddingVertical: Spacing.md,\n            alignItems: 'center',\n            opacity: currentQuestionIndex === 0 ? 0.5 : 1,\n          }}\n        >\n          <Text style={{ color: colors.text, fontWeight: FontWeights.bold }}>Previous</Text>\n        </TouchableOpacity>\n\n        <View style={{ width: Spacing.md }} />\n\n        {isLast ? (\n          <TouchableOpacity\n            onPress={onFinish}\n            disabled={!isAnswered || submitting}\n            style={{\n              flex: 1,\n              backgroundColor: colors.primary,\n              borderRadius: BorderRadius.lg,\n              paddingVertical: Spacing.md,\n              alignItems: 'center',\n              opacity: !isAnswered || submitting ? 0.6 : 1,\n            }}\n          >\n            <Text style={{ color: '#FFFFFF', fontWeight: FontWeights.bold }}>{submitting ? 'Submitting‚Ä¶' : 'Finish'}</Text>\n          </TouchableOpacity>\n        ) : (\n          <TouchableOpacity\n            onPress={handleNext}\n            disabled={!isAnswered}\n            style={{\n              flex: 1,\n              backgroundColor: colors.primary,\n              borderRadius: BorderRadius.lg,\n              paddingVertical: Spacing.md,\n              alignItems: 'center',\n              opacity: !isAnswered ? 0.6 : 1,\n            }}\n          >\n            <Text style={{ color: '#FFFFFF', fontWeight: FontWeights.bold }}>Next</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    </View>\n  );\n}\n\nconst getStyles = (colors: any, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n    },\n    content: {\n      paddingTop: 90,\n      paddingHorizontal: Spacing.lg,\n      paddingBottom: 140,\n    },\n    loadingText: {\n      color: colors.textSecondary,\n      paddingVertical: Spacing.md,\n    },\n    groupHeader: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      marginBottom: Spacing.md,\n    },\n    groupIcon: {\n      width: 54,\n      height: 54,\n      borderRadius: 27,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      alignItems: 'center',\n      justifyContent: 'center',\n      marginRight: Spacing.md,\n    },\n    groupIconText: {\n      fontSize: 28,\n    },\n    groupMeta: {\n      flex: 1,\n    },\n    groupName: {\n      fontSize: FontSizes.xl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: 2,\n    },\n    groupDesc: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      lineHeight: FontSizes.sm * 1.35,\n    },\n    headerButtons: {\n      flexDirection: 'row',\n      marginBottom: Spacing.md,\n    },\n    primaryButton: {\n      flex: 1,\n      backgroundColor: colors.primary,\n      borderRadius: BorderRadius.lg,\n      paddingVertical: Spacing.md,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: 50,\n      marginLeft: Spacing.md,\n    },\n    primaryButtonText: {\n      color: '#FFFFFF',\n      fontWeight: FontWeights.bold,\n      fontSize: FontSizes.md,\n    },\n    secondaryButton: {\n      flex: 1,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      borderRadius: BorderRadius.lg,\n      paddingVertical: Spacing.md,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: 50,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    secondaryButtonText: {\n      color: colors.text,\n      fontWeight: FontWeights.bold,\n      fontSize: FontSizes.md,\n    },\n    inviteCodeCard: {\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n    },\n    inviteTitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginBottom: 6,\n      fontWeight: FontWeights.semibold,\n    },\n    inviteCode: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.primary,\n    },\n    inviteHint: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: 6,\n    },\n    inviteByUsernameCard: {\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      marginBottom: Spacing.md,\n    },\n    tabRow: {\n      marginVertical: Spacing.md,\n    },\n    tabChip: {\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      backgroundColor: colors.cardBackground,\n      borderRadius: 999,\n      borderWidth: 1,\n      borderColor: colors.border,\n      marginRight: Spacing.sm,\n    },\n    tabChipActive: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primary,\n    },\n    tabChipText: {\n      fontSize: FontSizes.sm,\n      color: colors.text,\n      fontWeight: FontWeights.semibold,\n    },\n    tabChipTextActive: {\n      color: '#FFFFFF',\n    },\n    tabSection: {\n      marginTop: Spacing.sm,\n    },\n    sectionTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    emptySubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginBottom: Spacing.md,\n    },\n    inlineRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    input: {\n      flex: 1,\n      height: 48,\n      borderRadius: BorderRadius.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n      paddingHorizontal: Spacing.md,\n      color: colors.text,\n      backgroundColor: isDark ? '#1F1F1F' : '#FFFFFF',\n    },\n    joinButton: {\n      marginLeft: Spacing.md,\n      backgroundColor: colors.primary,\n      borderRadius: BorderRadius.md,\n      paddingHorizontal: Spacing.lg,\n      height: 48,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    joinButtonText: {\n      color: '#FFFFFF',\n      fontWeight: FontWeights.bold,\n    },\n    memberRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      marginBottom: Spacing.sm,\n    },\n    memberMeta: {\n      flex: 1,\n    },\n    memberName: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: 2,\n    },\n    memberRole: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n    },\n    kickButton: {\n      backgroundColor: '#E07856',\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.md,\n    },\n    kickText: {\n      color: '#FFFFFF',\n      fontWeight: FontWeights.bold,\n      fontSize: FontSizes.sm,\n    },\n    quizCreateCard: {\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n    },\n    quizRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      marginTop: Spacing.sm,\n    },\n    quizTitle: {\n      fontSize: FontSizes.md,\n      color: colors.text,\n      fontWeight: FontWeights.bold,\n    },\n    quizMeta: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: 4,\n    },\n    scheduleRow: {\n      padding: Spacing.md,\n      borderRadius: BorderRadius.lg,\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n      marginBottom: Spacing.sm,\n    },\n    scheduleTitle: {\n      fontSize: FontSizes.md,\n      color: colors.text,\n      fontWeight: FontWeights.bold,\n    },\n    scheduleMeta: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: 4,\n    },\n    bottomSpacer: {\n      height: Spacing.xl,\n    },\n\n    modalOverlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0,0,0,0.6)',\n      padding: Spacing.lg,\n      justifyContent: 'center',\n    },\n    quizModalCard: {\n      height: '90%',\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.xl,\n      borderWidth: 1,\n      borderColor: colors.border,\n      overflow: 'hidden',\n    },\n    quizModalHeader: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      paddingHorizontal: Spacing.lg,\n      paddingVertical: Spacing.md,\n      borderBottomWidth: 1,\n      borderBottomColor: colors.border,\n    },\n    modalTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      flex: 1,\n      paddingRight: Spacing.md,\n    },\n    closeText: {\n      fontSize: 18,\n      color: colors.textSecondary,\n    },\n    quizModalContent: {\n      flex: 1,\n      padding: Spacing.lg,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/LeaderboardScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleWeekToggle' is assigned a value but never used.","line":53,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8020,8023],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8020,8023],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  RefreshControl,\n  Alert,\n  SafeAreaView,\n} from 'react-native';\nimport { useTheme } from '@/components/ThemeContext';\nimport { useUserStore } from '@/store/userStore';\nimport { leaderboardService, WeeklyLeaderboard } from '@/services/LeaderboardService';\nimport LeaderboardCard from '@/components/LeaderboardCard';\nimport { FontSizes, FontWeights, Spacing, BorderRadius } from '@/constants/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nexport default function LeaderboardScreen() {\n  const { colors } = useTheme();\n  const { userId } = useUserStore();\n  const [leaderboard, setLeaderboard] = useState<WeeklyLeaderboard | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [showPreviousWeek, setShowPreviousWeek] = useState(false);\n\n  const loadLeaderboard = useCallback(async () => {\n    try {\n      setLoading(true);\n      const data = showPreviousWeek \n        ? leaderboardService.getPreviousWeekLeaderboard()\n        : await leaderboardService.getLeaderboard();\n      \n      setLeaderboard(data);\n    } catch (error) {\n      console.error('Failed to load leaderboard:', error);\n      Alert.alert('Error', 'Failed to load leaderboard data');\n    } finally {\n      setLoading(false);\n    }\n  }, [showPreviousWeek]);\n\n  const onRefresh = useCallback(async () => {\n    setRefreshing(true);\n    await loadLeaderboard();\n    setRefreshing(false);\n  }, [loadLeaderboard]);\n\n  React.useEffect(() => {\n    loadLeaderboard();\n  }, [loadLeaderboard]);\n\n  const handleWeekToggle = () => {\n    setShowPreviousWeek(!showPreviousWeek);\n  };\n\n  const getUserRank = () => {\n    if (!leaderboard) return 0;\n    return leaderboard.entries.find(entry => entry.userId === userId)?.rank || 0;\n  };\n\n  const getTopEntries = () => {\n    if (!leaderboard) return [];\n    return leaderboard.entries.slice(0, 10);\n  };\n\n  const getCurrentUserEntry = () => {\n    if (!leaderboard) return null;\n    return leaderboard.entries.find(entry => entry.userId === userId);\n  };\n\n  const styles = getStyles(colors);\n\n  if (loading && !leaderboard) {\n    return (\n      <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n        <View style={styles.loadingContainer}>\n          <Text style={[styles.loadingText, { color: colors.text }]}>\n            Loading leaderboard...\n          </Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  const currentUserEntry = getCurrentUserEntry();\n  const userRank = getUserRank();\n  const topEntries = getTopEntries();\n  const timeUntilReset = leaderboardService.getTimeUntilNextReset();\n\n  return (\n    <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n      <ScrollView\n        style={styles.scrollView}\n        refreshControl={\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n        }\n      >\n        {/* Header */}\n        <View style={styles.header}>\n          <Text style={[styles.title, { color: colors.text }]}>\n            {showPreviousWeek ? 'Last Week' : 'This Week'} Leaderboard\n          </Text>\n          <Text style={[styles.subtitle, { color: colors.textSecondary }]}>\n            Resets in {timeUntilReset}\n          </Text>\n        </View>\n\n        {/* Week Toggle */}\n        <View style={styles.weekToggleContainer}>\n          <TouchableOpacity\n            style={[\n              styles.weekToggleButton,\n              { \n                backgroundColor: !showPreviousWeek ? colors.primary : colors.cardBackground,\n                borderColor: colors.primary \n              }\n            ]}\n            onPress={() => setShowPreviousWeek(false)}\n          >\n            <Text style={[\n              styles.weekToggleText,\n              { color: !showPreviousWeek ? 'white' : colors.text }\n            ]}>\n              This Week\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[\n              styles.weekToggleButton,\n              { \n                backgroundColor: showPreviousWeek ? colors.primary : colors.cardBackground,\n                borderColor: colors.primary \n              }\n            ]}\n            onPress={() => setShowPreviousWeek(true)}\n          >\n            <Text style={[\n              styles.weekToggleText,\n              { color: showPreviousWeek ? 'white' : colors.text }\n            ]}>\n              Last Week\n            </Text>\n          </TouchableOpacity>\n        </View>\n\n        {/* User Stats Card */}\n        {currentUserEntry && (\n          <View style={[styles.userStatsCard, { backgroundColor: colors.cardBackground }]}>\n            <Text style={[styles.userStatsTitle, { color: colors.text }]}>\n              Your Performance\n            </Text>\n            <View style={styles.userStatsRow}>\n              <View style={styles.userStatItem}>\n                <Text style={[styles.userStatValue, { color: '#B2AC88' }]}>\n                  #{userRank}\n                </Text>\n                <Text style={[styles.userStatLabel, { color: colors.textSecondary }]}>\n                  Your Rank\n                </Text>\n              </View>\n              <View style={styles.userStatItem}>\n                <Text style={[styles.userStatValue, { color: colors.text }]}>\n                  {currentUserEntry.weeklyXP}\n                </Text>\n                <Text style={[styles.userStatLabel, { color: colors.textSecondary }]}>\n                  Weekly XP\n                </Text>\n              </View>\n              <View style={styles.userStatItem}>\n                <Text style={[styles.userStatValue, { color: colors.text }]}>\n                  üî• {currentUserEntry.streak}\n                </Text>\n                <Text style={[styles.userStatLabel, { color: colors.textSecondary }]}>\n                  Streak\n                </Text>\n              </View>\n            </View>\n            \n            {/* Progress to next rank */}\n            {userRank > 0 && (\n              <View style={styles.rankProgress}>\n                <Text style={[styles.rankProgressText, { color: colors.textSecondary }]}>\n                  {userRank <= 10 \n                    ? 'üéâ You\\'re in the top 10!' \n                    : leaderboard ? `${leaderboardService.getXPToNextRank(leaderboard)} XP to next rank` : ''\n                  }\n                </Text>\n              </View>\n            )}\n          </View>\n        )}\n\n        {/* Top 10 Leaderboard */}\n        <View style={styles.leaderboardContainer}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>\n            üèÜ Top 10 This Week\n          </Text>\n          \n          {topEntries.length === 0 ? (\n            <View style={styles.emptyState}>\n              <MaterialCommunityIcons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n              <Text style={[styles.emptyStateText, { color: colors.textSecondary }]}>\n                No leaderboard data available\n              </Text>\n            </View>\n          ) : (\n            topEntries.map((entry) => (\n              <LeaderboardCard\n                key={entry.userId}\n                entry={entry}\n                isCurrentUser={entry.userId === userId}\n                rank={entry.rank}\n              />\n            ))\n          )}\n        </View>\n\n        {/* Encouragement */}\n        {userRank > 10 && (\n          <View style={[styles.encouragementCard, { backgroundColor: colors.cardBackground }]}>\n            <MaterialCommunityIcons name=\"trending-up\" size={32} color={colors.primary} />\n            <Text style={[styles.encouragementText, { color: colors.text }]}>\n              Keep going! You're {userRank - 10} spots away from the top 10.\n            </Text>\n          </View>\n        )}\n\n        {/* Bottom Spacing */}\n        <View style={styles.bottomSpacing} />\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n\nconst getStyles = (colors: any) => StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.md,\n  },\n  header: {\n    padding: Spacing.lg,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    marginBottom: 4,\n  },\n  subtitle: {\n    fontSize: FontSizes.sm,\n  },\n  weekToggleContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: Spacing.lg,\n    marginBottom: Spacing.lg,\n  },\n  weekToggleButton: {\n    flex: 1,\n    paddingVertical: Spacing.md,\n    borderRadius: BorderRadius.md,\n    borderWidth: 1,\n    alignItems: 'center',\n    marginHorizontal: 4,\n  },\n  weekToggleText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.bold,\n  },\n  userStatsCard: {\n    margin: Spacing.lg,\n    padding: Spacing.lg,\n    borderRadius: BorderRadius.lg,\n  },\n  userStatsTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n    marginBottom: Spacing.md,\n    textAlign: 'center',\n  },\n  userStatsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  userStatItem: {\n    alignItems: 'center',\n  },\n  userStatValue: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n    marginBottom: 4,\n  },\n  userStatLabel: {\n    fontSize: FontSizes.sm,\n  },\n  rankProgress: {\n    marginTop: Spacing.md,\n    paddingTop: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: colors.lightGray,\n    alignItems: 'center',\n  },\n  rankProgressText: {\n    fontSize: FontSizes.sm,\n    fontStyle: 'italic',\n  },\n  leaderboardContainer: {\n    paddingHorizontal: Spacing.lg,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n    marginBottom: Spacing.md,\n  },\n  emptyState: {\n    alignItems: 'center',\n    paddingVertical: Spacing.xl,\n  },\n  emptyStateText: {\n    fontSize: FontSizes.md,\n    marginTop: Spacing.md,\n    textAlign: 'center',\n  },\n  encouragementCard: {\n    margin: Spacing.lg,\n    padding: Spacing.lg,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n  },\n  encouragementText: {\n    fontSize: FontSizes.md,\n    textAlign: 'center',\n    marginTop: Spacing.sm,\n  },\n  bottomSpacing: {\n    height: Spacing.xl,\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/PersonalizedPlanScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DayPlan' is defined but never used.","line":15,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  ActivityIndicator,\n} from 'react-native';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { mistakeAnalysisService } from '@/services/MistakeAnalysisService';\nimport { PersonalizedStudyPlan } from '@/types/quiz';\n\ninterface DayPlan {\n  day: number;\n  topic: string;\n  subject: string;\n  activities: string[];\n  estimatedTime: number;\n}\n\nexport default function PersonalizedPlanScreen() {\n  const { colors, isDark } = useTheme();\n  const [plan, setPlan] = useState<PersonalizedStudyPlan | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [expandedDays, setExpandedDays] = useState<Set<number>>(new Set());\n\n  const loadPlan = async () => {\n    try {\n      const studyPlan = await mistakeAnalysisService.generatePersonalizedStudyPlan();\n      setPlan(studyPlan);\n    } catch (error) {\n      console.error('Failed to load personalized plan:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadPlan();\n  }, []);\n\n  const toggleDay = (day: number) => {\n    const newExpanded = new Set(expandedDays);\n    if (newExpanded.has(day)) {\n      newExpanded.delete(day);\n    } else {\n      newExpanded.add(day);\n    }\n    setExpandedDays(newExpanded);\n  };\n\n  const styles = getStyles(colors, isDark);\n\n  if (loading) {\n    return (\n      <View style={[styles.container, styles.centerContainer]}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n        <Text style={styles.loadingText}>Creating your personalized plan...</Text>\n      </View>\n    );\n  }\n\n  if (!plan || plan.weakAreas.length === 0) {\n    return (\n      <View style={[styles.container, styles.centerContainer]}>\n        <Text style={styles.emptyIcon}>üåü</Text>\n        <Text style={styles.emptyTitle}>No Study Plan Needed!</Text>\n        <Text style={styles.emptyText}>\n          You're performing excellently. Keep up the great work!\n        </Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <ScrollView style={styles.scrollView} contentContainerStyle={styles.scrollContent}>\n        {/* Header */}\n        <View style={styles.header}>\n          <Text style={styles.headerTitle}>Your Personalized Study Plan</Text>\n          <Text style={styles.headerSubtitle}>\n            {plan.estimatedCompletionDays}-day plan tailored for you\n          </Text>\n        </View>\n\n        {/* Priority Topics */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Priority Topics</Text>\n          <View style={styles.priorityContainer}>\n            {plan.priorityTopics.map((topic, index) => (\n              <View key={index} style={styles.priorityTag}>\n                <Text style={styles.priorityTagText}>{topic}</Text>\n              </View>\n            ))}\n          </View>\n        </View>\n\n        {/* Weekly Schedule */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Study Schedule</Text>\n          {plan.suggestedSchedule.map((dayPlan) => (\n            <View key={dayPlan.day} style={styles.dayCard}>\n              <TouchableOpacity\n                style={styles.dayHeader}\n                onPress={() => toggleDay(dayPlan.day)}\n              >\n                <View style={styles.dayInfo}>\n                  <Text style={styles.dayNumber}>Day {dayPlan.day}</Text>\n                  <Text style={styles.dayTopic}>{dayPlan.topic}</Text>\n                </View>\n                <Text style={styles.dayTime}>{dayPlan.estimatedTime} min</Text>\n                <Text style={styles.expandIcon}>\n                  {expandedDays.has(dayPlan.day) ? '‚ñº' : '‚ñ∂'}\n                </Text>\n              </TouchableOpacity>\n              {expandedDays.has(dayPlan.day) && (\n                <View style={styles.dayActivities}>\n                  <Text style={styles.activitiesLabel}>Activities:</Text>\n                  {dayPlan.activities.map((activity, index) => (\n                    <View key={index} style={styles.activityItem}>\n                      <Text style={styles.activityBullet}>‚Ä¢</Text>\n                      <Text style={styles.activityText}>{activity}</Text>\n                    </View>\n                  ))}\n                </View>\n              )}\n            </View>\n          ))}\n        </View>\n\n        {/* Call to Action */}\n        <TouchableOpacity style={styles.startButton}>\n          <Text style={styles.startButtonText}>Start Today's Plan</Text>\n        </TouchableOpacity>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  centerContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: Spacing.xxl,\n  },\n  loadingText: {\n    marginTop: Spacing.md,\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n  },\n  emptyIcon: {\n    fontSize: 64,\n    marginBottom: Spacing.lg,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.semibold,\n    color: isDark ? colors.text : colors.charcoal,\n    marginBottom: Spacing.sm,\n  },\n  emptyText: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    paddingHorizontal: Spacing.xl,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollContent: {\n    padding: Spacing.lg,\n  },\n  header: {\n    marginBottom: Spacing.xl,\n  },\n  headerTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    color: isDark ? colors.text : colors.charcoal,\n    marginBottom: Spacing.xs,\n  },\n  headerSubtitle: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n  },\n  section: {\n    marginBottom: Spacing.xl,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.semibold,\n    color: isDark ? colors.text : colors.charcoal,\n    marginBottom: Spacing.md,\n  },\n  priorityContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: Spacing.sm,\n  },\n  priorityTag: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.md,\n  },\n  priorityTagText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n    color: colors.white,\n  },\n  dayCard: {\n    backgroundColor: colors.cardBackground,\n    borderRadius: BorderRadius.lg,\n    marginBottom: Spacing.md,\n    overflow: 'hidden',\n    shadowColor: colors.shadow,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.08,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  dayHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: Spacing.md,\n  },\n  dayInfo: {\n    flex: 1,\n  },\n  dayNumber: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n    color: colors.primary,\n    marginBottom: 2,\n  },\n  dayTopic: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.semibold,\n    color: isDark ? colors.text : colors.charcoal,\n  },\n  dayTime: {\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n    marginRight: Spacing.md,\n  },\n  expandIcon: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n  },\n  dayActivities: {\n    paddingHorizontal: Spacing.md,\n    paddingBottom: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: colors.lightGray,\n    paddingTop: Spacing.md,\n  },\n  activitiesLabel: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n    color: colors.textSecondary,\n    marginBottom: Spacing.sm,\n  },\n  activityItem: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: Spacing.sm,\n  },\n  activityBullet: {\n    fontSize: FontSizes.md,\n    color: colors.primary,\n    marginRight: Spacing.sm,\n    lineHeight: FontSizes.md * 1.4,\n  },\n  activityText: {\n    flex: 1,\n    fontSize: FontSizes.sm,\n    color: colors.text,\n    lineHeight: FontSizes.sm * 1.4,\n  },\n  startButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: Spacing.lg,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    marginTop: Spacing.md,\n  },\n  startButtonText: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n    color: colors.white,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/PrivacyPolicyScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/ProfileScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":314,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13161,13164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13161,13164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  TextInput,\n  Switch,\n  Alert,\n  SafeAreaView,\n  Platform,\n} from 'react-native';\nimport { useTheme } from '../components/ThemeContext';\nimport { useUserStore } from '@/store/userStore';\nimport { useXPStore, useCurrentRank } from '@/store/xpStore';\nimport { streakService } from '@/services/streakService';\nimport { reputationService } from '@/services/ReputationService';\nimport { Feather, MaterialCommunityIcons } from '@expo/vector-icons';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { AvatarDisplay, AvatarSelector } from '../components/AvatarSelector';\nimport Dropdown from '../components/Dropdown';\nimport CoinDisplay from '../components/CoinDisplay';\nimport RankBadge from '../components/RankBadge';\nimport ReputationCard from '../components/ReputationCard';\nimport BadgeProgress from '../components/BadgeProgress';\n\nexport default function ProfileScreen() {\n  const { colors, isDark, toggleTheme } = useTheme();\n  const {\n    userName,\n    setUserName,\n    selectedClass,\n    setSelectedClass,\n    selectedAvatar,\n    logout,\n    gamificationData,\n    userQuestions,\n    userAnswers,\n  } = useUserStore();\n  \n  const { currentXP } = useCurrentRank();\n  const { totalLessonsRead, totalQuizzesCompleted } = useXPStore();\n  const [streak, setStreak] = React.useState(0);\n  \n  const [editingName, setEditingName] = useState(userName);\n  const router = useRouter();\n\n  React.useEffect(() => {\n    const getStreak = async () => {\n      const s = await streakService.getStreak();\n      setStreak(s);\n    };\n    getStreak();\n    reputationService.checkBadges();\n  }, []);\n\n  const handleSaveProfile = () => {\n    setUserName(editingName);\n    Alert.alert('Profile Updated', 'Your profile changes have been saved.');\n  };\n\n  const handleLogout = () => {\n    Alert.alert(\n      'Sign Out',\n      'Are you sure you want to sign out?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Sign Out',\n          style: 'destructive',\n          onPress: () => {\n            logout();\n            router.replace('/');\n          },\n        },\n      ]\n    );\n  };\n\n  const classes = Array.from({ length: 12 }, (_, i) => `Class ${i + 1}`).concat(['12+']);\n\n  const styles = getStyles(colors);\n\n  return (\n    <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n      <ScrollView contentContainerStyle={styles.scrollContent}>\n        {/* Header */}\n        <View style={styles.header}>\n          <AvatarDisplay id={selectedAvatar} size={100} style={styles.avatarHeader} />\n          <Text style={[styles.userName, { color: colors.text }]}>{userName || 'Student'}</Text>\n          <Text style={[styles.userClass, { color: colors.textSecondary }]}>{selectedClass}</Text>\n        </View>\n\n        {/* Stats Grid */}\n        <View style={styles.statsGrid}>\n          <View style={[styles.statCard, { backgroundColor: colors.cardBackground }]}>\n            <Text style={styles.statEmoji}>üî•</Text>\n            <Text style={[styles.statValue, { color: colors.text }]}>{streak}</Text>\n            <Text style={[styles.statLabel, { color: colors.textSecondary }]}>Day Streak</Text>\n          </View>\n          <View style={[styles.statCard, { backgroundColor: colors.cardBackground }]}>\n            <Text style={styles.statEmoji}>‚ú®</Text>\n            <Text style={[styles.statValue, { color: colors.text }]}>{currentXP}</Text>\n            <Text style={[styles.statLabel, { color: colors.textSecondary }]}>Total XP</Text>\n          </View>\n          <View style={[styles.statCard, { backgroundColor: colors.cardBackground }]}>\n            <Text style={styles.statEmoji}>üí∞</Text>\n            <Text style={[styles.statValue, { color: colors.text }]}>{gamificationData.smartCoins}</Text>\n            <Text style={[styles.statLabel, { color: colors.textSecondary }]}>SmartCoins</Text>\n          </View>\n        </View>\n\n        {/* Reputation & Badges */}\n        <ReputationCard />\n\n        {/* Badge Progress */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Badge Progression</Text>\n          {gamificationData.achievementProgress.length > 0 ? (\n            gamificationData.achievementProgress.map((progress) => (\n              <BadgeProgress key={progress.id} progress={progress} />\n            ))\n          ) : (\n            <Text style={{ color: colors.textSecondary, fontSize: FontSizes.sm }}>\n              Start answering questions to see your progress!\n            </Text>\n          )}\n        </View>\n\n        {/* Weekly Progress & Rank */}\n        <View style={styles.weeklySection}>\n          <View style={[styles.weeklyCard, { backgroundColor: colors.cardBackground }]}>\n            <View style={styles.weeklyHeader}>\n              <Text style={[styles.weeklyTitle, { color: colors.text }]}>\n                Weekly Progress\n              </Text>\n              <Text style={[styles.weeklySubtitle, { color: colors.textSecondary }]}>\n                Resets Sunday at 12 AM\n              </Text>\n            </View>\n            <View style={styles.weeklyStats}>\n              <View style={styles.weeklyStat}>\n                <Text style={[styles.weeklyStatValue, { color: '#B2AC88' }]}>\n                  {gamificationData.weeklyXP}\n                </Text>\n                <Text style={[styles.weeklyStatLabel, { color: colors.textSecondary }]}>\n                  Weekly XP\n                </Text>\n              </View>\n              <View style={styles.weeklyStat}>\n                <RankBadge size=\"small\" />\n              </View>\n            </View>\n          </View>\n        </View>\n\n        <View style={styles.statsRow}>\n           <View style={[styles.miniStat, { backgroundColor: colors.cardBackground }]}>\n              <MaterialCommunityIcons name=\"book-open-variant\" size={20} color={colors.primary} />\n              <Text style={[styles.miniStatText, { color: colors.text }]}>{totalLessonsRead} Lessons</Text>\n           </View>\n           <View style={[styles.miniStat, { backgroundColor: colors.cardBackground }]}>\n              <MaterialCommunityIcons name=\"help-circle-outline\" size={20} color={colors.primary} />\n              <Text style={[styles.miniStatText, { color: colors.text }]}>{totalQuizzesCompleted} Quizzes</Text>\n           </View>\n        </View>\n\n        <View style={styles.statsRow}>\n           <View style={[styles.miniStat, { backgroundColor: colors.cardBackground }]}>\n              <MaterialCommunityIcons name=\"help-box\" size={20} color={colors.primary} />\n              <Text style={[styles.miniStatText, { color: colors.text }]}>{userQuestions.length} Questions</Text>\n           </View>\n           <View style={[styles.miniStat, { backgroundColor: colors.cardBackground }]}>\n              <MaterialCommunityIcons name=\"comment-text-outline\" size={20} color={colors.primary} />\n              <Text style={[styles.miniStatText, { color: colors.text }]}>{userAnswers.length} Answers</Text>\n           </View>\n        </View>\n\n        {/* Gamification Actions */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Gamification</Text>\n          \n          <TouchableOpacity \n            style={[styles.actionItem, { borderBottomColor: colors.lightGray }]}\n            onPress={() => router.push('/leaderboard')}\n          >\n            <View style={styles.actionLabelGroup}>\n              <MaterialCommunityIcons name=\"trophy\" size={24} color={colors.primary} />\n              <View style={styles.actionTextContainer}>\n                <Text style={[styles.actionLabel, { color: colors.text }]}>Leaderboard</Text>\n                <Text style={[styles.actionSublabel, { color: colors.textSecondary }]}>\n                  See how you rank against others\n                </Text>\n              </View>\n            </View>\n            <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <TouchableOpacity \n            style={[styles.actionItem, { borderBottomColor: colors.lightGray }]}\n            onPress={() => router.push('/avatar-store')}\n          >\n            <View style={styles.actionLabelGroup}>\n              <MaterialCommunityIcons name=\"store\" size={24} color={colors.primary} />\n              <View style={styles.actionTextContainer}>\n                <Text style={[styles.actionLabel, { color: colors.text }]}>Avatar Store</Text>\n                <Text style={[styles.actionSublabel, { color: colors.textSecondary }]}>\n                  Unlock new avatars with SmartCoins\n                </Text>\n              </View>\n            </View>\n            <View style={styles.actionRightContainer}>\n              <CoinDisplay size=\"small\" showLabel={false} />\n              <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Edit Profile Section */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Edit Profile</Text>\n          \n          <View style={styles.inputGroup}>\n            <Text style={[styles.inputLabel, { color: colors.textSecondary }]}>Display Name</Text>\n            <TextInput\n              style={[styles.input, { color: colors.text, borderColor: colors.lightGray, backgroundColor: colors.cardBackground }]}\n              value={editingName}\n              onChangeText={setEditingName}\n              placeholder=\"Enter your name\"\n              placeholderTextColor={colors.textSecondary}\n            />\n          </View>\n\n          <View style={styles.inputGroup}>\n            <Dropdown\n              label=\"Grade/Class\"\n              options={classes}\n              value={selectedClass}\n              onSelect={setSelectedClass}\n              placeholder=\"Select Class\"\n            />\n          </View>\n\n          <TouchableOpacity\n            style={[styles.saveButton, { backgroundColor: colors.primary }]}\n            onPress={handleSaveProfile}\n          >\n            <Text style={styles.saveButtonText}>Save Changes</Text>\n          </TouchableOpacity>\n        </View>\n\n        {/* Avatar Selection */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Choose Avatar</Text>\n          <AvatarSelector />\n        </View>\n\n        {/* Settings Section */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Settings</Text>\n          \n          <View style={[styles.settingItem, { borderBottomColor: colors.lightGray }]}>\n            <View style={styles.settingLabelGroup}>\n              <Feather name={isDark ? \"moon\" : \"sun\"} size={20} color={colors.text} />\n              <Text style={[styles.settingLabel, { color: colors.text }]}>Dark Mode</Text>\n            </View>\n            <Switch\n              value={isDark}\n              onValueChange={toggleTheme}\n              trackColor={{ false: '#D1D1D1', true: colors.primary + '80' }}\n              thumbColor={isDark ? colors.primary : '#F4F3F4'}\n            />\n          </View>\n\n          <TouchableOpacity style={styles.linkItem} onPress={() => router.push('/privacy-policy')}>\n            <Text style={[styles.linkLabel, { color: colors.text }]}>Privacy Policy</Text>\n            <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.linkItem} onPress={() => router.push('/terms')}>\n            <Text style={[styles.linkLabel, { color: colors.text }]}>Terms of Service</Text>\n            <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.linkItem} onPress={() => router.push('/about')}>\n            <Text style={[styles.linkLabel, { color: colors.text }]}>About LearnSmart</Text>\n            <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.linkItem} onPress={() => router.push('/analytics')}>\n            <Text style={[styles.linkLabel, { color: colors.text }]}>Analytics</Text>\n            <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.linkItem} onPress={() => router.push('/weak-areas')}>\n            <Text style={[styles.linkLabel, { color: colors.text }]}>Weak Areas</Text>\n            <Feather name=\"chevron-right\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n        </View>\n\n        <TouchableOpacity style={styles.logoutButton} onPress={handleLogout}>\n          <Feather name=\"log-out\" size={20} color={colors.error} />\n          <Text style={styles.logoutText}>Sign Out</Text>\n        </TouchableOpacity>\n\n        <View style={styles.spacer} />\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n\nconst getStyles = (colors: any) => StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollContent: {\n    padding: Spacing.lg,\n    paddingTop: Platform.select({ ios: 60, default: 20 }), // Combined with SafeAreaView\n    paddingBottom: 120,\n  },\n  header: {\n    alignItems: 'center',\n    marginVertical: Spacing.xl,\n  },\n  avatarHeader: {\n    marginBottom: Spacing.md,\n    borderWidth: 4,\n    borderColor: '#FFFFFF',\n    ...Platform.select({\n      ios: { shadowColor: '#000', shadowOffset: { width: 0, height: 4 }, shadowOpacity: 0.1, shadowRadius: 10 },\n      android: { elevation: 5 },\n    }),\n  },\n  userName: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n  },\n  userClass: {\n    fontSize: FontSizes.md,\n    marginTop: 4,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: Spacing.lg,\n  },\n  statCard: {\n    flex: 1,\n    marginHorizontal: 5,\n    padding: Spacing.md,\n    borderRadius: BorderRadius.lg,\n    alignItems: 'center',\n    ...Platform.select({\n      ios: { shadowColor: '#000', shadowOffset: { width: 0, height: 2 }, shadowOpacity: 0.05, shadowRadius: 5 },\n      android: { elevation: 2 },\n    }),\n  },\n  statEmoji: {\n    fontSize: 24,\n    marginBottom: 5,\n  },\n  statValue: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.bold,\n  },\n  statLabel: {\n    fontSize: 10,\n    marginTop: 2,\n    textAlign: 'center',\n  },\n  weeklySection: {\n    marginBottom: Spacing.lg,\n  },\n  weeklyCard: {\n    padding: Spacing.lg,\n    borderRadius: BorderRadius.lg,\n  },\n  weeklyHeader: {\n    marginBottom: Spacing.md,\n  },\n  weeklyTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n  },\n  weeklySubtitle: {\n    fontSize: FontSizes.sm,\n    marginTop: 2,\n  },\n  weeklyStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  weeklyStat: {\n    alignItems: 'center',\n  },\n  weeklyStatValue: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    marginBottom: 4,\n  },\n  weeklyStatLabel: {\n    fontSize: FontSizes.sm,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: Spacing.xl,\n  },\n  miniStat: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.md,\n  },\n  miniStatText: {\n    marginLeft: Spacing.xs,\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.medium,\n  },\n  actionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: Spacing.md,\n    borderBottomWidth: 1,\n  },\n  actionLabelGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  actionTextContainer: {\n    marginLeft: Spacing.md,\n  },\n  actionLabel: {\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.medium,\n  },\n  actionSublabel: {\n    fontSize: FontSizes.sm,\n    marginTop: 2,\n  },\n  actionRightContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  section: {\n    marginBottom: Spacing.xxl,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n    marginBottom: Spacing.md,\n  },\n  inputGroup: {\n    marginBottom: Spacing.md,\n  },\n  inputLabel: {\n    fontSize: FontSizes.sm,\n    marginBottom: 5,\n    marginLeft: 4,\n  },\n  input: {\n    height: 50,\n    borderWidth: 1,\n    borderRadius: BorderRadius.md,\n    paddingHorizontal: Spacing.md,\n    fontSize: FontSizes.md,\n  },\n  saveButton: {\n    height: 50,\n    borderRadius: BorderRadius.md,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: Spacing.sm,\n  },\n  saveButtonText: {\n    color: '#FFFFFF',\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.bold,\n  },\n  settingItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: Spacing.md,\n    borderBottomWidth: 1,\n  },\n  settingLabelGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  settingLabel: {\n    fontSize: FontSizes.md,\n    marginLeft: Spacing.md,\n  },\n  linkItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: Spacing.md,\n  },\n  linkLabel: {\n    fontSize: FontSizes.md,\n  },\n  logoutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: Spacing.md,\n    marginTop: Spacing.lg,\n  },\n  logoutText: {\n    color: colors.error,\n    fontSize: FontSizes.md,\n    fontWeight: FontWeights.bold,\n    marginLeft: Spacing.sm,\n  },\n  spacer: {\n    height: 40,\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/QAForumScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":251,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":251,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7308,7311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7308,7311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  FlatList, \n  StyleSheet, \n  TouchableOpacity, \n  Modal,\n  TextInput,\n  ScrollView,\n  ActivityIndicator,\n  Alert,\n  RefreshControl\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { useRouter } from 'expo-router';\nimport { Colors } from '@/constants/colors';\nimport { QuestionCard } from '@/components/QuestionCard';\nimport { QAPhotoUpload } from '@/components/QAPhotoUpload';\nimport { SearchBar } from '@/components/SearchBar';\nimport { QuestionFilters, FilterState } from '@/components/QuestionFilters';\nimport { TrendingQuestions } from '@/components/TrendingQuestions';\nimport { FavoriteQuestions } from '@/components/FavoriteQuestions';\nimport { qaForumService } from '@/services/QAForumService';\nimport { qaSearchService, SearchResult } from '@/services/QASearchService';\nimport { Question, QuestionDifficulty } from '@/types/qa';\nimport { Attachment } from '@/services/FileUploadService';\n\ntype ViewMode = 'all' | 'favorites' | 'search';\n\nexport const QAForumScreen = () => {\n  const insets = useSafeAreaInsets();\n  const router = useRouter();\n  \n  // Main data\n  const [allQuestions, setAllQuestions] = useState<Question[]>([]);\n  const [displayQuestions, setDisplayQuestions] = useState<Question[]>([]);\n  const [searchResult, setSearchResult] = useState<SearchResult | null>(null);\n  const [subjects, setSubjects] = useState<string[]>([]);\n  const [topics, setTopics] = useState<string[]>([]);\n  \n  // UI states\n  const [loading, setLoading] = useState(true);\n  const [searching, setSearching] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [viewMode, setViewMode] = useState<ViewMode>('all');\n  \n  // Search & filter states\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filters, setFilters] = useState<FilterState>({\n    difficulties: [],\n    status: [],\n    subject: '',\n    topic: '',\n  });\n  const [showFilters, setShowFilters] = useState(false);\n  // const [showTrending, setShowTrending] = useState(true); // Future feature: toggle trending section\n  \n  // Post modal\n  const [isPostModalVisible, setIsPostModalVisible] = useState(false);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [subject, setSubjectInput] = useState('');\n  const [topic, setTopicInput] = useState('');\n  const [difficulty, setDifficulty] = useState<QuestionDifficulty>('medium');\n  const [attachment, setAttachment] = useState<Attachment | null>(null);\n  const [posting, setPosting] = useState(false);\n\n  // Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n\n  // Load initial data\n  useEffect(() => {\n    loadQuestions();\n    loadSubjects();\n  }, []);\n\n  // Update display when filters change\n  useEffect(() => {\n    if (viewMode === 'all') {\n      const applyFiltersAsync = async () => {\n        setSearching(true);\n        try {\n          const result = await qaSearchService.search({\n            keyword: searchQuery,\n            filters: {\n              difficulties: filters.difficulties,\n              status: filters.status,\n            },\n            subject: filters.subject || undefined,\n            topic: filters.topic || undefined,\n            page: 1,\n            limit: 20,\n          });\n          setSearchResult(result);\n          setDisplayQuestions(result.questions);\n          setCurrentPage(1);\n          setHasMore(result.hasMore);\n        } catch (error) {\n          console.error('Failed to apply filters:', error);\n        } finally {\n          setSearching(false);\n        }\n      };\n      applyFiltersAsync();\n    }\n  }, [filters, searchQuery, viewMode]);\n\n  // Load subjects for filter dropdown\n  const loadSubjects = async () => {\n    try {\n      const loadedSubjects = await qaSearchService.getAllSubjects();\n      setSubjects(loadedSubjects);\n    } catch (error) {\n      console.error('Failed to load subjects:', error);\n    }\n  };\n\n  // Load topics when subject changes\n  useEffect(() => {\n    const loadTopics = async () => {\n      if (filters.subject) {\n        try {\n          const loadedTopics = await qaSearchService.getTopicsForSubject(filters.subject);\n          setTopics(loadedTopics);\n        } catch (error) {\n          console.error('Failed to load topics:', error);\n        }\n      } else {\n        setTopics([]);\n      }\n    };\n    loadTopics();\n  }, [filters.subject]);\n\n  const loadQuestions = async () => {\n    try {\n      const questions = await qaForumService.getQuestions();\n      setAllQuestions(questions);\n      setDisplayQuestions(questions.slice(0, 20));\n      setHasMore(questions.length > 20);\n    } catch (error) {\n      console.error('Failed to load questions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const performSearch = async (searchPage: number = 1) => {\n    setSearching(true);\n    try {\n      const result = await qaSearchService.search({\n        keyword: searchQuery,\n        filters: {\n          difficulties: filters.difficulties,\n          status: filters.status,\n        },\n        subject: filters.subject || undefined,\n        topic: filters.topic || undefined,\n        page: searchPage,\n        limit: 20,\n      });\n      setSearchResult(result);\n      if (searchPage === 1) {\n        setDisplayQuestions(result.questions);\n        setCurrentPage(1);\n      } else {\n        setDisplayQuestions(prev => [...prev, ...result.questions]);\n      }\n      setHasMore(result.hasMore);\n    } catch (error) {\n      console.error('Failed to search:', error);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const handleSearch = async () => {\n    if (viewMode !== 'search') {\n      setViewMode('search');\n    }\n    await performSearch(1);\n  };\n\n  const handleClearSearch = () => {\n    setSearchQuery('');\n    setFilters({\n      difficulties: [],\n      status: [],\n      subject: '',\n      topic: '',\n    });\n    setViewMode('all');\n    setDisplayQuestions(allQuestions.slice(0, 20));\n    setSearchResult(null);\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleClearFilters = () => {\n    setFilters({\n      difficulties: [],\n      status: [],\n      subject: '',\n      topic: '',\n    });\n  };\n\n  const loadMoreQuestions = async () => {\n    if (!hasMore || searching) return;\n    await performSearch(currentPage + 1);\n    setCurrentPage(prev => prev + 1);\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    try {\n      await loadQuestions();\n      await loadSubjects();\n      if (viewMode === 'search') {\n        await performSearch(1);\n      }\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const handleCreateQuestion = async () => {\n    if (!title || !description || !subject || !topic) {\n      Alert.alert('Error', 'Please fill in all fields');\n      return;\n    }\n\n    setPosting(true);\n    try {\n      await qaForumService.createQuestion({\n        title,\n        description,\n        subject,\n        topic,\n        difficulty,\n        photo: attachment?.uri,\n      });\n      setIsPostModalVisible(false);\n      resetForm();\n      await loadSubjects();\n    } catch (error: any) {\n      Alert.alert('Error', error.message);\n    } finally {\n      setPosting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setTitle('');\n    setDescription('');\n    setSubjectInput('');\n    setTopicInput('');\n    setDifficulty('medium');\n    setAttachment(null);\n  };\n\n  const handleQuestionPress = (questionId: string) => {\n    router.push({\n      pathname: '/question-detail',\n      params: { questionId },\n    });\n  };\n\n  const renderQuestionItem = ({ item }: { item: Question }) => (\n    <QuestionCard \n      question={item} \n      onPress={() => handleQuestionPress(item.id)} \n    />\n  );\n\n  const renderFooter = () => {\n    if (!hasMore) return null;\n    return (\n      <View style={styles.loadMoreContainer}>\n        <TouchableOpacity style={styles.loadMoreBtn} onPress={loadMoreQuestions}>\n          <Text style={styles.loadMoreText}>Load More</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyContainer}>\n      <Ionicons name=\"search-outline\" size={64} color={Colors.light.textSecondary} />\n      <Text style={styles.emptyTitle}>\n        {searchQuery ? 'No Results Found' : 'No Questions Yet'}\n      </Text>\n      <Text style={styles.emptySubtitle}>\n        {searchQuery \n          ? `No questions match \"${searchQuery}\"`\n          : 'Be the first to ask a question!'}\n      </Text>\n      {!searchQuery && (\n        <TouchableOpacity \n          style={styles.askBtn} \n          onPress={() => setIsPostModalVisible(true)}\n        >\n          <Text style={styles.askBtnText}>Ask a Question</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top }]}>\n      {/* Header */}\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Q&A Forum</Text>\n        <TouchableOpacity \n          style={styles.postBtn}\n          onPress={() => setIsPostModalVisible(true)}\n        >\n          <Ionicons name=\"add\" size={24} color=\"white\" />\n          <Text style={styles.postBtnText}>Ask</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Search Bar */}\n      <View style={styles.searchContainer}>\n        <SearchBar\n          value={searchQuery}\n          onChangeText={setSearchQuery}\n          onSubmit={handleSearch}\n          onSuggestions={() => {}}\n        />\n      </View>\n\n      {/* Filter Toggle */}\n      <TouchableOpacity \n        style={styles.filterToggle}\n        onPress={() => setShowFilters(!showFilters)}\n      >\n        <Ionicons name=\"options-outline\" size={18} color={Colors.light.primary} />\n        <Text style={styles.filterToggleText}>Filters</Text>\n        <Ionicons \n          name={showFilters ? 'chevron-up' : 'chevron-down'} \n          size={16} \n          color={Colors.light.textSecondary} \n        />\n      </TouchableOpacity>\n\n      {/* Filters */}\n      {showFilters && (\n        <QuestionFilters\n          difficulties={filters.difficulties}\n          status={filters.status}\n          subject={filters.subject}\n          topic={filters.topic}\n          subjects={subjects}\n          topics={topics}\n          onFiltersChange={handleFiltersChange}\n          onClear={handleClearFilters}\n        />\n      )}\n\n      {/* View Mode Tabs */}\n      <View style={styles.viewModeTabs}>\n        <TouchableOpacity\n          style={[styles.viewModeTab, viewMode === 'all' && styles.viewModeTabActive]}\n          onPress={() => {\n            setViewMode('all');\n            setDisplayQuestions(allQuestions.slice(0, 20));\n            setSearchResult(null);\n          }}\n        >\n          <Text style={[styles.viewModeTabText, viewMode === 'all' && styles.viewModeTabTextActive]}>\n            All Questions\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.viewModeTab, viewMode === 'search' && styles.viewModeTabActive]}\n          onPress={handleSearch}\n        >\n          <Text style={[styles.viewModeTabText, viewMode === 'search' && styles.viewModeTabTextActive]}>\n            Search Results\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.viewModeTab, viewMode === 'favorites' && styles.viewModeTabActive]}\n          onPress={() => setViewMode('favorites')}\n        >\n          <Ionicons \n            name=\"bookmark-outline\" \n            size={16} \n            color={viewMode === 'favorites' ? Colors.light.primary : Colors.light.textSecondary} \n          />\n          <Text style={[styles.viewModeTabText, viewMode === 'favorites' && styles.viewModeTabTextActive]}>\n            Saved\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Results Count */}\n      {searchResult && (\n        <View style={styles.resultsCount}>\n          <Text style={styles.resultsCountText}>\n            {searchResult.totalCount} result{searchResult.totalCount !== 1 ? 's' : ''} found\n          </Text>\n          {searchQuery && (\n            <TouchableOpacity onPress={handleClearSearch}>\n              <Text style={styles.clearSearchText}>Clear Search</Text>\n            </TouchableOpacity>\n          )}\n        </View>\n      )}\n\n      {/* Trending Section (only in 'all' mode) */}\n      {viewMode === 'all' && (\n        <TrendingQuestions\n          onQuestionPress={handleQuestionPress}\n          maxItems={5}\n        />\n      )}\n\n      {/* Favorites Section */}\n      {viewMode === 'favorites' ? (\n        <FavoriteQuestions\n          onQuestionPress={handleQuestionPress}\n          onEmpty={() => setViewMode('all')}\n        />\n      ) : loading ? (\n        <View style={styles.center}>\n          <ActivityIndicator size=\"large\" color={Colors.light.primary} />\n        </View>\n      ) : (\n        <FlatList\n          data={displayQuestions}\n          keyExtractor={(item) => item.id}\n          renderItem={renderQuestionItem}\n          ListFooterComponent={renderFooter}\n          ListEmptyComponent={renderEmptyState}\n          contentContainerStyle={styles.listContent}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n          }\n          onEndReached={loadMoreQuestions}\n          onEndReachedThreshold={0.5}\n        />\n      )}\n\n      {/* Post Question Modal */}\n      <Modal\n        visible={isPostModalVisible}\n        animationType=\"slide\"\n        presentationStyle=\"pageSheet\"\n        onRequestClose={() => setIsPostModalVisible(false)}\n      >\n        <View style={styles.modalContainer}>\n          <View style={styles.modalHeader}>\n            <TouchableOpacity onPress={() => setIsPostModalVisible(false)}>\n              <Text style={styles.cancelText}>Cancel</Text>\n            </TouchableOpacity>\n            <Text style={styles.modalTitle}>Ask a Question</Text>\n            <TouchableOpacity onPress={handleCreateQuestion} disabled={posting}>\n              <Text style={[styles.submitText, posting && { opacity: 0.5 }]}>Post</Text>\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.modalScroll} contentContainerStyle={styles.modalContent}>\n            <TextInput\n              style={styles.titleInput}\n              placeholder=\"Question Title (e.g. How to solve quadratic equations?)\"\n              value={title}\n              onChangeText={setTitle}\n              maxLength={100}\n            />\n\n            <TextInput\n              style={styles.descriptionInput}\n              placeholder=\"Describe your question in detail...\"\n              value={description}\n              onChangeText={setDescription}\n              multiline\n              textAlignVertical=\"top\"\n            />\n\n            <View style={styles.row}>\n              <View style={styles.inputGroup}>\n                <Text style={styles.label}>Subject</Text>\n                <TextInput\n                  style={styles.smallInput}\n                  placeholder=\"e.g. Math\"\n                  value={subject}\n                  onChangeText={setSubjectInput}\n                />\n              </View>\n              <View style={styles.inputGroup}>\n                <Text style={styles.label}>Topic</Text>\n                <TextInput\n                  style={styles.smallInput}\n                  placeholder=\"e.g. Algebra\"\n                  value={topic}\n                  onChangeText={setTopicInput}\n                />\n              </View>\n            </View>\n\n            <Text style={styles.label}>Difficulty</Text>\n            <View style={styles.difficultyRow}>\n              {(['easy', 'medium', 'hard'] as QuestionDifficulty[]).map((d) => (\n                <TouchableOpacity\n                  key={d}\n                  style={[\n                    styles.difficultyBtn,\n                    difficulty === d && styles.difficultyBtnActive,\n                    difficulty === d && { borderColor: d === 'easy' ? Colors.light.success : d === 'medium' ? Colors.light.warning : Colors.light.error }\n                  ]}\n                  onPress={() => setDifficulty(d)}\n                >\n                  <Text style={[\n                    styles.difficultyBtnText,\n                    difficulty === d && { color: d === 'easy' ? Colors.light.success : d === 'medium' ? Colors.light.warning : Colors.light.error }\n                  ]}>\n                    {d.charAt(0).toUpperCase() + d.slice(1)}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n\n            <Text style={styles.label}>Attachment (Optional)</Text>\n            <QAPhotoUpload \n              attachment={attachment} \n              onAttachment={setAttachment} \n              onRemove={() => setAttachment(null)} \n            />\n            \n            {posting && <ActivityIndicator style={{ marginTop: 20 }} color={Colors.light.primary} />}\n          </ScrollView>\n        </View>\n      </Modal>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: Colors.light.background,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingVertical: 15,\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: Colors.light.text,\n  },\n  postBtn: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: Colors.light.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    gap: 4,\n  },\n  postBtnText: {\n    color: 'white',\n    fontWeight: '700',\n    fontSize: 14,\n  },\n  searchContainer: {\n    paddingHorizontal: 16,\n    marginBottom: 8,\n  },\n  filterToggle: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    gap: 6,\n  },\n  filterToggleText: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: Colors.light.primary,\n  },\n  viewModeTabs: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingBottom: 12,\n    gap: 8,\n  },\n  viewModeTab: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    backgroundColor: Colors.light.background,\n    borderWidth: 1,\n    borderColor: Colors.light.border,\n    gap: 6,\n  },\n  viewModeTabActive: {\n    backgroundColor: Colors.light.primary + '15',\n    borderColor: Colors.light.primary,\n  },\n  viewModeTabText: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: Colors.light.textSecondary,\n  },\n  viewModeTabTextActive: {\n    color: Colors.light.primary,\n  },\n  resultsCount: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingBottom: 8,\n  },\n  resultsCountText: {\n    fontSize: 14,\n    color: Colors.light.textSecondary,\n  },\n  clearSearchText: {\n    fontSize: 14,\n    color: Colors.light.primary,\n    fontWeight: '500',\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyTitle: {\n    marginTop: 16,\n    fontSize: 20,\n    fontWeight: '600',\n    color: Colors.light.text,\n  },\n  emptySubtitle: {\n    marginTop: 8,\n    fontSize: 16,\n    color: Colors.light.textSecondary,\n    textAlign: 'center',\n  },\n  askBtn: {\n    marginTop: 20,\n    backgroundColor: Colors.light.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 24,\n  },\n  askBtnText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  loadMoreContainer: {\n    padding: 16,\n    alignItems: 'center',\n  },\n  loadMoreBtn: {\n    backgroundColor: Colors.light.primary + '15',\n    paddingHorizontal: 24,\n    paddingVertical: 10,\n    borderRadius: 20,\n  },\n  loadMoreText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: Colors.light.primary,\n  },\n  listContent: {\n    padding: 16,\n    paddingTop: 0,\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'white',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.light.border,\n  },\n  cancelText: {\n    fontSize: 16,\n    color: Colors.light.textSecondary,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: Colors.light.text,\n  },\n  submitText: {\n    fontSize: 16,\n    fontWeight: '700',\n    color: Colors.light.primary,\n  },\n  modalScroll: {\n    flex: 1,\n  },\n  modalContent: {\n    padding: 20,\n  },\n  titleInput: {\n    fontSize: 20,\n    fontWeight: '700',\n    color: Colors.light.text,\n    marginBottom: 20,\n  },\n  descriptionInput: {\n    fontSize: 16,\n    color: Colors.light.text,\n    minHeight: 120,\n    marginBottom: 20,\n  },\n  row: {\n    flexDirection: 'row',\n    gap: 15,\n    marginBottom: 20,\n  },\n  inputGroup: {\n    flex: 1,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: Colors.light.textSecondary,\n    marginBottom: 8,\n  },\n  smallInput: {\n    borderWidth: 1,\n    borderColor: Colors.light.border,\n    borderRadius: 8,\n    padding: 10,\n    fontSize: 14,\n  },\n  difficultyRow: {\n    flexDirection: 'row',\n    gap: 10,\n    marginBottom: 20,\n  },\n  difficultyBtn: {\n    flex: 1,\n    paddingVertical: 10,\n    borderWidth: 1,\n    borderColor: Colors.light.border,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  difficultyBtnActive: {\n    backgroundColor: '#f0f0f0',\n    borderWidth: 2,\n  },\n  difficultyBtnText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: Colors.light.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/QuestionDetailScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2368,2371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2368,2371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2677,2680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2677,2680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2918,2921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2918,2921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  Image,\n  FlatList,\n  ActivityIndicator,\n  Alert,\n  KeyboardAvoidingView,\n  Platform\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { useLocalSearchParams, useRouter } from 'expo-router';\nimport { Colors } from '@/constants/colors';\nimport { qaForumService } from '@/services/QAForumService';\nimport { Question, Answer } from '@/types/qa';\nimport { AnswerCard } from '@/components/AnswerCard';\nimport { useUserStore } from '@/store/userStore';\nimport { Attachment } from '@/services/FileUploadService';\nimport { QAPhotoUpload } from '@/components/QAPhotoUpload';\n\nexport const QuestionDetailScreen = () => {\n  const { questionId } = useLocalSearchParams<{ questionId: string }>();\n  const insets = useSafeAreaInsets();\n  const router = useRouter();\n  const { userVotes } = useUserStore();\n  \n  const [question, setQuestion] = useState<Question | null>(null);\n  const [answers, setAnswers] = useState<Answer[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [sortBy, setSortBy] = useState<'helpfulness' | 'recency'>('helpfulness');\n  \n  const [answerText, setAnswerText] = useState('');\n  const [attachment, setAttachment] = useState<Attachment | null>(null);\n  const [posting, setPosting] = useState(false);\n\n  useEffect(() => {\n    const fetchQuestion = async () => {\n      const q = await qaForumService.getQuestion(questionId!);\n      if (q) {\n        setQuestion(q);\n        await qaForumService.incrementViewCount(questionId!);\n      } else {\n        Alert.alert('Error', 'Question not found');\n        router.back();\n      }\n    };\n    fetchQuestion();\n\n    if (questionId) {\n      const unsubscribe = qaForumService.subscribeToAnswers(questionId, (updatedAnswers) => {\n        setAnswers(qaForumService.sortAnswers(updatedAnswers, sortBy));\n        setLoading(false);\n      });\n\n      return unsubscribe;\n    }\n  }, [questionId, sortBy, router]);\n\n  const handlePostAnswer = async () => {\n    if (!answerText.trim() || !questionId) return;\n    setPosting(true);\n    try {\n      await qaForumService.postAnswer(questionId, answerText, attachment?.uri);\n      setAnswerText('');\n      setAttachment(null);\n    } catch (error: any) {\n      Alert.alert('Error', error.message);\n    } finally {\n      setPosting(false);\n    }\n  };\n\n  const handleVote = async (answerId: string, type: 'upvote' | 'downvote') => {\n    if (!questionId) return;\n    try {\n      await qaForumService.voteAnswer(questionId, answerId, type);\n    } catch (error: any) {\n      Alert.alert('Error', error.message);\n    }\n  };\n\n  const handleMarkHelpful = async (answerId: string) => {\n    if (!questionId) return;\n    try {\n      await qaForumService.markHelpful(questionId, answerId);\n    } catch (error: any) {\n      Alert.alert('Error', error.message);\n    }\n  };\n\n  if (loading || !question) {\n    return (\n      <View style={styles.center}>\n        <ActivityIndicator size=\"large\" color={Colors.light.primary} />\n      </View>\n    );\n  }\n\n  const renderHeader = () => (\n    <View style={styles.questionSection}>\n      <View style={styles.questionHeader}>\n        <View style={[styles.difficultyBadge, { backgroundColor: getDifficultyColor(question.difficulty) + '20' }]}>\n          <Text style={[styles.difficultyText, { color: getDifficultyColor(question.difficulty) }]}>\n            {question.difficulty.toUpperCase()}\n          </Text>\n        </View>\n        <Text style={styles.subjectText}>{question.subject} ‚Ä¢ {question.topic}</Text>\n      </View>\n      \n      <Text style={styles.title}>{question.title}</Text>\n      <Text style={styles.description}>{question.description}</Text>\n      \n      {question.photo && (\n        <Image source={{ uri: question.photo }} style={styles.questionImage} resizeMode=\"contain\" />\n      )}\n      \n      <View style={styles.questionFooter}>\n        <Text style={styles.footerText}>Asked on {new Date(question.createdAt).toLocaleDateString()}</Text>\n        <Text style={styles.footerText}>{question.viewCount} views</Text>\n      </View>\n\n      <View style={styles.answersHeader}>\n        <Text style={styles.answersTitle}>{answers.length} Answers</Text>\n        <View style={styles.sortContainer}>\n          <TouchableOpacity onPress={() => setSortBy('helpfulness')}>\n            <Text style={[styles.sortText, sortBy === 'helpfulness' && styles.sortTextActive]}>Helpful</Text>\n          </TouchableOpacity>\n          <Text style={styles.sortDivider}>|</Text>\n          <TouchableOpacity onPress={() => setSortBy('recency')}>\n            <Text style={[styles.sortText, sortBy === 'recency' && styles.sortTextActive]}>Newest</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </View>\n  );\n\n  return (\n    <KeyboardAvoidingView \n      style={{ flex: 1 }} \n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n      keyboardVerticalOffset={Platform.OS === 'ios' ? 90 : 0}\n    >\n      <FlatList\n        data={answers}\n        keyExtractor={(item) => item.id}\n        ListHeaderComponent={renderHeader}\n        renderItem={({ item }) => (\n          <AnswerCard \n            answer={item}\n            userVote={userVotes[item.id]}\n            onVote={(type) => handleVote(item.id, type)}\n            onMarkHelpful={() => handleMarkHelpful(item.id)}\n          />\n        )}\n        contentContainerStyle={[styles.listContent, { paddingBottom: insets.bottom + 180 }]}\n      />\n\n      <View style={[styles.inputContainer, { paddingBottom: Math.max(insets.bottom, 20) }]}>\n        <QAPhotoUpload \n          attachment={attachment}\n          onAttachment={setAttachment}\n          onRemove={() => setAttachment(null)}\n        />\n        <View style={styles.inputRow}>\n          <TextInput\n            style={styles.input}\n            placeholder=\"Write your answer...\"\n            value={answerText}\n            onChangeText={setAnswerText}\n            multiline\n          />\n          <TouchableOpacity \n            style={[styles.sendBtn, (!answerText.trim() || posting) && styles.sendBtnDisabled]} \n            onPress={handlePostAnswer}\n            disabled={!answerText.trim() || posting}\n          >\n            {posting ? (\n              <ActivityIndicator size=\"small\" color=\"white\" />\n            ) : (\n              <Ionicons name=\"send\" size={20} color=\"white\" />\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n};\n\nconst getDifficultyColor = (difficulty: string) => {\n  switch (difficulty) {\n    case 'easy': return Colors.light.success;\n    case 'medium': return Colors.light.warning;\n    case 'hard': return Colors.light.error;\n    default: return Colors.light.textSecondary;\n  }\n};\n\nconst styles = StyleSheet.create({\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  listContent: {\n    padding: 16,\n    backgroundColor: Colors.light.background,\n  },\n  questionSection: {\n    marginBottom: 24,\n  },\n  questionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 12,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  difficultyText: {\n    fontSize: 10,\n    fontWeight: '700',\n  },\n  subjectText: {\n    fontSize: 12,\n    color: Colors.light.textSecondary,\n    fontWeight: '500',\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    color: Colors.light.text,\n    marginBottom: 12,\n    lineHeight: 28,\n  },\n  description: {\n    fontSize: 16,\n    color: Colors.light.text,\n    lineHeight: 24,\n    marginBottom: 16,\n  },\n  questionImage: {\n    width: '100%',\n    height: 250,\n    borderRadius: 12,\n    backgroundColor: '#f0f0f0',\n    marginBottom: 16,\n  },\n  questionFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.light.border,\n    paddingBottom: 16,\n    marginBottom: 24,\n  },\n  footerText: {\n    fontSize: 12,\n    color: Colors.light.textSecondary,\n  },\n  answersHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  answersTitle: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: Colors.light.text,\n  },\n  sortContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  sortText: {\n    fontSize: 13,\n    color: Colors.light.textSecondary,\n    fontWeight: '600',\n  },\n  sortTextActive: {\n    color: Colors.light.primary,\n  },\n  sortDivider: {\n    color: Colors.light.border,\n  },\n  inputContainer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'white',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: Colors.light.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: -2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  inputRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    gap: 12,\n  },\n  input: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n    borderRadius: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    paddingTop: 8,\n    maxHeight: 100,\n    fontSize: 15,\n  },\n  sendBtn: {\n    backgroundColor: Colors.light.primary,\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  sendBtnDisabled: {\n    backgroundColor: Colors.light.textSecondary,\n    opacity: 0.5,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/ReputationLeaderboardScreen.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/engine/project/screens/ReputationLeaderboardScreen.tsx:41:5\n  39 |\n  40 |   useEffect(() => {\n> 41 |     loadLeaderboard();\n     |     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  42 |   }, [period]);\n  43 |\n  44 |   const renderPeriodTab = (tabPeriod: TimePeriod, label: string) => {","line":41,"column":5,"nodeType":null,"endLine":41,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLeaderboard'. Either include it or remove the dependency array.","line":42,"column":6,"nodeType":"ArrayExpression","endLine":42,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadLeaderboard, period]","fix":{"range":[1679,1687],"text":"[loadLeaderboard, period]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, SafeAreaView, ActivityIndicator } from 'react-native';\nimport { useTheme } from '@/components/ThemeContext';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { reputationService } from '@/services/ReputationService';\nimport { useUserStore, ReputationLeaderboardEntry } from '@/store/userStore';\nimport LeaderboardEntry from '@/components/LeaderboardEntry';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useRouter } from 'expo-router';\n\ntype TimePeriod = 'all-time' | 'monthly' | 'weekly';\n\nexport default function ReputationLeaderboardScreen() {\n  const { colors } = useTheme();\n  const router = useRouter();\n  const { userId, updateReputationRank } = useUserStore();\n  const [period, setPeriod] = useState<TimePeriod>('all-time');\n  const [leaderboard, setLeaderboard] = useState<ReputationLeaderboardEntry[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  async function loadLeaderboard() {\n    await new Promise(resolve => setTimeout(resolve, 0));\n    setLoading(true);\n    // In a real app, this would be an API call\n    setTimeout(() => {\n        const data = reputationService.generateMockLeaderboard(period);\n        setLeaderboard(data);\n        \n        // Update user's rank if it's all-time\n        if (period === 'all-time') {\n            const userEntry = data.find(e => e.userId === userId);\n            if (userEntry) {\n                updateReputationRank(userEntry.rank);\n            }\n        }\n        setLoading(false);\n    }, 500);\n  }\n\n  useEffect(() => {\n    loadLeaderboard();\n  }, [period]);\n\n  const renderPeriodTab = (tabPeriod: TimePeriod, label: string) => {\n    const isActive = period === tabPeriod;\n    return (\n      <TouchableOpacity\n        style={[\n          styles.tab,\n          { backgroundColor: isActive ? colors.primary : 'transparent' }\n        ]}\n        onPress={() => setPeriod(tabPeriod)}\n      >\n        <Text style={[\n          styles.tabText,\n          { color: isActive ? 'white' : colors.textSecondary }\n        ]}>\n          {label}\n        </Text>\n      </TouchableOpacity>\n    );\n  };\n\n  return (\n    <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n      <View style={styles.header}>\n        <TouchableOpacity onPress={() => router.back()} style={styles.backButton}>\n          <Ionicons name=\"arrow-back\" size={24} color={colors.text} />\n        </TouchableOpacity>\n        <Text style={[styles.title, { color: colors.text }]}>Community Leaderboard</Text>\n        <View style={{ width: 40 }} />\n      </View>\n\n      <View style={[styles.tabsContainer, { backgroundColor: colors.border + '40' }]}>\n        {renderPeriodTab('all-time', 'All Time')}\n        {renderPeriodTab('monthly', 'Monthly')}\n        {renderPeriodTab('weekly', 'Weekly')}\n      </View>\n\n      {loading ? (\n        <View style={styles.centerContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      ) : (\n        <FlatList\n          data={leaderboard}\n          keyExtractor={(item) => item.userId}\n          renderItem={({ item }) => (\n            <LeaderboardEntry \n              entry={item} \n              isCurrentUser={item.userId === userId} \n            />\n          )}\n          contentContainerStyle={styles.listContent}\n          showsVerticalScrollIndicator={false}\n          ListEmptyComponent={\n            <View style={styles.centerContainer}>\n              <Text style={{ color: colors.textSecondary }}>No data available</Text>\n            </View>\n          }\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.md,\n  },\n  backButton: {\n    padding: Spacing.xs,\n  },\n  title: {\n    fontSize: FontSizes.lg,\n    fontWeight: FontWeights.bold,\n  },\n  tabsContainer: {\n    flexDirection: 'row',\n    marginHorizontal: Spacing.md,\n    marginBottom: Spacing.md,\n    borderRadius: BorderRadius.full,\n    padding: 4,\n  },\n  tab: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: BorderRadius.full,\n  },\n  tabText: {\n    fontSize: FontSizes.sm,\n    fontWeight: FontWeights.semibold,\n  },\n  listContent: {\n    paddingHorizontal: Spacing.md,\n    paddingBottom: Spacing.xl,\n  },\n  centerContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: Spacing.xl,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/SessionHistoryScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadSessions'. Either include it or remove the dependency array.","line":32,"column":6,"nodeType":"ArrayExpression","endLine":32,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [filterDays, loadSessions]","fix":{"range":[1009,1021],"text":"[filterDays, loadSessions]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is assigned a value but never used.","line":60,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getFocusScoreColor' is assigned a value but never used.","line":75,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { timerService } from '@/services/TimerService';\nimport { PomodoroSession } from '@/types/productivity';\nimport { Feather } from '@expo/vector-icons';\nimport SessionCard from '@/components/SessionCard';\n\nexport default function SessionHistoryScreen() {\n  const router = useRouter();\n  const { colors } = useTheme();\n  const [sessions, setSessions] = useState<PomodoroSession[]>([]);\n  const [stats, setStats] = useState({\n    totalSessions: 0,\n    totalStudyTime: 0,\n    averageFocusScore: 0,\n    treesGrown: 0,\n  });\n  const [loading, setLoading] = useState(true);\n  const [filterDays, setFilterDays] = useState(7);\n\n  useEffect(() => {\n    loadSessions();\n  }, [filterDays]);\n\n  const loadSessions = async () => {\n    try {\n      setLoading(true);\n      const [sessionData, statsData] = await Promise.all([\n        timerService.getSessionHistory(filterDays),\n        timerService.getStats(filterDays),\n      ]);\n      \n      // Sort sessions by start time (newest first)\n      const sortedSessions = sessionData.sort(\n        (a, b) => new Date(b.startTime).getTime() - new Date(a.startTime).getTime()\n      );\n      \n      setSessions(sortedSessions);\n      setStats(statsData);\n    } catch (error) {\n      console.error('Failed to load session history:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBack = () => {\n    router.back();\n  };\n\n  const formatDate = (dateString: string): string => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return 'Today';\n    }\n    if (date.toDateString() === yesterday.toDateString()) {\n      return 'Yesterday';\n    }\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n  };\n\n  const getFocusScoreColor = (score: number): string => {\n    if (score >= 90) return colors.success;\n    if (score >= 70) return '#8BC34A';\n    if (score >= 50) return colors.warning;\n    return colors.error;\n  };\n\n  const styles = getStyles(colors);\n\n  if (loading) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={handleBack} style={styles.backButton}>\n            <Feather name=\"arrow-left\" size={24} color={colors.text} />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Session History</Text>\n          <View style={styles.headerSpacer} />\n        </View>\n        <View style={styles.loadingContainer}>\n          <Text style={styles.loadingText}>Loading sessions...</Text>\n        </View>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity onPress={handleBack} style={styles.backButton}>\n          <Feather name=\"arrow-left\" size={24} color={colors.text} />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>Session History</Text>\n        <View style={styles.headerSpacer} />\n      </View>\n\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={styles.scrollContent}\n      >\n        {/* Stats Overview */}\n        <View style={styles.statsContainer}>\n          <View style={styles.statCard}>\n            <Feather name=\"clock\" size={24} color={colors.primary} />\n            <Text style={styles.statValue}>{stats.totalStudyTime}m</Text>\n            <Text style={styles.statLabel}>Total Time</Text>\n          </View>\n          <View style={styles.statCard}>\n            <Feather name=\"target\" size={24} color={colors.success} />\n            <Text style={styles.statValue}>{stats.averageFocusScore}%</Text>\n            <Text style={styles.statLabel}>Avg Focus</Text>\n          </View>\n          <View style={styles.statCard}>\n            <Feather name=\"activity\" size={24} color={colors.primary} />\n            <Text style={styles.statValue}>{stats.treesGrown}</Text>\n            <Text style={styles.statLabel}>Trees Grown</Text>\n          </View>\n          <View style={styles.statCard}>\n            <Feather name=\"target\" size={24} color={colors.warning} />\n            <Text style={styles.statValue}>{stats.totalSessions}</Text>\n            <Text style={styles.statLabel}>Sessions</Text>\n          </View>\n        </View>\n\n        {/* Filter Options */}\n        <View style={styles.filterContainer}>\n          <Text style={styles.filterLabel}>Time Period:</Text>\n          <View style={styles.filterButtons}>\n            {[\n              { label: '7 Days', value: 7 },\n              { label: '14 Days', value: 14 },\n              { label: '30 Days', value: 30 },\n            ].map((option) => (\n              <TouchableOpacity\n                key={option.value}\n                style={[\n                  styles.filterButton,\n                  filterDays === option.value && styles.filterButtonActive,\n                ]}\n                onPress={() => setFilterDays(option.value)}\n                activeOpacity={0.8}\n              >\n                <Text\n                  style={[\n                    styles.filterButtonText,\n                    filterDays === option.value && styles.filterButtonTextActive,\n                  ]}\n                >\n                  {option.label}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n        {/* Sessions List */}\n        <Text style={styles.sectionTitle}>Sessions</Text>\n\n        {sessions.length === 0 ? (\n          <View style={styles.emptyState}>\n            <Text style={styles.emptyEmoji}>üìä</Text>\n            <Text style={styles.emptyTitle}>No Sessions Yet</Text>\n            <Text style={styles.emptyText}>\n              Start a Pomodoro session to track your progress\n            </Text>\n            <TouchableOpacity\n              style={styles.startButton}\n              onPress={() => router.back()}\n              activeOpacity={0.8}\n            >\n              <Feather name=\"plus\" size={18} color=\"#FFFFFF\" />\n              <Text style={styles.startButtonText}>Start First Session</Text>\n            </TouchableOpacity>\n          </View>\n        ) : (\n          sessions.map((session) => (\n            <SessionCard\n              key={session.id}\n              session={session}\n              colors={colors}\n            />\n          ))\n        )}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background,\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      paddingHorizontal: Spacing.lg,\n      paddingTop: 60,\n      paddingBottom: Spacing.md,\n      backgroundColor: colors.background,\n    },\n    headerTitle: {\n      fontSize: FontSizes.xl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    backButton: {\n      padding: Spacing.sm,\n    },\n    headerSpacer: {\n      width: 40,\n    },\n    scrollView: {\n      flex: 1,\n    },\n    scrollContent: {\n      paddingHorizontal: Spacing.lg,\n      paddingBottom: Spacing.xxl,\n    },\n    loadingContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    loadingText: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n    },\n    statsContainer: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: Spacing.md,\n      marginBottom: Spacing.xl,\n    },\n    statCard: {\n      flex: 1,\n      minWidth: 140,\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      alignItems: 'center',\n      shadowColor: colors.shadow,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n      elevation: 2,\n    },\n    statValue: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginTop: Spacing.sm,\n      marginBottom: Spacing.xs,\n    },\n    statLabel: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textAlign: 'center',\n    },\n    filterContainer: {\n      marginBottom: Spacing.lg,\n    },\n    filterLabel: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    filterButtons: {\n      flexDirection: 'row',\n      gap: Spacing.sm,\n    },\n    filterButton: {\n      paddingHorizontal: Spacing.md,\n      paddingVertical: Spacing.sm,\n      borderRadius: BorderRadius.md,\n      backgroundColor: colors.cardBackground,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    filterButtonActive: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primary,\n    },\n    filterButtonText: {\n      fontSize: FontSizes.sm,\n      fontWeight: FontWeights.medium,\n      color: colors.text,\n    },\n    filterButtonTextActive: {\n      color: colors.white,\n    },\n    sectionTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.md,\n    },\n    emptyState: {\n      alignItems: 'center',\n      paddingVertical: Spacing.xxl,\n    },\n    emptyEmoji: {\n      fontSize: 64,\n      marginBottom: Spacing.lg,\n    },\n    emptyTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.semibold,\n      color: colors.text,\n      marginBottom: Spacing.sm,\n    },\n    emptyText: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginBottom: Spacing.xl,\n    },\n    startButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: colors.primary,\n      paddingHorizontal: Spacing.xl,\n      paddingVertical: Spacing.md,\n      borderRadius: BorderRadius.md,\n      gap: Spacing.sm,\n    },\n    startButtonText: {\n      fontSize: FontSizes.md,\n      fontWeight: FontWeights.semibold,\n      color: colors.white,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/StudyGroupsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1616,1619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1616,1619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2211,2214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2211,2214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2681,2684],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2681,2684],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7195,7198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7195,7198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  Alert,\n  Modal,\n  SafeAreaView,\n  ScrollView,\n  StyleSheet,\n  Switch,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useTheme } from '@/components/ThemeContext';\nimport { BorderRadius, FontSizes, FontWeights, Spacing } from '@/constants/theme';\nimport GroupCard from '@/components/GroupCard';\nimport { studyGroupService, type StudyGroup } from '@/services/StudyGroupService';\n\nexport default function StudyGroupsScreen() {\n  const { colors, isDark } = useTheme();\n  const router = useRouter();\n\n  const [groups, setGroups] = useState<StudyGroup[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  const [createVisible, setCreateVisible] = useState(false);\n  const [groupName, setGroupName] = useState('');\n  const [groupDescription, setGroupDescription] = useState('');\n  const [groupIcon, setGroupIcon] = useState('üë•');\n  const [isPrivate, setIsPrivate] = useState(true);\n\n  const [joinCode, setJoinCode] = useState('');\n\n  const refresh = useCallback(async () => {\n    try {\n      const myGroups = await studyGroupService.getMyGroups();\n      setGroups(myGroups);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refresh();\n    const unsub = studyGroupService.subscribeToGroups(() => {\n      refresh();\n    });\n    return unsub;\n  }, [refresh]);\n\n  const styles = useMemo(() => getStyles(colors, isDark), [colors, isDark]);\n\n  const handleOpenGroup = (groupId: string) => {\n    router.push(`/group/${groupId}` as any);\n  };\n\n  const handleCreateGroup = async () => {\n    try {\n      if (!groupName.trim()) {\n        Alert.alert('Missing name', 'Please enter a group name.');\n        return;\n      }\n\n      const group = await studyGroupService.createGroup({\n        name: groupName,\n        description: groupDescription || 'A study group for learning together.',\n        icon: groupIcon || 'üë•',\n        isPrivate,\n      });\n\n      setCreateVisible(false);\n      setGroupName('');\n      setGroupDescription('');\n      setGroupIcon('üë•');\n      setIsPrivate(true);\n\n      router.push(`/group/${group.id}` as any);\n    } catch (error) {\n      Alert.alert('Could not create group', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  const handleJoinGroup = async () => {\n    try {\n      if (!joinCode.trim()) {\n        Alert.alert('Missing code', 'Paste an invite code or group ID to join.');\n        return;\n      }\n\n      const group = await studyGroupService.joinGroupByCode(joinCode);\n      setJoinCode('');\n      router.push(`/group/${group.id}` as any);\n    } catch (error) {\n      Alert.alert('Could not join group', error instanceof Error ? error.message : 'Please try again.');\n    }\n  };\n\n  return (\n    <SafeAreaView style={[styles.container, { backgroundColor: colors.background }]}>\n      <ScrollView contentContainerStyle={styles.content}>\n        <View style={styles.header}>\n          <Text style={styles.title}>Study Groups</Text>\n          <Text style={styles.subtitle}>Create a private group, chat, share notes and compete in quizzes.</Text>\n        </View>\n\n        <View style={styles.actionsRow}>\n          <TouchableOpacity style={styles.primaryButton} onPress={() => setCreateVisible(true)} activeOpacity={0.85}>\n            <Text style={styles.primaryButtonText}>+ Create Group</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.joinCard}>\n          <Text style={styles.sectionTitle}>Join a group</Text>\n          <Text style={styles.sectionSubtitle}>Enter an invite code or the group ID.</Text>\n          <View style={styles.joinRow}>\n            <TextInput\n              value={joinCode}\n              onChangeText={setJoinCode}\n              placeholder=\"Invite code\"\n              placeholderTextColor={colors.textSecondary}\n              style={styles.input}\n              autoCapitalize=\"none\"\n            />\n            <TouchableOpacity style={styles.joinButton} onPress={handleJoinGroup} activeOpacity={0.85}>\n              <Text style={styles.joinButtonText}>Join</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Your groups</Text>\n        </View>\n\n        {loading ? (\n          <Text style={styles.loadingText}>Loading‚Ä¶</Text>\n        ) : groups.length === 0 ? (\n          <View style={styles.emptyState}>\n            <Text style={styles.emptyTitle}>No groups yet</Text>\n            <Text style={styles.emptySubtitle}>Create one and invite friends to start learning together.</Text>\n          </View>\n        ) : (\n          groups.map((group) => (\n            <GroupCard key={group.id} group={group} onPress={() => handleOpenGroup(group.id)} />\n          ))\n        )}\n\n        <View style={styles.bottomSpacer} />\n      </ScrollView>\n\n      <Modal visible={createVisible} transparent animationType=\"fade\" onRequestClose={() => setCreateVisible(false)}>\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalCard}>\n            <Text style={styles.modalTitle}>Create a Study Group</Text>\n\n            <Text style={styles.label}>Name</Text>\n            <TextInput\n              value={groupName}\n              onChangeText={setGroupName}\n              placeholder=\"e.g., Math Champs\"\n              placeholderTextColor={colors.textSecondary}\n              style={styles.modalInput}\n            />\n\n            <Text style={styles.label}>Description</Text>\n            <TextInput\n              value={groupDescription}\n              onChangeText={setGroupDescription}\n              placeholder=\"What will you study together?\"\n              placeholderTextColor={colors.textSecondary}\n              style={[styles.modalInput, styles.multiline]}\n              multiline\n            />\n\n            <Text style={styles.label}>Icon (emoji or image URL)</Text>\n            <TextInput\n              value={groupIcon}\n              onChangeText={setGroupIcon}\n              placeholder=\"üë•\"\n              placeholderTextColor={colors.textSecondary}\n              style={styles.modalInput}\n              autoCapitalize=\"none\"\n            />\n\n            <View style={styles.switchRow}>\n              <View style={styles.switchMeta}>\n                <Text style={styles.label}>Private group</Text>\n                <Text style={styles.switchHint}>Requires an invite code to join.</Text>\n              </View>\n              <Switch value={isPrivate} onValueChange={setIsPrivate} />\n            </View>\n\n            <View style={styles.modalButtons}>\n              <TouchableOpacity style={styles.secondaryButton} onPress={() => setCreateVisible(false)}>\n                <Text style={styles.secondaryButtonText}>Cancel</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={styles.primaryButton} onPress={handleCreateGroup}>\n                <Text style={styles.primaryButtonText}>Create</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst getStyles = (colors: any, isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      flex: 1,\n    },\n    content: {\n      paddingTop: 90,\n      paddingHorizontal: Spacing.lg,\n      paddingBottom: 120,\n    },\n    header: {\n      marginBottom: Spacing.lg,\n    },\n    title: {\n      fontSize: FontSizes.xxl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: 6,\n    },\n    subtitle: {\n      fontSize: FontSizes.md,\n      color: colors.textSecondary,\n      lineHeight: FontSizes.md * 1.4,\n    },\n    actionsRow: {\n      flexDirection: 'row',\n      marginBottom: Spacing.lg,\n    },\n    primaryButton: {\n      flex: 1,\n      backgroundColor: colors.primary,\n      borderRadius: BorderRadius.lg,\n      paddingVertical: Spacing.md,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: 52,\n    },\n    primaryButtonText: {\n      color: '#FFFFFF',\n      fontWeight: FontWeights.bold,\n      fontSize: FontSizes.md,\n    },\n    joinCard: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.lg,\n      borderWidth: 1,\n      borderColor: colors.border,\n      marginBottom: Spacing.lg,\n    },\n    sectionHeader: {\n      marginBottom: Spacing.md,\n    },\n    sectionTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n    },\n    sectionSubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      marginTop: 4,\n    },\n    joinRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      marginTop: Spacing.md,\n    },\n    input: {\n      flex: 1,\n      height: 48,\n      borderRadius: BorderRadius.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n      paddingHorizontal: Spacing.md,\n      color: colors.text,\n      backgroundColor: isDark ? '#1F1F1F' : '#FFFFFF',\n    },\n    joinButton: {\n      marginLeft: Spacing.md,\n      backgroundColor: colors.primary,\n      borderRadius: BorderRadius.md,\n      paddingHorizontal: Spacing.lg,\n      height: 48,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    joinButtonText: {\n      color: '#FFFFFF',\n      fontWeight: FontWeights.bold,\n    },\n    loadingText: {\n      color: colors.textSecondary,\n      paddingVertical: Spacing.md,\n    },\n    emptyState: {\n      backgroundColor: colors.cardBackground,\n      borderRadius: BorderRadius.lg,\n      padding: Spacing.xl,\n      borderWidth: 1,\n      borderColor: colors.border,\n      alignItems: 'center',\n    },\n    emptyTitle: {\n      fontSize: FontSizes.lg,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: 6,\n    },\n    emptySubtitle: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      lineHeight: FontSizes.sm * 1.4,\n    },\n    bottomSpacer: {\n      height: Spacing.xl,\n    },\n\n    modalOverlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0,0,0,0.5)',\n      justifyContent: 'center',\n      padding: Spacing.lg,\n    },\n    modalCard: {\n      backgroundColor: colors.background,\n      borderRadius: BorderRadius.xl,\n      padding: Spacing.lg,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    modalTitle: {\n      fontSize: FontSizes.xl,\n      fontWeight: FontWeights.bold,\n      color: colors.text,\n      marginBottom: Spacing.md,\n    },\n    label: {\n      fontSize: FontSizes.sm,\n      color: colors.textSecondary,\n      fontWeight: FontWeights.semibold,\n      marginBottom: 6,\n      marginTop: Spacing.sm,\n    },\n    modalInput: {\n      height: 48,\n      borderRadius: BorderRadius.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n      paddingHorizontal: Spacing.md,\n      color: colors.text,\n      backgroundColor: isDark ? '#1F1F1F' : '#FFFFFF',\n    },\n    multiline: {\n      height: 90,\n      paddingTop: Spacing.md,\n    },\n    switchRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      marginTop: Spacing.md,\n    },\n    switchMeta: {\n      flex: 1,\n      paddingRight: Spacing.md,\n    },\n    switchHint: {\n      fontSize: FontSizes.xs,\n      color: colors.textSecondary,\n      marginTop: 4,\n    },\n    modalButtons: {\n      flexDirection: 'row',\n      marginTop: Spacing.lg,\n    },\n    secondaryButton: {\n      flex: 1,\n      backgroundColor: isDark ? '#2A2A2A' : '#F5F1E8',\n      borderRadius: BorderRadius.lg,\n      paddingVertical: Spacing.md,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: 52,\n      marginRight: Spacing.md,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    secondaryButtonText: {\n      color: colors.text,\n      fontWeight: FontWeights.bold,\n      fontSize: FontSizes.md,\n    },\n  });\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/TermsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/VoiceNotesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/screens/WeakAreasScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TouchableOpacity' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BorderRadius' is defined but never used.","line":12,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  ActivityIndicator,\n  RefreshControl,\n} from 'react-native';\nimport { useTheme, ThemeColors } from '@/components/ThemeContext';\nimport { Spacing, BorderRadius, FontSizes, FontWeights } from '@/constants/theme';\nimport { mistakeAnalysisService } from '@/services/MistakeAnalysisService';\nimport { WeakArea } from '@/types/quiz';\nimport WeakAreaCard from '@/components/WeakAreaCard';\n\nexport default function WeakAreasScreen() {\n  const { colors, isDark } = useTheme();\n  const [weakAreas, setWeakAreas] = useState<WeakArea[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const loadWeakAreas = async () => {\n    try {\n      const areas = await mistakeAnalysisService.identifyWeakAreas();\n      setWeakAreas(areas);\n    } catch (error) {\n      console.error('Failed to load weak areas:', error);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    loadWeakAreas();\n  }, []);\n\n  const handleRefresh = async () => {\n    setRefreshing(true);\n    await loadWeakAreas();\n  };\n\n  const styles = getStyles(colors, isDark);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Weak Areas Analysis</Text>\n        <Text style={styles.headerSubtitle}>\n          Topics where you need more practice\n        </Text>\n      </View>\n\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={styles.scrollContent}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={handleRefresh}\n            tintColor={colors.primary}\n          />\n        }\n      >\n        {loading ? (\n          <View style={styles.centerContainer}>\n            <ActivityIndicator size=\"large\" color={colors.primary} />\n            <Text style={styles.loadingText}>Analyzing your performance...</Text>\n          </View>\n        ) : weakAreas.length === 0 ? (\n          <View style={styles.centerContainer}>\n            <Text style={styles.emptyIcon}>üéâ</Text>\n            <Text style={styles.emptyTitle}>No Weak Areas Found!</Text>\n            <Text style={styles.emptyText}>\n              You're doing great across all topics. Keep up the good work!\n            </Text>\n          </View>\n        ) : (\n          <View style={styles.areasList}>\n            {weakAreas.map((area, index) => (\n              <WeakAreaCard\n                key={`${area.subject}-${area.topic}-${index}`}\n                weakArea={area}\n                rank={index + 1}\n              />\n            ))}\n          </View>\n        )}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst getStyles = (colors: ThemeColors, isDark: boolean) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Spacing.xl,\n    paddingBottom: Spacing.md,\n    backgroundColor: colors.cardBackground,\n  },\n  headerTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.bold,\n    color: isDark ? colors.text : colors.charcoal,\n    marginBottom: Spacing.xs,\n  },\n  headerSubtitle: {\n    fontSize: FontSizes.sm,\n    color: colors.textSecondary,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollContent: {\n    padding: Spacing.lg,\n  },\n  centerContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: Spacing.xxl,\n  },\n  loadingText: {\n    marginTop: Spacing.md,\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n  },\n  emptyIcon: {\n    fontSize: 64,\n    marginBottom: Spacing.lg,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.xl,\n    fontWeight: FontWeights.semibold,\n    color: isDark ? colors.text : colors.charcoal,\n    marginBottom: Spacing.sm,\n  },\n  emptyText: {\n    fontSize: FontSizes.md,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    paddingHorizontal: Spacing.xl,\n  },\n  areasList: {\n    gap: Spacing.md,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/AIQuizGeneratorService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":161,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4815,4818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4815,4818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { QuizQuestion, QuizGenerationOptions, DifficultyLevel } from '@/types/quiz';\n\nconst OPENAI_API_KEY = process.env.EXPO_PUBLIC_OPENAI_API_KEY || '';\nconst API_ENDPOINT = 'https://api.openai.com/v1/chat/completions';\n\ninterface QuizContext {\n  subject: string;\n  chapter: string;\n  lessonContent?: string;\n  difficulty: DifficultyLevel;\n  studentClass?: string;\n  studentStream?: string;\n}\n\nexport class AIQuizGeneratorService {\n  private static instance: AIQuizGeneratorService;\n\n  private constructor() {}\n\n  public static getInstance(): AIQuizGeneratorService {\n    if (!AIQuizGeneratorService.instance) {\n      AIQuizGeneratorService.instance = new AIQuizGeneratorService();\n    }\n    return AIQuizGeneratorService.instance;\n  }\n\n  async generateQuiz(options: QuizGenerationOptions): Promise<QuizQuestion[]> {\n    const {\n      subject,\n      chapter,\n      lessonContent,\n      difficulty = 'medium',\n      questionCount = 5,\n      topic,\n    } = options;\n\n    if (!OPENAI_API_KEY) {\n      return this.getFallbackQuiz(subject, chapter, difficulty, questionCount);\n    }\n\n    try {\n      const prompt = this.buildQuizPrompt({\n        subject,\n        chapter,\n        lessonContent,\n        difficulty,\n        topic,\n      });\n\n      const response = await fetch(API_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${OPENAI_API_KEY}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: [\n            {\n              role: 'system',\n              content: this.getSystemPrompt(),\n            },\n            {\n              role: 'user',\n              content: prompt,\n            },\n          ],\n          max_tokens: 2000,\n          temperature: 0.7,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const content = data.choices[0]?.message?.content || '';\n\n      return this.parseQuizResponse(content, subject, chapter, difficulty, topic || chapter);\n    } catch (error) {\n      console.error('AI Quiz Generation Error:', error);\n      return this.getFallbackQuiz(subject, chapter, difficulty, questionCount);\n    }\n  }\n\n  private getSystemPrompt(): string {\n    return `You are an expert educational quiz generator for NCERT curriculum students (Class 1-12).\n\nYour task is to generate high-quality multiple-choice questions based on the provided subject and chapter content.\n\n**Requirements:**\n1. Generate exactly the requested number of questions (5 by default)\n2. Each question must have exactly 4 options (A, B, C, D)\n3. Only ONE correct answer per question\n4. Questions must be age-appropriate for the class level\n5. Difficulty must match the specified level (easy/medium/hard)\n6. Provide clear, concise explanations for the correct answer\n7. Questions should test understanding, not just memorization\n8. Avoid repeating questions within the same quiz\n\n**Difficulty Guidelines:**\n- Easy: Basic facts, definitions, direct recall\n- Medium: Application of concepts, simple problem-solving\n- Hard: Complex problem-solving, analysis, synthesis\n\n**Response Format:**\nReturn ONLY a JSON array with the following structure:\n[\n  {\n    \"question\": \"Question text here\",\n    \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n    \"correctAnswer\": 0,\n    \"explanation\": \"Clear explanation of why this is correct\"\n  }\n]\n\nNote: correctAnswer should be 0, 1, 2, or 3 (index of correct option in the options array).`;\n  }\n\n  private buildQuizPrompt(context: QuizContext): string {\n    let prompt = `Generate ${5} multiple-choice questions for the following topic:\\n\\n`;\n    prompt += `**Subject:** ${context.subject}\\n`;\n    prompt += `**Chapter:** ${context.chapter}\\n`;\n    prompt += `**Difficulty:** ${context.difficulty}\\n`;\n\n    if (context.topic) {\n      prompt += `**Specific Topic:** ${context.topic}\\n`;\n    }\n\n    if (context.lessonContent) {\n      prompt += `\\n**Lesson Content:**\\n${context.lessonContent}\\n`;\n    }\n\n    prompt += `\\nGenerate questions that test understanding of this content. Questions should be unique and not repetitive.`;\n\n    return prompt;\n  }\n\n  private parseQuizResponse(\n    content: string,\n    subject: string,\n    chapter: string,\n    difficulty: DifficultyLevel,\n    topic: string\n  ): QuizQuestion[] {\n    try {\n      // Try to extract JSON from the response\n      const jsonMatch = content.match(/\\[[\\s\\S]*\\]/);\n      if (!jsonMatch) {\n        throw new Error('No JSON array found in response');\n      }\n\n      const parsed = JSON.parse(jsonMatch[0]);\n      const questions: QuizQuestion[] = [];\n\n      if (!Array.isArray(parsed)) {\n        throw new Error('Response is not an array');\n      }\n\n      parsed.forEach((item: any, index: number) => {\n        if (item.question && item.options && Array.isArray(item.options) && item.options.length === 4) {\n          questions.push({\n            id: `${subject}-${chapter}-${Date.now()}-${index}`,\n            question: item.question,\n            options: item.options,\n            correctAnswer: typeof item.correctAnswer === 'number' ? item.correctAnswer : 0,\n            explanation: item.explanation || 'No explanation provided',\n            difficulty,\n            topic,\n            generatedAt: Date.now(),\n          });\n        }\n      });\n\n      // If we didn't get enough questions, fill with fallback\n      while (questions.length < 5) {\n        const fallback = this.getFallbackQuestions(subject, chapter, difficulty, topic);\n        questions.push(...fallback.slice(0, 5 - questions.length));\n      }\n\n      return questions.slice(0, 5);\n    } catch (error) {\n      console.error('Failed to parse quiz response:', error);\n      return this.getFallbackQuiz(subject, chapter, difficulty, 5);\n    }\n  }\n\n  private getFallbackQuiz(\n    subject: string,\n    chapter: string,\n    difficulty: DifficultyLevel,\n    count: number\n  ): QuizQuestion[] {\n    return this.getFallbackQuestions(subject, chapter, difficulty, chapter).slice(0, count);\n  }\n\n  private getFallbackQuestions(\n    subject: string,\n    chapter: string,\n    difficulty: DifficultyLevel,\n    topic: string\n  ): QuizQuestion[] {\n    // Generate generic fallback questions\n    const baseQuestions = [\n      {\n        question: `What is the main concept covered in ${chapter}?`,\n        options: [\n          'The first key concept',\n          'The second key concept',\n          'The third key concept',\n          'The fourth key concept',\n        ],\n        correctAnswer: 0,\n        explanation: `This question tests understanding of the main concept in ${chapter}.`,\n      },\n      {\n        question: `Which of the following is a characteristic of ${topic}?`,\n        options: ['Characteristic A', 'Characteristic B', 'Characteristic C', 'Characteristic D'],\n        correctAnswer: 1,\n        explanation: `This tests knowledge about ${topic} characteristics.`,\n      },\n      {\n        question: `How would you apply the concept of ${topic} in a real-world scenario?`,\n        options: ['Application A', 'Application B', 'Application C', 'Application D'],\n        correctAnswer: 2,\n        explanation: `This tests practical application of ${topic}.`,\n      },\n      {\n        question: `What is the relationship between the concepts in ${chapter}?`,\n        options: [\n          'They are unrelated',\n          'They are complementary',\n          'They are contradictory',\n          'They are sequential',\n        ],\n        correctAnswer: 1,\n        explanation: `This tests understanding of concept relationships.`,\n      },\n      {\n        question: `Which statement about ${topic} is correct?`,\n        options: [\n          'Statement A is correct',\n          'Statement B is correct',\n          'Statement C is correct',\n          'Statement D is correct',\n        ],\n        correctAnswer: 0,\n        explanation: `This tests factual knowledge about ${topic}.`,\n      },\n    ];\n\n    return baseQuestions.map((q, index) => ({\n      id: `${subject}-${chapter}-fallback-${Date.now()}-${index}`,\n      question: q.question,\n      options: q.options,\n      correctAnswer: q.correctAnswer,\n      explanation: q.explanation,\n      difficulty,\n      topic,\n      generatedAt: Date.now(),\n    }));\n  }\n\n  getRecommendedDifficulty(userAccuracy: number): DifficultyLevel {\n    if (userAccuracy >= 80) {\n      return 'hard';\n    } else if (userAccuracy >= 60) {\n      return 'medium';\n    } else {\n      return 'easy';\n    }\n  }\n}\n\nexport const aiQuizGeneratorService = AIQuizGeneratorService.getInstance();\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/AnalyticsService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'QuizResult' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mistakes' is assigned a value but never used.","line":73,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mistakes' is assigned a value but never used.","line":141,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":141,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mistakes' is assigned a value but never used.","line":181,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":181,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from '@react-native-async-storage/async-storage';\nimport {\n  PerformanceMetrics,\n  TopicPerformance,\n  WeeklyReport,\n  ComparisonData,\n  PerformanceChartData,\n} from '@/types/analytics';\nimport { QuizResult } from '@/types/quiz';\nimport { mistakeAnalysisService } from './MistakeAnalysisService';\n\nconst ANALYTICS_STORAGE_KEY = 'learnsmart_analytics';\n\ninterface AnalyticsData {\n  totalStudyTime: number;\n  lastUpdated: number;\n  weeklyReports: WeeklyReport[];\n}\n\nexport class AnalyticsService {\n  private static instance: AnalyticsService;\n  private analyticsData: AnalyticsData = {\n    totalStudyTime: 0,\n    lastUpdated: Date.now(),\n    weeklyReports: [],\n  };\n\n  private constructor() {}\n\n  public static getInstance(): AnalyticsService {\n    if (!AnalyticsService.instance) {\n      AnalyticsService.instance = new AnalyticsService();\n    }\n    return AnalyticsService.instance;\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      const data = await AsyncStorage.getItem(ANALYTICS_STORAGE_KEY);\n      if (data) {\n        this.analyticsData = JSON.parse(data);\n      }\n    } catch (error) {\n      console.error('Failed to initialize AnalyticsService:', error);\n    }\n  }\n\n  async trackStudyTime(minutes: number): Promise<void> {\n    this.analyticsData.totalStudyTime += minutes;\n    await this.saveAnalytics();\n  }\n\n  async generateWeeklyReport(): Promise<WeeklyReport> {\n    const now = Date.now();\n    const weekStart = now - 7 * 24 * 60 * 60 * 1000;\n\n    const quizResults = mistakeAnalysisService['quizResultsCache'].filter(\n      (r) => r.timestamp >= weekStart && r.timestamp <= now\n    );\n\n    const totalQuizzes = quizResults.length;\n    const totalQuestions = quizResults.reduce(\n      (sum, r) => sum + r.totalQuestions,\n      0\n    );\n    const correctAnswers = quizResults.reduce(\n      (sum, r) => sum + Math.round((r.score / 100) * r.totalQuestions),\n      0\n    );\n\n    const accuracy = totalQuestions > 0 ? (correctAnswers / totalQuestions) * 100 : 0;\n\n    const mistakes = mistakeAnalysisService.getMistakes().filter(\n      (m) => m.timestamp >= weekStart && m.timestamp <= now\n    );\n\n    // Identify improvement and strong areas\n    const topicAccuracy = new Map<string, { correct: number; total: number }>();\n\n    quizResults.forEach((result) => {\n      const key = result.topic;\n      if (!topicAccuracy.has(key)) {\n        topicAccuracy.set(key, { correct: 0, total: 0 });\n      }\n      const correctCount = Math.round((result.score / 100) * result.totalQuestions);\n      topicAccuracy.get(key)!.correct += correctCount;\n      topicAccuracy.get(key)!.total += result.totalQuestions;\n    });\n\n    const areas: { topic: string; accuracy: number }[] = [];\n    topicAccuracy.forEach((perf, topic) => {\n      if (perf.total >= 3) {\n        areas.push({\n          topic,\n          accuracy: (perf.correct / perf.total) * 100,\n        });\n      }\n    });\n\n    areas.sort((a, b) => a.accuracy - b.accuracy);\n\n    const improvementAreas = areas\n      .filter((a) => a.accuracy < 60)\n      .slice(0, 3)\n      .map((a) => a.topic);\n\n    const strongAreas = areas\n      .filter((a) => a.accuracy >= 70)\n      .slice(-3)\n      .reverse()\n      .map((a) => a.topic);\n\n    const report: WeeklyReport = {\n      weekStart,\n      weekEnd: now,\n      quizzesTaken: totalQuizzes,\n      lessonsRead: 0, // Would come from lesson tracking\n      accuracy: Math.round(accuracy),\n      xpGained: 0, // Would come from XP store\n      coinsEarned: 0, // Would come from coin service\n      timeSpent: 0, // Would come from time tracking\n      improvementAreas,\n      strongAreas,\n    };\n\n    // Update weekly reports cache\n    this.analyticsData.weeklyReports.push(report);\n    \n    // Keep only last 12 weeks\n    if (this.analyticsData.weeklyReports.length > 12) {\n      this.analyticsData.weeklyReports = this.analyticsData.weeklyReports.slice(-12);\n    }\n\n    await this.saveAnalytics();\n\n    return report;\n  }\n\n  getPerformanceMetrics(): PerformanceMetrics {\n    const quizResults = mistakeAnalysisService['quizResultsCache'];\n    const mistakes = mistakeAnalysisService.getMistakes();\n\n    const quizzesTaken = quizResults.length;\n    const totalQuestions = quizResults.reduce(\n      (sum, r) => sum + r.totalQuestions,\n      0\n    );\n    const correctAnswers = quizResults.reduce(\n      (sum, r) => sum + Math.round((r.score / 100) * r.totalQuestions),\n      0\n    );\n\n    const overallAccuracy = totalQuestions > 0\n      ? (correctAnswers / totalQuestions) * 100\n      : 0;\n\n    const averageScore = quizzesTaken > 0\n      ? quizResults.reduce((sum, r) => sum + r.score, 0) / quizzesTaken\n      : 0;\n\n    const totalTimeSpent = quizResults.reduce((sum, r) => sum + r.timeSpent, 0);\n    const averageTimePerQuestion = totalQuestions > 0\n      ? totalTimeSpent / totalQuestions\n      : 0;\n\n    return {\n      overallAccuracy: Math.round(overallAccuracy),\n      quizzesTaken,\n      totalQuestionsAttempted: totalQuestions,\n      correctAnswers,\n      averageScore: Math.round(averageScore),\n      averageTimePerQuestion: Math.round(averageTimePerQuestion),\n      currentStreak: 0, // Would come from streak service\n      longestStreak: 0, // Would come from streak service\n      totalStudyTime: this.analyticsData.totalStudyTime,\n    };\n  }\n\n  getTopicPerformance(): TopicPerformance[] {\n    const quizResults = mistakeAnalysisService['quizResultsCache'];\n    const mistakes = mistakeAnalysisService.getMistakes();\n\n    const topicStats = new Map<\n      string,\n      {\n        correct: number;\n        total: number;\n        time: number;\n        attempts: number[];\n        subject: string;\n        chapter: string;\n      }\n    >();\n\n    quizResults.forEach((result) => {\n      const key = `${result.subject}-${result.chapter}-${result.topic}`;\n      if (!topicStats.has(key)) {\n        topicStats.set(key, {\n          correct: 0,\n          total: 0,\n          time: 0,\n          attempts: [],\n          subject: result.subject,\n          chapter: result.chapter,\n        });\n      }\n      const stats = topicStats.get(key)!;\n      const correctCount = Math.round((result.score / 100) * result.totalQuestions);\n      stats.correct += correctCount;\n      stats.total += result.totalQuestions;\n      stats.time += result.timeSpent;\n      stats.attempts.push(result.score);\n    });\n\n    const performances: TopicPerformance[] = [];\n\n    topicStats.forEach((stats, key) => {\n      const [subject, chapter, topic] = key.split('-');\n      const accuracy = (stats.correct / stats.total) * 100;\n      const averageTime = stats.total > 0 ? stats.time / stats.total : 0;\n      const lastAttempt = quizResults\n        .filter((r) => r.topic === topic)\n        .sort((a, b) => b.timestamp - a.timestamp)[0]?.timestamp || Date.now();\n\n      // Calculate improvement rate\n      let improvementRate = 0;\n      if (stats.attempts.length >= 2) {\n        const firstHalf = stats.attempts.slice(0, Math.floor(stats.attempts.length / 2));\n        const secondHalf = stats.attempts.slice(Math.floor(stats.attempts.length / 2));\n        const firstAvg = firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length;\n        const secondAvg = secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length;\n        improvementRate = ((secondAvg - firstAvg) / firstAvg) * 100;\n      }\n\n      let trend: 'up' | 'down' | 'stable' = 'stable';\n      if (improvementRate > 5) {\n        trend = 'up';\n      } else if (improvementRate < -5) {\n        trend = 'down';\n      }\n\n      performances.push({\n        topic,\n        subject,\n        chapter,\n        accuracy: Math.round(accuracy),\n        questionsAttempted: stats.total,\n        averageTime: Math.round(averageTime),\n        improvementRate: Math.round(improvementRate),\n        lastAttemptedAt: lastAttempt,\n        trend,\n      });\n    });\n\n    return performances.sort((a, b) => a.accuracy - b.accuracy);\n  }\n\n  getPerformanceChartData(): PerformanceChartData {\n    const weeklyReports = this.analyticsData.weeklyReports.slice(-8); // Last 8 weeks\n\n    return {\n      labels: weeklyReports.map((_, i) => `Week ${i + 1}`),\n      accuracyData: weeklyReports.map((r) => r.accuracy),\n      timeData: weeklyReports.map((r) => r.timeSpent),\n      difficultyProgression: {\n        easy: 0,\n        medium: 0,\n        hard: 0,\n      },\n    };\n  }\n\n  getComparisonData(userAccuracy: number): ComparisonData {\n    // In a real implementation, this would compare against actual grade-level data\n    const gradeLevelAverage = 65; // Simulated average\n    const percentile = Math.min(99, Math.max(1, Math.round((userAccuracy / gradeLevelAverage) * 50)));\n    const rankInClass = Math.floor(Math.random() * 30) + 1;\n    const totalStudents = 50;\n\n    return {\n      userAccuracy: Math.round(userAccuracy),\n      gradeLevelAverage,\n      percentile,\n      rankInClass,\n      totalStudents,\n    };\n  }\n\n  async getWeeklyReports(count: number = 4): Promise<WeeklyReport[]> {\n    return this.analyticsData.weeklyReports.slice(-count);\n  }\n\n  private async saveAnalytics(): Promise<void> {\n    try {\n      this.analyticsData.lastUpdated = Date.now();\n      await AsyncStorage.setItem(\n        ANALYTICS_STORAGE_KEY,\n        JSON.stringify(this.analyticsData)\n      );\n    } catch (error) {\n      console.error('Failed to save analytics:', error);\n    }\n  }\n\n  async clearAnalytics(): Promise<void> {\n    this.analyticsData = {\n      totalStudyTime: 0,\n      lastUpdated: Date.now(),\n      weeklyReports: [],\n    };\n    await this.saveAnalytics();\n  }\n\n  getInsights(): string[] {\n    const metrics = this.getPerformanceMetrics();\n    const insights: string[] = [];\n\n    if (metrics.overallAccuracy >= 80) {\n      insights.push('Excellent performance! You\\'re mastering the material.');\n    } else if (metrics.overallAccuracy >= 60) {\n      insights.push('Good progress! Keep practicing to improve accuracy.');\n    } else {\n      insights.push('Focus on weak areas to boost your accuracy.');\n    }\n\n    if (metrics.quizzesTaken >= 10) {\n      insights.push(`You've completed ${metrics.quizzesTaken} quizzes. Great consistency!`);\n    }\n\n    if (metrics.averageTimePerQuestion > 60) {\n      insights.push('Try to improve your speed by practicing more.');\n    }\n\n    return insights;\n  }\n}\n\nexport const analyticsService = AnalyticsService.getInstance();\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/ChallengeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/CoinRewardService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/ContentValidator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/ExamService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sortExamsByDate' is defined but never used.","line":3,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Exam } from '@/types/productivity';\nimport { majorExams, getDaysRemaining, getUrgencyColor, sortExamsByDate, getUpcomingExams } from '@/data/majorExams';\n\nconst EXAMS_STORAGE_KEY = '@learnsmart_exams';\nconst REMINDERS_STORAGE_KEY = '@learnsmart_exam_reminders';\n\ninterface ExamReminder {\n  examId: string;\n  daysBefore: number;\n  reminderSent: boolean;\n}\n\nclass ExamService {\n  private exams: Exam[] = [];\n  private initialized = false;\n\n  async initialize(): Promise<void> {\n    if (this.initialized) return;\n\n    try {\n      const data = await AsyncStorage.getItem(EXAMS_STORAGE_KEY);\n      \n      if (data) {\n        this.exams = JSON.parse(data);\n      } else {\n        // Initialize with major exams if first time\n        this.exams = [...majorExams];\n        await this.saveExams();\n      }\n      \n      this.initialized = true;\n    } catch (error) {\n      console.error('Failed to initialize exam service:', error);\n      this.exams = [...majorExams];\n      this.initialized = true;\n    }\n  }\n\n  // Exam CRUD operations\n  async getAllExams(): Promise<Exam[]> {\n    await this.initialize();\n    return this.exams;\n  }\n\n  async getUpcomingExams(limit: number = 5): Promise<Exam[]> {\n    await this.initialize();\n    return getUpcomingExams(this.exams, limit);\n  }\n\n  async getExamById(examId: string): Promise<Exam | null> {\n    await this.initialize();\n    return this.exams.find((exam) => exam.id === examId) || null;\n  }\n\n  async addExam(exam: Omit<Exam, 'id'>): Promise<Exam> {\n    await this.initialize();\n    \n    const newExam: Exam = {\n      ...exam,\n      id: `exam_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      completed: false,\n      color: getUrgencyColor(getDaysRemaining(exam.date)),\n    };\n    \n    this.exams.push(newExam);\n    await this.saveExams();\n    \n    return newExam;\n  }\n\n  async updateExam(examId: string, updates: Partial<Exam>): Promise<Exam | null> {\n    await this.initialize();\n    \n    const index = this.exams.findIndex((exam) => exam.id === examId);\n    if (index === -1) return null;\n    \n    // Update urgency color if date changed\n    if (updates.date) {\n      updates.color = getUrgencyColor(getDaysRemaining(updates.date));\n    }\n    \n    this.exams[index] = { ...this.exams[index], ...updates };\n    await this.saveExams();\n    \n    return this.exams[index];\n  }\n\n  async deleteExam(examId: string): Promise<boolean> {\n    await this.initialize();\n    \n    const index = this.exams.findIndex((exam) => exam.id === examId);\n    if (index === -1) return false;\n    \n    // Don't allow deleting pre-populated exams, only mark as completed\n    if (this.exams[index].isPrePopulated) {\n      return false;\n    }\n    \n    this.exams.splice(index, 1);\n    await this.saveExams();\n    \n    return true;\n  }\n\n  async markExamCompleted(examId: string): Promise<Exam | null> {\n    return this.updateExam(examId, { completed: true });\n  }\n\n  async refreshExamUrgency(): Promise<void> {\n    await this.initialize();\n    \n    this.exams = this.exams.map((exam) => {\n      if (!exam.completed) {\n        return {\n          ...exam,\n          color: getUrgencyColor(getDaysRemaining(exam.date)),\n        };\n      }\n      return exam;\n    });\n    \n    await this.saveExams();\n  }\n\n  // Exam reminders\n  async setReminder(examId: string, daysBefore: number): Promise<void> {\n    const reminders = await this.getReminders();\n    const existingIndex = reminders.findIndex((r) => r.examId === examId && r.daysBefore === daysBefore);\n    \n    if (existingIndex >= 0) {\n      reminders[existingIndex].reminderSent = false;\n    } else {\n      reminders.push({\n        examId,\n        daysBefore,\n        reminderSent: false,\n      });\n    }\n    \n    await AsyncStorage.setItem(REMINDERS_STORAGE_KEY, JSON.stringify(reminders));\n  }\n\n  async removeReminder(examId: string, daysBefore: number): Promise<void> {\n    const reminders = await this.getReminders();\n    const filtered = reminders.filter((r) => !(r.examId === examId && r.daysBefore === daysBefore));\n    await AsyncStorage.setItem(REMINDERS_STORAGE_KEY, JSON.stringify(filtered));\n  }\n\n  async getReminders(): Promise<ExamReminder[]> {\n    try {\n      const data = await AsyncStorage.getItem(REMINDERS_STORAGE_KEY);\n      return data ? JSON.parse(data) : [];\n    } catch (error) {\n      console.error('Failed to get reminders:', error);\n      return [];\n    }\n  }\n\n  async getExamReminders(examId: string): Promise<ExamReminder[]> {\n    const reminders = await this.getReminders();\n    return reminders.filter((r) => r.examId === examId);\n  }\n\n  // Search and filter\n  async searchExams(query: string): Promise<Exam[]> {\n    await this.initialize();\n    \n    const lowerQuery = query.toLowerCase();\n    return this.exams.filter((exam) =>\n      exam.name.toLowerCase().includes(lowerQuery) ||\n      exam.subject.toLowerCase().includes(lowerQuery)\n    );\n  }\n\n  async getExamsBySubject(subject: string): Promise<Exam[]> {\n    await this.initialize();\n    return this.exams.filter((exam) => exam.subject.toLowerCase().includes(subject.toLowerCase()));\n  }\n\n  async getExamsByUrgency(color: 'green' | 'yellow' | 'red'): Promise<Exam[]> {\n    await this.initialize();\n    return this.exams.filter((exam) => exam.color === color && !exam.completed);\n  }\n\n  // Stats\n  async getExamStats(): Promise<{\n    total: number;\n    upcoming: number;\n    thisWeek: number;\n    thisMonth: number;\n  }> {\n    await this.initialize();\n    \n    const now = new Date();\n    const weekFromNow = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);\n    const monthFromNow = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000);\n    \n    const upcomingExams = this.exams.filter((exam) => !exam.completed);\n    \n    return {\n      total: upcomingExams.length,\n      upcoming: upcomingExams.length,\n      thisWeek: upcomingExams.filter((exam) => {\n        const examDate = new Date(exam.date);\n        return examDate <= weekFromNow;\n      }).length,\n      thisMonth: upcomingExams.filter((exam) => {\n        const examDate = new Date(exam.date);\n        return examDate <= monthFromNow;\n      }).length,\n    };\n  }\n\n  // Helper methods\n  private async saveExams(): Promise<void> {\n    try {\n      await AsyncStorage.setItem(EXAMS_STORAGE_KEY, JSON.stringify(this.exams));\n    } catch (error) {\n      console.error('Failed to save exams:', error);\n    }\n  }\n\n  async resetToDefault(): Promise<void> {\n    this.exams = [...majorExams];\n    await this.saveExams();\n  }\n\n  async getDaysRemaining(examId: string): Promise<number | null> {\n    const exam = await this.getExamById(examId);\n    return exam ? getDaysRemaining(exam.date) : null;\n  }\n\n  // Utility methods for formatting\n  getUrgencyColor(daysRemaining: number): 'green' | 'yellow' | 'red' {\n    return getUrgencyColor(daysRemaining);\n  }\n\n  formatDaysRemaining(days: number): string {\n    if (days < 0) return 'Exam passed';\n    if (days === 0) return 'Today!';\n    if (days === 1) return 'Tomorrow';\n    if (days < 7) return `${days} days`;\n    const weeks = Math.floor(days / 7);\n    const remainingDays = days % 7;\n    if (remainingDays === 0) return `${weeks} week${weeks > 1 ? 's' : ''}`;\n    return `${weeks} week${weeks > 1 ? 's' : ''} ${remainingDays} days`;\n  }\n}\n\nexport const examService = new ExamService();\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/FileUploadService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/FocusTracker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[716,719],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[716,719],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'treeType' is assigned a value but never used. Allowed unused args must match /^_/u.","line":25,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subscription' is assigned a value but never used.","line":124,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":124,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AppState, AppStateStatus } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Tree, ForestStats } from '@/types/productivity';\n\nconst TREES_STORAGE_KEY = '@learnsmart_virtual_forest';\nconst ACTIVE_TREE_KEY = '@learnsmart_active_tree';\n\ninterface ActiveTreeState {\n  treeId: string;\n  sessionId: string;\n  growth: number;\n  alive: boolean;\n  plantedAt: string;\n  lastFocusCheck: number;\n}\n\nclass FocusTracker {\n  private appState: AppStateStatus = 'active';\n  private activeTree: ActiveTreeState | null = null;\n  private focusCheckInterval: NodeJS.Timeout | null = null;\n  private growthInterval: NodeJS.Timeout | null = null;\n  private appStateSubscription: any = null;\n\n  // Tree management\n  async startGrowingTree(sessionId: string, treeType: Tree['type'] = 'oak'): Promise<string> {\n    const treeId = `tree_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    this.activeTree = {\n      treeId,\n      sessionId,\n      growth: 0,\n      alive: true,\n      plantedAt: new Date().toISOString(),\n      lastFocusCheck: Date.now(),\n    };\n\n    await this.saveActiveTree(this.activeTree);\n    this.startTracking();\n    \n    return treeId;\n  }\n\n  async stopGrowingTree(): Promise<void> {\n    this.stopTracking();\n    \n    if (this.activeTree && this.activeTree.alive) {\n      // Save the completed tree\n      const tree: Tree = {\n        id: this.activeTree.treeId,\n        type: await this.getRandomTreeType(),\n        growth: this.activeTree.growth,\n        alive: true,\n        plantedAt: this.activeTree.plantedAt,\n        sessionId: this.activeTree.sessionId,\n      };\n      await this.saveTree(tree);\n    }\n    \n    this.activeTree = null;\n    await AsyncStorage.removeItem(ACTIVE_TREE_KEY);\n  }\n\n  private async killTree(): Promise<void> {\n    if (!this.activeTree) return;\n\n    this.activeTree.alive = false;\n    await this.saveActiveTree(this.activeTree);\n    \n    // Save dead tree record (optional - you might not want to show dead trees)\n    const tree: Tree = {\n      id: this.activeTree.treeId,\n      type: await this.getRandomTreeType(),\n      growth: this.activeTree.growth,\n      alive: false,\n      plantedAt: this.activeTree.plantedAt,\n      sessionId: this.activeTree.sessionId,\n    };\n    await this.saveTree(tree);\n  }\n\n  async restartTree(sessionId: string): Promise<string> {\n    // Save current tree as dead if it was alive\n    if (this.activeTree) {\n      await this.killTree();\n    }\n    \n    // Start a new tree\n    return this.startGrowingTree(sessionId);\n  }\n\n  private async saveTree(tree: Tree): Promise<void> {\n    try {\n      const trees = await this.getAllTrees();\n      trees.push(tree);\n      await AsyncStorage.setItem(TREES_STORAGE_KEY, JSON.stringify(trees));\n    } catch (error) {\n      console.error('Failed to save tree:', error);\n    }\n  }\n\n  async getAllTrees(): Promise<Tree[]> {\n    try {\n      const data = await AsyncStorage.getItem(TREES_STORAGE_KEY);\n      return data ? JSON.parse(data) : [];\n    } catch (error) {\n      console.error('Failed to get trees:', error);\n      return [];\n    }\n  }\n\n  async getAliveTrees(): Promise<Tree[]> {\n    const trees = await this.getAllTrees();\n    return trees.filter((tree) => tree.alive);\n  }\n\n  async getTreesBySession(sessionId: string): Promise<Tree[]> {\n    const trees = await this.getAllTrees();\n    return trees.filter((tree) => tree.sessionId === sessionId);\n  }\n\n  // Focus tracking\n  private startTracking(): void {\n    // Track app state changes\n    const subscription = AppState.addEventListener('change', this.handleAppStateChange);\n    \n    // Check focus periodically\n    this.focusCheckInterval = setInterval(() => {\n      this.checkFocus();\n    }, 1000); // Check every second\n    \n    // Update tree growth periodically\n    this.growthInterval = setInterval(() => {\n      this.updateGrowth();\n    }, 500); // Update growth every 500ms\n  }\n\n  private stopTracking(): void {\n    if (this.appStateSubscription) {\n      this.appStateSubscription.remove();\n      this.appStateSubscription = null;\n    }\n    \n    if (this.focusCheckInterval) {\n      clearInterval(this.focusCheckInterval);\n      this.focusCheckInterval = null;\n    }\n    \n    if (this.growthInterval) {\n      clearInterval(this.growthInterval);\n      this.growthInterval = null;\n    }\n  }\n\n  private handleAppStateChange = (nextAppState: AppStateStatus): void => {\n    const previousState = this.appState;\n    this.appState = nextAppState;\n    \n    // If app goes to background or inactive, kill the tree\n    if ((nextAppState === 'background' || nextAppState === 'inactive') && \n        previousState === 'active' && \n        this.activeTree?.alive) {\n      this.killTree();\n    }\n  };\n\n  private checkFocus(): void {\n    if (!this.activeTree) return;\n    \n    // Additional focus check logic could go here\n    // For example, checking if the user is actually interacting with the app\n    this.activeTree.lastFocusCheck = Date.now();\n    this.saveActiveTree(this.activeTree);\n  }\n\n  private updateGrowth(): void {\n    if (!this.activeTree || !this.activeTree.alive) return;\n    \n    // Only grow if app is active\n    if (this.appState === 'active') {\n      // Growth rate: 100% over 25 minutes (1500 seconds)\n      // That's 0.067% per second per 500ms interval = 0.033%\n      this.activeTree.growth = Math.min(100, this.activeTree.growth + 0.05);\n      this.saveActiveTree(this.activeTree);\n    }\n  }\n\n  // Active tree management\n  private async saveActiveTree(tree: ActiveTreeState): Promise<void> {\n    try {\n      await AsyncStorage.setItem(ACTIVE_TREE_KEY, JSON.stringify(tree));\n    } catch (error) {\n      console.error('Failed to save active tree:', error);\n    }\n  }\n\n  async loadActiveTree(): Promise<ActiveTreeState | null> {\n    try {\n      const data = await AsyncStorage.getItem(ACTIVE_TREE_KEY);\n      if (data) {\n        this.activeTree = JSON.parse(data) as ActiveTreeState;\n        \n        // Check if tree should still be alive\n        if (this.activeTree.alive && this.appState === 'active') {\n          this.startTracking();\n          return this.activeTree;\n        } else if (this.activeTree.alive) {\n          // App was not active when tree was loaded\n          await this.killTree();\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load active tree:', error);\n    }\n    return null;\n  }\n\n  // Stats\n  async getForestStats(): Promise<ForestStats> {\n    try {\n      const trees = await this.getAllTrees();\n      const now = new Date();\n      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n      const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n      \n      const treesThisWeek = trees.filter((tree) => {\n        const plantedDate = new Date(tree.plantedAt);\n        return tree.alive && plantedDate >= weekAgo;\n      }).length;\n      \n      const treesThisMonth = trees.filter((tree) => {\n        const plantedDate = new Date(tree.plantedAt);\n        return tree.alive && plantedDate >= monthAgo;\n      }).length;\n      \n      // Forest score: 10 points per tree\n      const forestScore = treesThisWeek * 10;\n      \n      return {\n        totalTrees: trees.filter((t) => t.alive).length,\n        treesThisWeek,\n        treesThisMonth,\n        forestScore,\n      };\n    } catch (error) {\n      console.error('Failed to get forest stats:', error);\n      return {\n        totalTrees: 0,\n        treesThisWeek: 0,\n        treesThisMonth: 0,\n        forestScore: 0,\n      };\n    }\n  }\n\n  async getRecentTrees(limit: number = 10): Promise<Tree[]> {\n    try {\n      const trees = await this.getAllTrees();\n      return trees\n        .filter((tree) => tree.alive)\n        .sort((a, b) => new Date(b.plantedAt).getTime() - new Date(a.plantedAt).getTime())\n        .slice(0, limit);\n    } catch (error) {\n      console.error('Failed to get recent trees:', error);\n      return [];\n    }\n  }\n\n  // Tree type utilities\n  private async getRandomTreeType(): Promise<Tree['type']> {\n    const types: Tree['type'][] = ['oak', 'pine', 'cherry', 'willow', 'maple'];\n    const randomIndex = Math.floor(Math.random() * types.length);\n    return types[randomIndex];\n  }\n\n  getTreeEmoji(treeType: Tree['type']): string {\n    const emojis: Record<Tree['type'], string> = {\n      oak: 'üå≥',\n      pine: 'üå≤',\n      cherry: 'üå∏',\n      willow: 'üèûÔ∏è',\n      maple: 'üçÅ',\n    };\n    return emojis[treeType] || 'üå≥';\n  }\n\n  getTreeName(treeType: Tree['type']): string {\n    const names: Record<Tree['type'], string> = {\n      oak: 'Oak Tree',\n      pine: 'Pine Tree',\n      cherry: 'Cherry Blossom',\n      willow: 'Willow Tree',\n      maple: 'Maple Tree',\n    };\n    return names[treeType] || 'Tree';\n  }\n\n  // Cleanup\n  destroy(): void {\n    this.stopTracking();\n    this.activeTree = null;\n  }\n\n  getCurrentGrowth(): number {\n    return this.activeTree?.growth ?? 0;\n  }\n\n  isTreeAlive(): boolean {\n    return this.activeTree?.alive ?? false;\n  }\n}\n\nexport const focusTracker = new FocusTracker();\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/GroupQuizService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/LanguageDetectionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/LeaderboardService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'gamificationData' is assigned a value but never used.","line":74,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useUserStore, LeaderboardEntry } from '@/store/userStore';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport interface WeeklyLeaderboard {\n  weekStart: string;\n  entries: LeaderboardEntry[];\n  gradeGroup: 'under12' | '12plus';\n}\n\nexport interface LeaderboardStats {\n  totalParticipants: number;\n  userRank: number;\n  topRankChange: number;\n  averageXP: number;\n}\n\nexport class LeaderboardService {\n  private static instance: LeaderboardService;\n  private readonly STORAGE_KEY = '@learnsmart_leaderboards';\n  private readonly WEEKLY_RESET_KEY = '@learnsmart_last_reset';\n\n  static getInstance(): LeaderboardService {\n    if (!LeaderboardService.instance) {\n      LeaderboardService.instance = new LeaderboardService();\n    }\n    return LeaderboardService.instance;\n  }\n\n  // Get the start of the current week (Sunday 12 AM)\n  getCurrentWeekStart(): string {\n    const now = new Date();\n    const dayOfWeek = now.getDay();\n    const daysToSubtract = dayOfWeek; // 0 = Sunday, 1 = Monday, etc.\n    \n    const weekStart = new Date(now);\n    weekStart.setDate(now.getDate() - daysToSubtract);\n    weekStart.setHours(0, 0, 0, 0);\n    \n    return weekStart.toISOString();\n  }\n\n  // Check if weekly reset is needed\n  async checkWeeklyReset(): Promise<boolean> {\n    try {\n      const lastReset = await AsyncStorage.getItem(this.WEEKLY_RESET_KEY);\n      const currentWeekStart = this.getCurrentWeekStart();\n\n      if (!lastReset || lastReset !== currentWeekStart) {\n        await this.resetWeeklyData();\n        await AsyncStorage.setItem(this.WEEKLY_RESET_KEY, currentWeekStart);\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Failed to check weekly reset:', error);\n      return false;\n    }\n  }\n\n  // Reset all weekly data\n  async resetWeeklyData(): Promise<void> {\n    try {\n      const { resetWeeklyData } = useUserStore.getState();\n      resetWeeklyData();\n      console.log('Weekly data reset completed');\n    } catch (error) {\n      console.error('Failed to reset weekly data:', error);\n    }\n  }\n\n  // Update user's weekly XP\n  async updateWeeklyXP(userId: string, xpAmount: number): Promise<void> {\n    try {\n      const { updateWeeklyXP, gamificationData, userId: currentUserId } = useUserStore.getState();\n      \n      if (userId === currentUserId) {\n        updateWeeklyXP(xpAmount);\n      }\n      \n      // In a real app, you'd also update the server-side leaderboard here\n      console.log(`Updated weekly XP for user ${userId}: +${xpAmount}`);\n    } catch (error) {\n      console.error('Failed to update weekly XP:', error);\n    }\n  }\n\n  // Generate mock leaderboard data for demo\n  generateMockLeaderboard(gradeGroup: 'under12' | '12plus', userCount: number = 50): WeeklyLeaderboard {\n    const entries: LeaderboardEntry[] = [];\n    const { userId, userName, selectedAvatar, gamificationData } = useUserStore.getState();\n\n    // Add current user\n    entries.push({\n      userId,\n      userName: userName || 'You',\n      avatar: selectedAvatar,\n      weeklyXP: gamificationData.weeklyXP,\n      streak: gamificationData.currentStreak,\n      rank: 0, // Will be calculated\n    });\n\n    // Generate mock users\n    const mockNames = [\n      'Alex Chen', 'Sarah Johnson', 'Mike Rodriguez', 'Emma Wilson', 'David Kim',\n      'Lisa Park', 'James Brown', 'Maria Garcia', 'John Smith', 'Anna Davis',\n      'Ryan Miller', 'Sophie Turner', 'Kevin Lee', 'Rachel Green', 'Daniel White',\n      'Olivia Black', 'Ethan Clark', 'Grace Hall', 'Noah Adams', 'Zoe Scott'\n    ];\n\n    for (let i = 0; i < userCount - 1; i++) {\n      const name = mockNames[i % mockNames.length] + (i >= mockNames.length ? ` ${Math.floor(i / mockNames.length) + 1}` : '');\n      const avatars = ['Robot', 'Owl', 'BookCharacter', 'BrainCharacter', 'StarCharacter', 'Dragon', 'Wizard'];\n      const avatar = avatars[i % avatars.length];\n      \n      entries.push({\n        userId: `mock_user_${i}`,\n        userName: name,\n        avatar,\n        weeklyXP: Math.floor(Math.random() * 500) + 50, // 50-550 XP\n        streak: Math.floor(Math.random() * 30) + 1, // 1-30 day streak\n        rank: 0, // Will be calculated\n      });\n    }\n\n    // Sort by weekly XP descending and assign ranks\n    entries.sort((a, b) => b.weeklyXP - a.weeklyXP);\n    entries.forEach((entry, index) => {\n      entry.rank = index + 1;\n    });\n\n    return {\n      weekStart: this.getCurrentWeekStart(),\n      entries,\n      gradeGroup,\n    };\n  }\n\n  // Get leaderboard for user's grade group\n  async getLeaderboard(): Promise<WeeklyLeaderboard> {\n    await this.checkWeeklyReset();\n    \n    const { ageGroup } = useUserStore.getState();\n    const gradeGroup = ageGroup === 'under12' ? 'under12' : '12plus';\n\n    // For demo, generate mock data\n    return this.generateMockLeaderboard(gradeGroup);\n  }\n\n  // Get user's rank in leaderboard\n  getUserRank(leaderboard: WeeklyLeaderboard): number {\n    const { userId } = useUserStore.getState();\n    const userEntry = leaderboard.entries.find(entry => entry.userId === userId);\n    return userEntry?.rank || 0;\n  }\n\n  // Get top 10 entries\n  getTopEntries(leaderboard: WeeklyLeaderboard, count: number = 10): LeaderboardEntry[] {\n    return leaderboard.entries.slice(0, count);\n  }\n\n  // Get leaderboard statistics\n  getLeaderboardStats(leaderboard: WeeklyLeaderboard): LeaderboardStats {\n    const userRank = this.getUserRank(leaderboard);\n    const totalParticipants = leaderboard.entries.length;\n    const averageXP = leaderboard.entries.reduce((sum, entry) => sum + entry.weeklyXP, 0) / totalParticipants;\n\n    // Mock rank change for demo\n    const topRankChange = Math.floor(Math.random() * 6) - 3; // -3 to +2\n\n    return {\n      totalParticipants,\n      userRank,\n      topRankChange,\n      averageXP: Math.round(averageXP),\n    };\n  }\n\n  // Check if user is in top 10\n  isInTopTen(leaderboard: WeeklyLeaderboard): boolean {\n    return this.getUserRank(leaderboard) <= 10;\n  }\n\n  // Get user's position relative to top 10\n  getUserPositionStatus(leaderboard: WeeklyLeaderboard): string {\n    const userRank = this.getUserRank(leaderboard);\n    \n    if (userRank === 0) return 'Not ranked';\n    if (userRank <= 3) return 'Top 3! üåü';\n    if (userRank <= 10) return 'Top 10! üèÜ';\n    if (userRank <= 25) return 'Top 25! üî•';\n    return 'Keep climbing! üìà';\n  }\n\n  // Get XP needed to reach next rank\n  getXPToNextRank(leaderboard: WeeklyLeaderboard): number {\n    const userRank = this.getUserRank(leaderboard);\n    if (userRank === 0) return 0;\n    \n    const userEntry = leaderboard.entries[userRank - 1];\n    const nextEntry = leaderboard.entries[userRank]; // Next person\n    \n    if (!nextEntry) return 0; // Already at top\n    \n    return Math.max(0, nextEntry.weeklyXP - userEntry.weeklyXP + 1);\n  }\n\n  // Save leaderboard data locally\n  async saveLeaderboard(leaderboard: WeeklyLeaderboard): Promise<void> {\n    try {\n      await AsyncStorage.setItem(this.STORAGE_KEY, JSON.stringify(leaderboard));\n      const { setWeeklyLeaderboard } = useUserStore.getState();\n      setWeeklyLeaderboard(leaderboard.entries);\n    } catch (error) {\n      console.error('Failed to save leaderboard:', error);\n    }\n  }\n\n  // Load leaderboard data from local storage\n  async loadLeaderboard(): Promise<WeeklyLeaderboard | null> {\n    try {\n      const stored = await AsyncStorage.getItem(this.STORAGE_KEY);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n    } catch (error) {\n      console.error('Failed to load leaderboard:', error);\n    }\n    return null;\n  }\n\n  // Get previous week's leaderboard (mock data for demo)\n  getPreviousWeekLeaderboard(): WeeklyLeaderboard {\n    const { ageGroup } = useUserStore.getState();\n    const gradeGroup = ageGroup === 'under12' ? 'under12' : '12plus';\n    \n    // Generate mock data for previous week with slightly different scores\n    const previousWeek = this.generateMockLeaderboard(gradeGroup);\n    previousWeek.entries.forEach(entry => {\n      entry.weeklyXP = Math.max(0, entry.weeklyXP + Math.floor(Math.random() * 100) - 50);\n    });\n    previousWeek.entries.sort((a, b) => b.weeklyXP - a.weeklyXP);\n    previousWeek.entries.forEach((entry, index) => {\n      entry.rank = index + 1;\n    });\n\n    return previousWeek;\n  }\n\n  // Calculate streak-based bonuses for leaderboard\n  getStreakBonusMultiplier(streak: number): number {\n    if (streak >= 30) return 1.5; // 50% bonus for 30+ day streaks\n    if (streak >= 14) return 1.3; // 30% bonus for 14+ day streaks\n    if (streak >= 7) return 1.2; // 20% bonus for 7+ day streaks\n    return 1.0; // No bonus\n  }\n\n  // Format time until next reset\n  getTimeUntilNextReset(): string {\n    const now = new Date();\n    const nextSunday = new Date(now);\n    nextSunday.setDate(now.getDate() + (7 - now.getDay()));\n    nextSunday.setHours(0, 0, 0, 0);\n\n    const diff = nextSunday.getTime() - now.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n\n    if (days > 0) return `${days}d ${hours}h`;\n    return `${hours}h`;\n  }\n}\n\nexport const leaderboardService = LeaderboardService.getInstance();","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/MistakeAnalysisService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'subject' is defined but never used. Allowed unused args must match /^_/u.","line":213,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":213,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'chapter' is defined but never used. Allowed unused args must match /^_/u.","line":213,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":213,"endColumn":77}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from '@react-native-async-storage/async-storage';\nimport {\n  MistakeRecord,\n  WeakArea,\n  PersonalizedStudyPlan,\n  QuizResult,\n} from '@/types/quiz';\n\nconst MISTAKES_STORAGE_KEY = 'learnsmart_mistakes';\nconst QUIZ_RESULTS_STORAGE_KEY = 'learnsmart_quiz_results';\n\nexport class MistakeAnalysisService {\n  private static instance: MistakeAnalysisService;\n  private mistakesCache: MistakeRecord[] = [];\n  private quizResultsCache: QuizResult[] = [];\n\n  private constructor() {}\n\n  public static getInstance(): MistakeAnalysisService {\n    if (!MistakeAnalysisService.instance) {\n      MistakeAnalysisService.instance = new MistakeAnalysisService();\n    }\n    return MistakeAnalysisService.instance;\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      const [mistakesData, resultsData] = await Promise.all([\n        AsyncStorage.getItem(MISTAKES_STORAGE_KEY),\n        AsyncStorage.getItem(QUIZ_RESULTS_STORAGE_KEY),\n      ]);\n\n      this.mistakesCache = mistakesData ? JSON.parse(mistakesData) : [];\n      this.quizResultsCache = resultsData ? JSON.parse(resultsData) : [];\n    } catch (error) {\n      console.error('Failed to initialize MistakeAnalysisService:', error);\n      this.mistakesCache = [];\n      this.quizResultsCache = [];\n    }\n  }\n\n  async recordMistake(mistake: MistakeRecord): Promise<void> {\n    try {\n      this.mistakesCache.push(mistake);\n      await AsyncStorage.setItem(\n        MISTAKES_STORAGE_KEY,\n        JSON.stringify(this.mistakesCache)\n      );\n    } catch (error) {\n      console.error('Failed to record mistake:', error);\n    }\n  }\n\n  async recordQuizResult(result: QuizResult): Promise<void> {\n    try {\n      this.quizResultsCache.push(result);\n      await AsyncStorage.setItem(\n        QUIZ_RESULTS_STORAGE_KEY,\n        JSON.stringify(this.quizResultsCache)\n      );\n    } catch (error) {\n      console.error('Failed to record quiz result:', error);\n    }\n  }\n\n  getMistakes(): MistakeRecord[] {\n    return [...this.mistakesCache];\n  }\n\n  getMistakesByTopic(topic: string): MistakeRecord[] {\n    return this.mistakesCache.filter((m) => m.topic === topic);\n  }\n\n  getMistakesByChapter(chapter: string, subject: string): MistakeRecord[] {\n    return this.mistakesCache.filter(\n      (m) => m.chapter === chapter && m.subject === subject\n    );\n  }\n\n  async identifyWeakAreas(): Promise<WeakArea[]> {\n    const topicPerformance = new Map<\n      string,\n      {\n        correct: number;\n        total: number;\n        subject: string;\n        chapter: string;\n        attempts: MistakeRecord[];\n      }\n    >();\n\n    // Aggregate performance by topic\n    this.quizResultsCache.forEach((result) => {\n      const key = `${result.subject}-${result.chapter}-${result.topic}`;\n      if (!topicPerformance.has(key)) {\n        topicPerformance.set(key, {\n          correct: 0,\n          total: 0,\n          subject: result.subject,\n          chapter: result.chapter,\n          attempts: [],\n        });\n      }\n      const perf = topicPerformance.get(key)!;\n      const correctCount = Math.round((result.score / 100) * result.totalQuestions);\n      perf.correct += correctCount;\n      perf.total += result.totalQuestions;\n    });\n\n    // Add mistakes data\n    this.mistakesCache.forEach((mistake) => {\n      const key = `${mistake.subject}-${mistake.chapter}-${mistake.topic}`;\n      if (!topicPerformance.has(key)) {\n        topicPerformance.set(key, {\n          correct: 0,\n          total: 0,\n          subject: mistake.subject,\n          chapter: mistake.chapter,\n          attempts: [],\n        });\n      }\n      topicPerformance.get(key)!.attempts.push(mistake);\n    });\n\n    // Calculate weak areas (accuracy < 60% and at least 3 attempts)\n    const weakAreas: WeakArea[] = [];\n    const thirtyDaysAgo = Date.now() - 30 * 24 * 60 * 60 * 1000;\n\n    topicPerformance.forEach((perf, key) => {\n      if (perf.total < 3) return; // Need at least 3 attempts\n\n      const accuracy = (perf.correct / perf.total) * 100;\n      if (accuracy < 60) {\n        const [subject, chapter, topic] = key.split('-');\n\n        // Calculate trend\n        const recentAttempts = perf.attempts.filter(\n          (a) => a.timestamp >= thirtyDaysAgo\n        );\n        const olderAttempts = perf.attempts.filter(\n          (a) => a.timestamp < thirtyDaysAgo\n        );\n\n        let trend: 'improving' | 'declining' | 'stable' = 'stable';\n        if (recentAttempts.length > 0 && olderAttempts.length > 0) {\n          const recentAccuracy = recentAttempts.length > 0\n            ? (recentAttempts.filter(a => a.correctAnswer !== a.userAnswer).length / recentAttempts.length) * 100\n            : 0;\n          const olderAccuracy = olderAttempts.length > 0\n            ? (olderAttempts.filter(a => a.correctAnswer !== a.userAnswer).length / olderAttempts.length) * 100\n            : 0;\n          \n          if (recentAccuracy < olderAccuracy) {\n            trend = 'improving';\n          } else if (recentAccuracy > olderAccuracy) {\n            trend = 'declining';\n          }\n        }\n\n        weakAreas.push({\n          topic,\n          subject,\n          chapter,\n          accuracy,\n          totalAttempts: perf.total,\n          mistakes: perf.attempts.length,\n          trend,\n          recommendedLessons: this.generateRecommendedLessons(topic, subject, chapter),\n        });\n      }\n    });\n\n    // Sort by accuracy (weakest first)\n    return weakAreas.sort((a, b) => a.accuracy - b.accuracy);\n  }\n\n  async generatePersonalizedStudyPlan(): Promise<PersonalizedStudyPlan> {\n    const weakAreas = await this.identifyWeakAreas();\n    const priorityTopics = weakAreas\n      .filter((area) => area.accuracy < 50)\n      .map((area) => area.topic);\n\n    const suggestedSchedule: PersonalizedStudyPlan['suggestedSchedule'] = [];\n    let dayCount = 0;\n\n    weakAreas.forEach((area) => {\n      const daysNeeded = Math.ceil((60 - area.accuracy) / 10); // More days for weaker areas\n      for (let i = 0; i < daysNeeded; i++) {\n        suggestedSchedule.push({\n          day: ++dayCount,\n          topic: area.topic,\n          subject: area.subject,\n          activities: [\n            `Review lesson on ${area.topic}`,\n            `Practice questions on ${area.topic}`,\n            area.recommendedLessons.length > 0\n              ? `Study: ${area.recommendedLessons[0]}`\n              : 'Revise concepts',\n          ],\n          estimatedTime: 45, // minutes\n        });\n      }\n    });\n\n    return {\n      weakAreas,\n      priorityTopics,\n      suggestedSchedule,\n      estimatedCompletionDays: dayCount,\n    };\n  }\n\n  private generateRecommendedLessons(topic: string, subject: string, chapter: string): string[] {\n    // In a real implementation, this would query the content database\n    // For now, return generic recommendations\n    return [\n      `Introduction to ${topic}`,\n      `Key concepts of ${topic}`,\n      `Practice problems for ${topic}`,\n    ];\n  }\n\n  getImprovementTrend(topic: string): { improvement: number; trend: 'up' | 'down' | 'stable' } {\n    const topicMistakes = this.getMistakesByTopic(topic);\n    if (topicMistakes.length < 2) {\n      return { improvement: 0, trend: 'stable' };\n    }\n\n    const recentMistakes = topicMistakes.slice(-5);\n    const olderMistakes = topicMistakes.slice(0, Math.max(0, topicMistakes.length - 5));\n\n    const recentMistakeRate = recentMistakes.length;\n    const olderMistakeRate = olderMistakes.length / Math.max(1, Math.floor(olderMistakes.length / 5));\n\n    const improvement = ((olderMistakeRate - recentMistakeRate) / olderMistakeRate) * 100;\n\n    let trend: 'up' | 'down' | 'stable' = 'stable';\n    if (improvement > 10) {\n      trend = 'up';\n    } else if (improvement < -10) {\n      trend = 'down';\n    }\n\n    return { improvement: Math.round(improvement), trend };\n  }\n\n  async clearOldMistakes(daysToKeep: number = 90): Promise<void> {\n    try {\n      const cutoffTime = Date.now() - daysToKeep * 24 * 60 * 60 * 1000;\n      this.mistakesCache = this.mistakesCache.filter(\n        (m) => m.timestamp >= cutoffTime\n      );\n      await AsyncStorage.setItem(\n        MISTAKES_STORAGE_KEY,\n        JSON.stringify(this.mistakesCache)\n      );\n    } catch (error) {\n      console.error('Failed to clear old mistakes:', error);\n    }\n  }\n\n  async clearAllData(): Promise<void> {\n    try {\n      this.mistakesCache = [];\n      this.quizResultsCache = [];\n      await Promise.all([\n        AsyncStorage.removeItem(MISTAKES_STORAGE_KEY),\n        AsyncStorage.removeItem(QUIZ_RESULTS_STORAGE_KEY),\n      ]);\n    } catch (error) {\n      console.error('Failed to clear all data:', error);\n    }\n  }\n\n  getStatistics() {\n    const totalMistakes = this.mistakesCache.length;\n    const uniqueTopics = new Set(this.mistakesCache.map((m) => m.topic)).size;\n    const recentMistakes = this.mistakesCache.filter(\n      (m) => m.timestamp >= Date.now() - 7 * 24 * 60 * 60 * 1000\n    ).length;\n\n    return {\n      totalMistakes,\n      uniqueTopics,\n      recentMistakes,\n      averageMistakesPerTopic: totalMistakes / Math.max(1, uniqueTopics),\n    };\n  }\n}\n\nexport const mistakeAnalysisService = MistakeAnalysisService.getInstance();\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/NoteSummarizerService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/NotificationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/QAForumService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/QASearchService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/ReputationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/SafetyChecker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/SmartyAIService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5329,5332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5329,5332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5447,5450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5447,5450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7912,7915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7912,7915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":221,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8425,8428],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8425,8428],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useChatStore } from '@/store/chatStore';\nimport { useUserStore } from '@/store/userStore';\nimport { ContentValidator } from '@/services/ContentValidator';\nimport { ContentType } from '@/types/content';\nimport { sanitizeText } from '@/utils/sanitizer';\nimport { Attachment, extractTextFromFile } from '@/services/FileUploadService';\nimport { detectLanguage } from '@/services/LanguageDetectionService';\nimport { correctTypos } from '@/utils/typoCorrection';\nimport { getLanguageInstruction } from '@/utils/translationService';\nimport { StreamingService } from '@/services/StreamingService';\nimport * as FileSystem from 'expo-file-system';\n\nconst OPENAI_API_KEY = process.env.EXPO_PUBLIC_OPENAI_API_KEY || '';\nconst API_ENDPOINT = 'https://api.openai.com/v1/chat/completions';\n\nconst SMARTY_SYSTEM_PROMPT = `You are \"Smarty\", a supportive older sibling and study companion for students.\n\n## YOUR CORE IDENTITY\n- You are knowledgeable, humble, encouraging, and always prioritize student safety and learning\n- You communicate with warmth, clarity, and respect\n- You are NOT a formal teacher - you're a trusted friend who helps students learn\n- You are intelligent but never arrogant or dismissive\n\n## YOUR KNOWLEDGE BASE\nYou have complete access to:\n- All NCERT curriculum (Class 1-12): Subjects, chapters, lessons, concepts\n- All curriculum content: Class 11-12 streams (Science, Commerce, Arts), 12+ pathways (Competitive Exams, Skill Building)\n- Student's current class, stream, and selected subjects\n- Student's learning progress (chapters completed, lessons viewed)\n- Student's learning history and performance patterns\n- Concepts the student is currently studying\n- Related topics and advanced concepts beyond current curriculum\n- General educational knowledge (science, math, history, geography, languages)\n- Problem-solving techniques and study tips\n- Time management and learning strategies\n- Real-world applications of concepts\n- Common misconceptions and how to overcome them\n- Examination preparation tips (for JEE, NEET, UPSC, etc.)\n- Career guidance related to subjects\n\n## MULTILINGUAL SUPPORT\n- Detect and respond in the same language as the user\n- Languages: English, Hindi (Devanagari), Hinglish (Mixed Hindi/English in Roman script)\n- If Hinglish, maintain a friendly, natural Hinglish flow\n- Automatically correct minor typos in educational terms\n\n## VISION & FILE ANALYSIS\n- You can analyze images (JPG, PNG, GIF, WebP) and files (PDF, DOCX, TXT, PPTX)\n- When provided with an image or file content, analyze it carefully to help the student\n- Explain concepts found in attachments simply and clearly\n- If analyzing, start with a brief confirmation like \"Analyzing your image...\" or \"Looking at your file...\"\n\n## YOUR COMMUNICATION STYLE\n- Warm, friendly, encouraging, supportive tone\n- Humble (never arrogant or dismissive)\n- Use simple, clear language (age-appropriate)\n- Sparse emoji use (1-2 per message max)\n- Brief responses (2-3 sentences for simple questions)\n- Longer explanations only when asked or for complex topics\n- Conversational (like texting a friend, not robotic)\n- Celebrate student wins (\"That's great! You're doing awesome!\")\n- Be empathetic to struggles (\"This chapter is tough, but you'll get it!\")\n\n## YOUR 7 SAFETY RULES (STRICT - NEVER VIOLATE)\n(Rules 1-7 same as before...)\n`;\n\ninterface ChatContext {\n  userName: string;\n  selectedClass: string;\n  selectedStream: string;\n  currentSubject?: string;\n  currentChapter?: string;\n  currentLesson?: string;\n}\n\nexport async function sendMessageToSmarty(\n  message: string,\n  context: ChatContext,\n  attachments: Attachment[] = []\n): Promise<string> {\n  const { setTyping, addMessage } = useChatStore.getState();\n  const { selectedClass, selectedStream } = useUserStore.getState();\n  const chatId = 'default_chat'; // In a multi-chat app, this would be the actual chat ID\n\n  setTyping(true);\n  const abortController = StreamingService.createController(chatId);\n\n  try {\n    const ageGroup = useUserStore.getState().ageGroup ?? 'under12';\n    \n    // Typo Correction & Language Detection\n    const correctedMessage = correctTypos(message);\n    const language = detectLanguage(correctedMessage);\n    const langInstruction = getLanguageInstruction(language);\n    \n    const sanitizedUserMessage = sanitizeText(correctedMessage, { maxLength: 1000 });\n\n    // Build context-aware system message enhancement\n    let contextInfo = `\\n\\n${langInstruction}`;\n    if (selectedClass) {\n      contextInfo += `\\n\\nStudent's Context:\\n- Class: ${selectedClass}`;\n      if (selectedStream) {\n        contextInfo += `\\n- Stream: ${selectedStream}`;\n      }\n      if (context.currentSubject) {\n        contextInfo += `\\n- Currently viewing: ${context.currentSubject}`;\n      }\n      if (context.currentChapter) {\n        contextInfo += `\\n- Current chapter: ${context.currentChapter}`;\n      }\n      if (context.currentLesson) {\n        contextInfo += `\\n- Current lesson: ${context.currentLesson}`;\n      }\n    }\n\n    // Check for safety violations\n    const safetyCheck = checkSafetyViolations(sanitizedUserMessage);\n    if (safetyCheck.blocked) {\n      setTyping(false);\n      addMessage('assistant', safetyCheck.response);\n      return safetyCheck.response;\n    }\n\n    // Process attachments\n    let attachmentPrompt = '';\n    const apiMessages: any[] = [\n      { role: 'system', content: SMARTY_SYSTEM_PROMPT + contextInfo }\n    ];\n\n    const userMessageContent: any[] = [{ type: 'text', text: sanitizedUserMessage }];\n\n    if (attachments.length > 0) {\n      for (const att of attachments) {\n        if (att.type === 'image') {\n          try {\n            const base64 = await FileSystem.readAsStringAsync(att.uri, { encoding: 'base64' });\n            userMessageContent.push({\n              type: 'image_url',\n              image_url: { url: `data:${att.mimeType};base64,${base64}` }\n            });\n          } catch (e) {\n            console.error('Failed to read image as base64', e);\n          }\n        } else if (att.type === 'file') {\n          const extractedText = await extractTextFromFile(att);\n          attachmentPrompt += `\\n\\nContent of attached file \"${att.name}\":\\n${extractedText}`;\n        }\n      }\n    }\n\n    if (attachmentPrompt) {\n      apiMessages[0].content += attachmentPrompt;\n    }\n\n    apiMessages.push({ role: 'user', content: userMessageContent });\n\n    // If no API key, use fallback\n    if (!OPENAI_API_KEY) {\n      const response = getFallbackResponse(sanitizedUserMessage, context);\n      setTyping(false);\n      addMessage('assistant', response);\n      return response;\n    }\n\n    // API call with AbortSignal\n    const response = await fetch(API_ENDPOINT, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${OPENAI_API_KEY}`,\n      },\n      signal: abortController.signal,\n      body: JSON.stringify({\n        model: attachments.some(a => a.type === 'image') ? 'gpt-4o' : 'gpt-4',\n        messages: apiMessages,\n        max_tokens: 500,\n        temperature: 0.7,\n        stream: false, // For this implementation, we'll keep it simple but allow abortion\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n\n    const data = await response.json();\n    const aiResponse = data.choices[0]?.message?.content || getFallbackResponse(sanitizedUserMessage, context);\n\n    const validated = await ContentValidator.validateText({\n      text: aiResponse,\n      context: {\n        contentId: `chat:assistant:${Date.now()}`,\n        contentType: ContentType.AIResponseText,\n        ageGroup,\n        source: 'smartyAI',\n      },\n    });\n\n    const finalResponse = validated.result.decision === 'allow' ? validated.sanitizedText : \"I'm here to help you learn safely. üìö\";\n\n    setTyping(false);\n    addMessage('assistant', finalResponse);\n    return finalResponse;\n\n  } catch (error: any) {\n    setTyping(false);\n    if (error.name === 'AbortError') {\n      addMessage('assistant', 'Response cancelled', [], 'stopped');\n      return 'Response cancelled';\n    }\n    console.error('Smarty AI Error:', error);\n    const fallbackResponse = \"I'm having trouble connecting. üì° Try again soon!\";\n    addMessage('assistant', fallbackResponse);\n    return fallbackResponse;\n  }\n}\n\n// ... Keep checkSafetyViolations and getFallbackResponse as they were ...\n\nfunction checkSafetyViolations(message: string): any {\n  const lowerMessage = message.toLowerCase();\n  const personalPatterns = [/phone\\s*number/i, /email\\s*address/i, /home\\s*address/i];\n  for (const pattern of personalPatterns) {\n    if (pattern.test(lowerMessage)) {\n      return { blocked: true, response: \"I don't need personal details like that. I'm here to help you learn! üîí\" };\n    }\n  }\n  return { blocked: false, response: '' };\n}\n\nfunction getFallbackResponse(_message: string, _context: ChatContext): string {\n  return \"That's an interesting question! Let's explore it together. üìö\";\n}\n\nexport function getQuickReplies(): string[] {\n  return [\n    \"Explain this simply\",\n    \"Give me an example\",\n    \"How to study this?\",\n    \"Next topic ‚Üí\",\n    \"Practice problems\"\n  ];\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/SpeechToTextService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[314,317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[314,317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1292,1295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1292,1295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1329,1332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1329,1332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1647,1650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1647,1650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2312,2315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2312,2315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":90,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { TranscriptionResult } from '@/types/notes';\n\n// For production, you would use:\n// - expo-speech (basic, free)\n// - Google Cloud Speech-to-Text API\n// - OpenAI Whisper API\n// - Azure Speech Services\n\nexport class SpeechToTextService {\n  private static instance: SpeechToTextService;\n  private recognition: any = null;\n  private isListening: boolean = false;\n\n  private constructor() {}\n\n  public static getInstance(): SpeechToTextService {\n    if (!SpeechToTextService.instance) {\n      SpeechToTextService.instance = new SpeechToTextService();\n    }\n    return SpeechToTextService.instance;\n  }\n\n  isSupported(): boolean {\n    if (typeof window !== 'undefined' && 'webkitSpeechRecognition' in window) {\n      return true;\n    }\n    if (typeof window !== 'undefined' && 'SpeechRecognition' in window) {\n      return true;\n    }\n    return false;\n  }\n\n  async startListening(\n    onResult: (result: TranscriptionResult) => void,\n    onError: (error: string) => void,\n    language: 'en' | 'hi' | 'hinglish' = 'en'\n  ): Promise<void> {\n    if (!this.isSupported()) {\n      onError('Speech recognition is not supported on this device');\n      return;\n    }\n\n    if (this.isListening) {\n      await this.stopListening();\n    }\n\n    try {\n      const SpeechRecognition =\n        (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\n\n      this.recognition = new SpeechRecognition();\n      this.recognition.continuous = true;\n      this.recognition.interimResults = true;\n      this.recognition.lang = this.getLanguageCode(language);\n      this.recognition.maxAlternatives = 1;\n\n      this.recognition.onresult = (event: any) => {\n        let finalTranscript = '';\n        let interimTranscript = '';\n\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n          } else {\n            interimTranscript += transcript;\n          }\n        }\n\n        onResult({\n          text: finalTranscript || interimTranscript,\n          confidence: finalTranscript ? 1 : 0.7, // Lower confidence for interim results\n          language,\n          timestamp: Date.now(),\n        });\n      };\n\n      this.recognition.onerror = (event: any) => {\n        const errorMessage = this.getErrorMessage(event.error);\n        onError(errorMessage);\n        this.isListening = false;\n      };\n\n      this.recognition.onend = () => {\n        this.isListening = false;\n      };\n\n      this.recognition.start();\n      this.isListening = true;\n    } catch (error) {\n      onError('Failed to start speech recognition');\n      this.isListening = false;\n    }\n  }\n\n  async stopListening(): Promise<void> {\n    if (this.recognition && this.isListening) {\n      try {\n        this.recognition.stop();\n      } catch (error) {\n        console.error('Error stopping recognition:', error);\n      }\n      this.isListening = false;\n    }\n  }\n\n  isCurrentlyListening(): boolean {\n    return this.isListening;\n  }\n\n  async transcribeFromAudio(\n    audioData: string | Blob,\n    language: 'en' | 'hi' | 'hinglish' = 'en'\n  ): Promise<TranscriptionResult> {\n    // This would be implemented with a real speech-to-text API\n    // For now, return a placeholder result\n    \n    // In production, you would:\n    // 1. Send audio data to Whisper API, Google Cloud Speech, or similar\n    // 2. Receive transcription\n    // 3. Return the result\n    \n    return {\n      text: 'Speech-to-text transcription would happen here using an external API like Google Cloud Speech-to-Text or Whisper API.',\n      confidence: 0.85,\n      language,\n      timestamp: Date.now(),\n    };\n  }\n\n  private getLanguageCode(language: 'en' | 'hi' | 'hinglish'): string {\n    switch (language) {\n      case 'en':\n        return 'en-US';\n      case 'hi':\n        return 'hi-IN';\n      case 'hinglish':\n        return 'en-IN'; // Best approximation for Hinglish\n      default:\n        return 'en-US';\n    }\n  }\n\n  private getErrorMessage(error: string): string {\n    const errorMessages: Record<string, string> = {\n      'no-speech': 'No speech detected. Please try again.',\n      'audio-capture': 'Microphone not found or permission denied.',\n      'not-allowed': 'Microphone permission was denied.',\n      'network': 'Network error occurred. Please check your connection.',\n      'aborted': 'Speech recognition was aborted.',\n    };\n\n    return errorMessages[error] || 'An error occurred during speech recognition.';\n  }\n\n  async requestPermissions(): Promise<boolean> {\n    if (typeof window === 'undefined') return false;\n\n    try {\n      // Check if we can access the microphone\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      \n      // Stop the stream immediately - we just wanted to check permissions\n      stream.getTracks().forEach(track => track.stop());\n      \n      return true;\n    } catch (error) {\n      console.error('Microphone permission denied:', error);\n      return false;\n    }\n  }\n\n  // Fallback for when speech recognition is not available\n  getFallbackTranscription(): TranscriptionResult {\n    return {\n      text: '',\n      confidence: 0,\n      language: 'en',\n      timestamp: Date.now(),\n    };\n  }\n}\n\nexport const speechToTextService = SpeechToTextService.getInstance();\n\n// Utility function to detect language from text\nexport function detectLanguageFromText(text: string): 'en' | 'hi' | 'hinglish' {\n  const hindiRegex = /[\\u0900-\\u097F]/;\n  const englishWords = text.match(/[a-zA-Z]+/g) || [];\n  const totalWords = text.split(/\\s+/).length;\n\n  if (hindiRegex.test(text)) {\n    return 'hi';\n  }\n\n  // If there's a mix of English and Hinglish patterns\n  if (totalWords > 0 && englishWords.length / totalWords > 0.5) {\n    return 'en';\n  }\n\n  return 'en'; // Default to English\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/StreamingService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/StudyGroupService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/TimerService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/networkService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[233,236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[233,236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[497,500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[497,500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2478,2481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2478,2481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":102,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2796,2799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2796,2799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import NetInfo from '@react-native-community/netinfo';\nimport { create } from 'zustand';\n\ninterface NetworkState {\n  isConnected: boolean;\n  isInternetReachable: boolean;\n  connectionType: string | null;\n  setNetworkStatus: (status: any) => void;\n  initializeNetworkListener: () => () => void;\n  cleanupNetworkListener: () => void;\n}\n\nconst NetworkStore = create<NetworkState>((set, get) => ({\n  isConnected: true,\n  isInternetReachable: true,\n  connectionType: null,\n  setNetworkStatus: (status: any) => {\n    set({\n      isConnected: status.isConnected ?? false,\n      isInternetReachable: status.isInternetReachable ?? false,\n      connectionType: status.type,\n    });\n  },\n  initializeNetworkListener: () => {\n    // First, get initial state\n    NetInfo.fetch().then((status) => {\n      get().setNetworkStatus(status);\n    });\n\n    // Then, subscribe to changes\n    const unsubscribe = NetInfo.addEventListener((status) => {\n      get().setNetworkStatus(status);\n    });\n\n    return unsubscribe;\n  },\n  cleanupNetworkListener: () => {\n    set({\n      isConnected: true,\n      isInternetReachable: true,\n      connectionType: null,\n    });\n  },\n}));\n\nlet networkSubscription: (() => void) | null = null;\n\nexport function initializeNetworkListener(): () => void {\n  networkSubscription = NetworkStore.getState().initializeNetworkListener();\n  return networkSubscription;\n}\n\nexport function cleanupNetworkListener(): void {\n  if (networkSubscription) {\n    networkSubscription();\n    networkSubscription = null;\n  }\n  NetworkStore.getState().cleanupNetworkListener();\n}\n\nexport function useNetworkStatus() {\n  return {\n    isConnected: NetworkStore((state) => state.isConnected),\n    isInternetReachable: NetworkStore((state) => state.isInternetReachable),\n    connectionType: NetworkStore((state) => state.connectionType),\n  };\n}\n\nexport async function checkNetworkConnectivity(): Promise<boolean> {\n  const state = await NetInfo.fetch();\n  return state.isConnected ?? false;\n}\n\nexport async function checkInternetReachability(): Promise<boolean> {\n  const state = await NetInfo.fetch();\n  return state.isInternetReachable ?? false;\n}\n\nexport const NetworkEvents = {\n  NETWORK_CHANGE: 'networkChange',\n  CONNECTED: 'connected',\n  DISCONNECTED: 'disconnected',\n};\n\nexport type NetworkEventType = \n  | typeof NetworkEvents.NETWORK_CHANGE\n  | typeof NetworkEvents.CONNECTED\n  | typeof NetworkEvents.DISCONNECTED;\n\nexport type NetworkCallback = (event: NetworkEventType, details: any) => void;\n\nconst networkCallbacks: Set<NetworkCallback> = new Set();\n\nexport function subscribeToNetworkEvents(callback: NetworkCallback): () => void {\n  networkCallbacks.add(callback);\n\n  return () => {\n    networkCallbacks.delete(callback);\n  };\n}\n\nfunction notifyNetworkChange(event: NetworkEventType, details: any): void {\n  networkCallbacks.forEach((callback) => {\n    try {\n      callback(event, details);\n    } catch (error) {\n      console.error('Network callback error:', error);\n    }\n  });\n}\n\n// Initialize with periodic checking\nlet connectivityCheckInterval: NodeJS.Timeout | null = null;\n\nexport function startPeriodicConnectivityCheck(intervalMs: number = 30000): void {\n  if (connectivityCheckInterval) {\n    clearInterval(connectivityCheckInterval);\n  }\n\n  connectivityCheckInterval = setInterval(async () => {\n    const isConnected = await checkNetworkConnectivity();\n    const state = await NetInfo.fetch();\n    \n    if (isConnected) {\n      notifyNetworkChange(NetworkEvents.CONNECTED, state);\n    } else {\n      notifyNetworkChange(NetworkEvents.DISCONNECTED, state);\n    }\n  }, intervalMs);\n}\n\nexport function stopPeriodicConnectivityCheck(): void {\n  if (connectivityCheckInterval) {\n    clearInterval(connectivityCheckInterval);\n    connectivityCheckInterval = null;\n  }\n}\n\nexport const networkService = {\n  initialize: initializeNetworkListener,\n  cleanup: cleanupNetworkListener,\n  checkConnectivity: checkNetworkConnectivity,\n  checkInternetReachability,\n  subscribe: subscribeToNetworkEvents,\n  startPeriodicCheck: startPeriodicConnectivityCheck,\n  stopPeriodicCheck: stopPeriodicConnectivityCheck,\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/quizGenerator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/services/streakService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'yesterday' is assigned a value but never used.","line":51,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst STORAGE_KEY = '@learnsmart_streak';\n\ninterface StreakData {\n  lastOpenDate: string | null;\n  currentStreak: number;\n  longestStreak: number;\n}\n\nclass StreakService {\n  private data: StreakData = {\n    lastOpenDate: null,\n    currentStreak: 0,\n    longestStreak: 0,\n  };\n\n  async initialize(): Promise<void> {\n    try {\n      const stored = await AsyncStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        this.data = JSON.parse(stored);\n      }\n    } catch (error) {\n      console.error('Failed to load streak data:', error);\n    }\n  }\n\n  async checkAndUpdateStreak(): Promise<{\n    streak: number;\n    streakChanged: boolean;\n    streakReset: boolean;\n    isNewDay: boolean;\n  }> {\n    const today = this.getTodayDate();\n    const lastOpen = this.data.lastOpenDate;\n\n    // First time opening\n    if (!lastOpen) {\n      this.data.currentStreak = 1;\n      this.data.lastOpenDate = today;\n      await this.save();\n      return { streak: 1, streakChanged: true, streakReset: false, isNewDay: true };\n    }\n\n    // Already opened today\n    if (lastOpen === today) {\n      return { streak: this.data.currentStreak, streakChanged: false, streakReset: false, isNewDay: false };\n    }\n\n    const yesterday = this.getYesterdayDate();\n    const lastOpenDate = new Date(lastOpen);\n    const todayDate = new Date(today);\n    const daysDiff = Math.floor(\n      (todayDate.getTime() - lastOpenDate.getTime()) / (1000 * 60 * 60 * 24)\n    );\n\n    // Streak continues (opened yesterday)\n    if (daysDiff === 1) {\n      this.data.currentStreak += 1;\n      this.data.lastOpenDate = today;\n      \n      if (this.data.currentStreak > this.data.longestStreak) {\n        this.data.longestStreak = this.data.currentStreak;\n      }\n      \n      await this.save();\n      return { streak: this.data.currentStreak, streakChanged: true, streakReset: false, isNewDay: true };\n    }\n\n    // Streak broken (missed more than 1 day)\n    // Reset to 1 for new streak\n    this.data.currentStreak = 1;\n    this.data.lastOpenDate = today;\n    await this.save();\n    return { streak: 1, streakChanged: true, streakReset: true, isNewDay: true };\n  }\n\n  async getStreak(): Promise<number> {\n    return this.data.currentStreak;\n  }\n\n  async getLongestStreak(): Promise<number> {\n    return this.data.longestStreak;\n  }\n\n  async resetStreak(): Promise<void> {\n    this.data.currentStreak = 0;\n    this.data.lastOpenDate = null;\n    await this.save();\n  }\n\n  private async save(): Promise<void> {\n    try {\n      await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(this.data));\n    } catch (error) {\n      console.error('Failed to save streak data:', error);\n    }\n  }\n\n  private getTodayDate(): string {\n    const now = new Date();\n    return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n  }\n\n  private getYesterdayDate(): string {\n    const yesterday = new Date();\n    yesterday.setDate(yesterday.getDate() - 1);\n    return `${yesterday.getFullYear()}-${String(yesterday.getMonth() + 1).padStart(2, '0')}-${String(yesterday.getDate()).padStart(2, '0')}`;\n  }\n}\n\nexport const streakService = new StreakService();\n\n// React hook-friendly version\nexport const useStreakService = () => {\n  return {\n    checkAndUpdateStreak: () => streakService.checkAndUpdateStreak(),\n    getStreak: () => streakService.getStreak(),\n    getLongestStreak: () => streakService.getLongestStreak(),\n    resetStreak: () => streakService.resetStreak(),\n    initialize: () => streakService.initialize(),\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/achievementStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/chatStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/notificationStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/quizStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AsyncStorage' is defined but never used.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MAX_QUESTIONS' is assigned a value but never used.","line":38,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useXPStore } from './xpStore';\nimport { useAchievementStore } from './achievementStore';\nimport { coinRewardService } from '@/services/CoinRewardService';\nimport type { QuizQuestion, DifficultyLevel, QuizResult, MistakeRecord } from '@/types/quiz';\nimport { mistakeAnalysisService } from '@/services/MistakeAnalysisService';\n\ninterface QuizState {\n  questions: QuizQuestion[];\n  currentQuestionIndex: number;\n  selectedAnswers: Record<number, number>;\n  isQuizActive: boolean;\n  isLoading: boolean;\n  error: string | null;\n  score: number;\n  currentDifficulty: DifficultyLevel;\n  quizStartTime: number | null;\n  quizTopic: string;\n  quizSubject: string;\n  quizChapter: string;\n  \n  // Actions\n  setQuestions: (questions: QuizQuestion[], topic: string, subject: string, chapter: string) => void;\n  selectAnswer: (questionIndex: number, answerIndex: number) => void;\n  nextQuestion: () => void;\n  previousQuestion: () => void;\n  startQuiz: () => void;\n  endQuiz: () => Promise<QuizResult | null>;\n  resetQuiz: () => void;\n  setLoading: (loading: boolean) => void;\n  setError: (error: string | null) => void;\n  calculateScore: () => number;\n  setDifficulty: (difficulty: DifficultyLevel) => void;\n  updateAdaptiveDifficulty: () => DifficultyLevel;\n}\n\nconst MAX_QUESTIONS = 5;\n\nconst QUIZ_XP_AMOUNT = 50;\n\nexport const useQuizStore = create<QuizState>((set, get) => ({\n  questions: [],\n  currentQuestionIndex: 0,\n  selectedAnswers: {},\n  isQuizActive: false,\n  isLoading: false,\n  error: null,\n  score: 0,\n  currentDifficulty: 'medium',\n  quizStartTime: null,\n  quizTopic: '',\n  quizSubject: '',\n  quizChapter: '',\n\n  setQuestions: (questions, topic, subject, chapter) => {\n    set({\n      questions,\n      currentQuestionIndex: 0,\n      selectedAnswers: {},\n      score: 0,\n      isQuizActive: true,\n      error: null,\n      quizTopic: topic,\n      quizSubject: subject,\n      quizChapter: chapter,\n      quizStartTime: Date.now(),\n      currentDifficulty: questions[0]?.difficulty || 'medium',\n    });\n  },\n\n  selectAnswer: (questionIndex, answerIndex) => {\n    set((state) => ({\n      selectedAnswers: {\n        ...state.selectedAnswers,\n        [questionIndex]: answerIndex,\n      },\n    }));\n  },\n\n  nextQuestion: () => {\n    const { currentQuestionIndex, questions } = get();\n    if (currentQuestionIndex < questions.length - 1) {\n      set({ currentQuestionIndex: currentQuestionIndex + 1 });\n    }\n  },\n\n  previousQuestion: () => {\n    const { currentQuestionIndex } = get();\n    if (currentQuestionIndex > 0) {\n      set({ currentQuestionIndex: currentQuestionIndex - 1 });\n    }\n  },\n\n  startQuiz: () => {\n    set({\n      isQuizActive: true,\n      currentQuestionIndex: 0,\n      selectedAnswers: {},\n      error: null,\n    });\n  },\n\n  endQuiz: async () => {\n    const { calculateScore, questions, selectedAnswers, quizStartTime, quizTopic, quizSubject, quizChapter } = get();\n    const score = calculateScore();\n    const endTime = Date.now();\n    const timeSpent = quizStartTime ? (endTime - quizStartTime) / 1000 : 0;\n    \n    set({\n      isQuizActive: false,\n      score,\n    });\n\n    // Record mistakes for analysis\n    try {\n      for (let i = 0; i < questions.length; i++) {\n        const question = questions[i];\n        const userAnswer = selectedAnswers[i];\n        \n        if (userAnswer !== undefined && userAnswer !== question.correctAnswer) {\n          const mistake: MistakeRecord = {\n            id: `mistake_${Date.now()}_${i}`,\n            questionId: question.id,\n            question: question.question,\n            userAnswer,\n            correctAnswer: question.correctAnswer,\n            topic: question.topic,\n            subject: quizSubject,\n            chapter: quizChapter,\n            timestamp: Date.now(),\n            explanation: question.explanation,\n          };\n          await mistakeAnalysisService.recordMistake(mistake);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to record mistakes:', error);\n    }\n\n    // Record quiz result\n    try {\n      const quizResult: QuizResult = {\n        quizId: `quiz_${Date.now()}`,\n        score,\n        totalQuestions: questions.length,\n        correctAnswers: questions.filter((q, i) => selectedAnswers[i] === q.correctAnswer).length,\n        wrongAnswers: questions.filter((q, i) => selectedAnswers[i] !== undefined && selectedAnswers[i] !== q.correctAnswer).length,\n        timestamp: Date.now(),\n        timeSpent,\n        difficulty: get().currentDifficulty,\n        topic: quizTopic,\n      };\n      await mistakeAnalysisService.recordQuizResult(quizResult);\n    } catch (error) {\n      console.error('Failed to record quiz result:', error);\n    }\n\n    // Award XP and SmartCoins for completing a quiz\n    try {\n      const { addXP, incrementQuizzesCompleted, getXP } = useXPStore.getState();\n      const { checkAndUnlock } = useAchievementStore.getState();\n      \n      await addXP(QUIZ_XP_AMOUNT);\n      incrementQuizzesCompleted();\n      \n      // Award SmartCoins for quiz completion\n      const correctCount = get().questions.filter(\n        (q, i) => get().selectedAnswers[i] === q.correctAnswer\n      ).length;\n      await coinRewardService.rewardQuizCompletion(correctCount, get().questions.length);\n      \n      // Check for quiz and XP achievements\n      const { totalQuizzesCompleted, totalLessonsRead } = useXPStore.getState();\n      checkAndUnlock({\n        currentStreak: 0, // Will be updated from streak service\n        totalQuizzesCompleted,\n        totalLessonsRead,\n        currentXP: getXP(),\n        rank: useXPStore.getState().getRank().name,\n      });\n\n      // Return quiz result for analytics\n      return {\n        quizId: `quiz_${Date.now()}`,\n        score,\n        totalQuestions: questions.length,\n        correctAnswers: correctCount,\n        wrongAnswers: questions.length - correctCount,\n        timestamp: Date.now(),\n        timeSpent,\n        difficulty: get().currentDifficulty,\n        topic: quizTopic,\n      };\n    } catch (error) {\n      console.error('Failed to award rewards for quiz:', error);\n      return null;\n    }\n  },\n\n  resetQuiz: () => {\n    set({\n      questions: [],\n      currentQuestionIndex: 0,\n      selectedAnswers: {},\n      isQuizActive: false,\n      isLoading: false,\n      error: null,\n      score: 0,\n      currentDifficulty: 'medium',\n      quizStartTime: null,\n      quizTopic: '',\n      quizSubject: '',\n      quizChapter: '',\n    });\n  },\n\n  setLoading: (loading) => {\n    set({ isLoading: loading });\n  },\n\n  setError: (error) => {\n    set({ error: error });\n  },\n\n  calculateScore: () => {\n    const { questions, selectedAnswers } = get();\n    if (questions.length === 0) return 0;\n\n    let correctCount = 0;\n    questions.forEach((question, index) => {\n      if (selectedAnswers[index] === question.correctAnswer) {\n        correctCount++;\n      }\n    });\n\n    return Math.round((correctCount / questions.length) * 100);\n  },\n\n  setDifficulty: (difficulty) => {\n    set({ currentDifficulty: difficulty });\n  },\n\n  updateAdaptiveDifficulty: () => {\n    const { calculateScore } = get();\n    const score = calculateScore();\n    \n    let newDifficulty: DifficultyLevel = 'medium';\n    if (score >= 80) {\n      newDifficulty = 'hard';\n    } else if (score < 60) {\n      newDifficulty = 'easy';\n    }\n    \n    set({ currentDifficulty: newDifficulty });\n    return newDifficulty;\n  },\n}));\n\n// Selector hooks for derived state\nexport const useCurrentQuestion = () => {\n  const { questions, currentQuestionIndex } = useQuizStore();\n  return questions[currentQuestionIndex];\n};\n\nexport const useQuizProgress = () => {\n  const { questions, currentQuestionIndex, selectedAnswers } = useQuizStore();\n  return {\n    current: currentQuestionIndex + 1,\n    total: questions.length,\n    answeredCount: Object.keys(selectedAnswers).length,\n    isLastQuestion: currentQuestionIndex === questions.length - 1,\n  };\n};\n\nexport const useIsQuestionAnswered = (questionIndex: number) => {\n  const selectedAnswers = useQuizStore((state) => state.selectedAnswers);\n  return selectedAnswers[questionIndex] !== undefined;\n};\n\n// XP constants\nexport const QUIZ_COMPLETE_XP = QUIZ_XP_AMOUNT;\nexport const LESSON_READ_XP = 10;\n\nexport type { QuizQuestion, DifficultyLevel, QuizResult, MistakeRecord };\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/userStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/voiceNoteStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/store/xpStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rankSystem' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { coinRewardService } from '@/services/CoinRewardService';\nimport { rankSystem } from '@/utils/rankSystem';\n\nexport interface Rank {\n  name: string;\n  level: number;\n  icon: string;\n  minXP: number;\n  maxXP: number;\n  color: string;\n  message: string;\n}\n\nexport const RANKS: Rank[] = [\n  {\n    name: 'Novice',\n    level: 1,\n    icon: 'üå±',\n    minXP: 0,\n    maxXP: 500,\n    color: '#9CAF88',\n    message: 'Welcome, Novice! Your learning journey begins now.',\n  },\n  {\n    name: 'Scholar',\n    level: 2,\n    icon: 'üìö',\n    minXP: 500,\n    maxXP: 1500,\n    color: '#5D8AA8',\n    message: 'Welcome to Scholar rank! Your dedication is showing.',\n  },\n  {\n    name: 'Sage',\n    level: 3,\n    icon: 'üßô',\n    minXP: 1500,\n    maxXP: 3000,\n    color: '#9B7EBD',\n    message: 'You\\'ve achieved Sage status! Wisdom is yours.',\n  },\n  {\n    name: 'Master',\n    level: 4,\n    icon: 'üéì',\n    minXP: 3000,\n    maxXP: 5000,\n    color: '#FF6B35',\n    message: 'You\\'ve reached Master level! Excellence achieved.',\n  },\n  {\n    name: 'Guru',\n    level: 5,\n    icon: 'üß†',\n    minXP: 5000,\n    maxXP: Infinity,\n    color: '#FFD700',\n    message: 'You\\'re a Guru! Ultimate wisdom attained.',\n  },\n];\n\nconst STORAGE_KEY = '@learnsmart_xp';\n\ninterface XPState {\n  currentXP: number;\n  totalLessonsRead: number;\n  totalQuizzesCompleted: number;\n  lastXPUpdate: string | null;\n  \n  // Actions\n  addXP: (amount: number) => Promise<{ rankUp: boolean; newRank?: Rank; milestone?: string }>;\n  getXP: () => number;\n  getRank: () => Rank;\n  getXPToNextRank: () => number;\n  getProgressToNextRank: () => number;\n  incrementLessonsRead: () => void;\n  incrementQuizzesCompleted: () => void;\n  loadXP: () => Promise<void>;\n  resetXP: () => Promise<void>;\n}\n\nexport const useXPStore = create<XPState>((set, get) => ({\n  currentXP: 0,\n  totalLessonsRead: 0,\n  totalQuizzesCompleted: 0,\n  lastXPUpdate: null,\n\n  addXP: async (amount: number) => {\n    const { currentXP, getRank } = get();\n    const oldRank = getRank();\n    const newXP = currentXP + amount;\n    const newRank = getRank();\n    \n    // Determine if we crossed a rank threshold\n    let rankUp = false;\n    let milestone: string | undefined;\n    \n    if (newXP >= newRank.minXP && oldRank.name !== newRank.name) {\n      rankUp = true;\n      milestone = newRank.message;\n      \n      // Award SmartCoins for rank up\n      coinRewardService.rewardRankUp(newRank.name);\n    }\n\n    set({\n      currentXP: newXP,\n      lastXPUpdate: new Date().toISOString(),\n    });\n\n    try {\n      await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify({\n        currentXP: newXP,\n        totalLessonsRead: get().totalLessonsRead,\n        totalQuizzesCompleted: get().totalQuizzesCompleted,\n        lastXPUpdate: new Date().toISOString(),\n      }));\n    } catch (error) {\n      console.error('Failed to save XP:', error);\n    }\n\n    return { rankUp, newRank, milestone };\n  },\n\n  getXP: () => {\n    return get().currentXP;\n  },\n\n  getRank: () => {\n    const xp = get().currentXP;\n    for (const rank of RANKS) {\n      if (xp >= rank.minXP && xp <= rank.maxXP) {\n        return rank;\n      }\n    }\n    return RANKS[0]; // Default to Novice\n  },\n\n  getXPToNextRank: () => {\n    const currentRank = get().getRank();\n    const rankIndex = RANKS.findIndex((r) => r.name === currentRank.name);\n    \n    if (rankIndex >= RANKS.length - 1) {\n      return Infinity; // Already at max rank\n    }\n    \n    const nextRank = RANKS[rankIndex + 1];\n    return nextRank.minXP - get().currentXP;\n  },\n\n  getProgressToNextRank: () => {\n    const currentRank = get().getRank();\n    const rankIndex = RANKS.findIndex((r) => r.name === currentRank.name);\n    \n    if (rankIndex >= RANKS.length - 1) {\n      return 1; // Max rank, 100% progress\n    }\n    \n    const nextRank = RANKS[rankIndex + 1];\n    const xpInCurrentRank = get().currentXP - currentRank.minXP;\n    const xpNeededForNextRank = nextRank.minXP - currentRank.minXP;\n    \n    return Math.min(xpInCurrentRank / xpNeededForNextRank, 1);\n  },\n\n  incrementLessonsRead: () => {\n    set((state) => ({ totalLessonsRead: state.totalLessonsRead + 1 }));\n  },\n\n  incrementQuizzesCompleted: () => {\n    set((state) => ({ totalQuizzesCompleted: state.totalQuizzesCompleted + 1 }));\n  },\n\n  loadXP: async () => {\n    try {\n      const data = await AsyncStorage.getItem(STORAGE_KEY);\n      if (data) {\n        const parsed = JSON.parse(data);\n        set({\n          currentXP: parsed.currentXP || 0,\n          totalLessonsRead: parsed.totalLessonsRead || 0,\n          totalQuizzesCompleted: parsed.totalQuizzesCompleted || 0,\n          lastXPUpdate: parsed.lastXPUpdate || null,\n        });\n      }\n    } catch (error) {\n      console.error('Failed to load XP:', error);\n    }\n  },\n\n  resetXP: async () => {\n    set({\n      currentXP: 0,\n      totalLessonsRead: 0,\n      totalQuizzesCompleted: 0,\n      lastXPUpdate: null,\n    });\n    try {\n      await AsyncStorage.removeItem(STORAGE_KEY);\n    } catch (error) {\n      console.error('Failed to reset XP:', error);\n    }\n  },\n}));\n\n// Hook for getting rank with color\nexport const useCurrentRank = () => {\n  const getRank = useXPStore((state) => state.getRank);\n  const getProgress = useXPStore((state) => state.getProgressToNextRank);\n  const currentXP = useXPStore((state) => state.currentXP);\n  const getXPToNext = useXPStore((state) => state.getXPToNextRank);\n  \n  return {\n    rank: getRank(),\n    progress: getProgress(),\n    currentXP,\n    xpToNext: getXPToNext(),\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/styles/theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/types/analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/types/content.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/types/notes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/types/productivity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/types/qa.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/types/quiz.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/affiliateLinks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/contentRating.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/errorLogger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/rankSystem.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":4,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[101,104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[101,104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[118,121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[118,121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useXPStore, RANKS } from '@/store/xpStore';\n\nexport interface RankProgress {\n  currentRank: any;\n  nextRank: any | null;\n  xpToNext: number;\n  progress: number;\n  rankUp: boolean;\n  milestoneReached: string[];\n}\n\nexport interface RankMilestone {\n  rankName: string;\n  level: number;\n  icon: string;\n  color: string;\n  message: string;\n  unlockConditions: string[];\n  benefits: string[];\n}\n\nexport class RankSystem {\n  private static instance: RankSystem;\n\n  static getInstance(): RankSystem {\n    if (!RankSystem.instance) {\n      RankSystem.instance = new RankSystem();\n    }\n    return RankSystem.instance;\n  }\n\n  // Get current rank with enhanced data\n  getCurrentRankData(): RankMilestone {\n    const rank = useXPStore.getState().getRank();\n    return this.getRankData(rank.name);\n  }\n\n  // Get rank data by name\n  getRankData(rankName: string): RankMilestone {\n    const rank = RANKS.find(r => r.name === rankName);\n    if (!rank) {\n      return this.getDefaultRankData();\n    }\n\n    const milestoneData: RankMilestone = {\n      rankName: rank.name,\n      level: rank.level,\n      icon: rank.icon,\n      color: rank.color,\n      message: rank.message,\n      unlockConditions: this.getUnlockConditions(rank.name),\n      benefits: this.getRankBenefits(rank.name),\n    };\n\n    return milestoneData;\n  }\n\n  // Get unlock conditions for a rank\n  private getUnlockConditions(rankName: string): string[] {\n    const conditions: { [key: string]: string[] } = {\n      'Novice': ['Create an account'],\n      'Scholar': ['Reach 500 XP'],\n      'Sage': ['Reach 1,500 XP'],\n      'Master': ['Reach 3,000 XP'],\n      'Guru': ['Reach 5,000 XP'],\n    };\n\n    return conditions[rankName] || [];\n  }\n\n  // Get benefits for reaching a rank\n  private getRankBenefits(rankName: string): string[] {\n    const benefits: { [key: string]: string[] } = {\n      'Novice': ['Basic avatar selection', 'Access to all lessons'],\n      'Scholar': ['Unlock Scholar avatar', 'Weekly leaderboard access', '10 bonus coins'],\n      'Sage': ['Unlock Sage avatar', 'Advanced challenges', 'Priority support', '25 bonus coins'],\n      'Master': ['Unlock Master avatar', 'Exclusive content', 'Mentor badge', '50 bonus coins'],\n      'Guru': ['Unlock Guru avatar', 'VIP features', 'Content creator access', '100 bonus coins'],\n    };\n\n    return benefits[rankName] || [];\n  }\n\n  // Get rank progression without hooks (for non-component usage)\n  getRankProgression(): RankProgress {\n    const store = useXPStore.getState();\n    const rank = store.getRank();\n    const progress = store.getProgressToNextRank();\n    const currentXP = store.currentXP;\n    const xpToNext = store.getXPToNextRank();\n    const currentRankIndex = RANKS.findIndex(r => r.name === rank.name);\n    const nextRank = currentRankIndex < RANKS.length - 1 ? RANKS[currentRankIndex + 1] : null;\n\n    return {\n      currentRank: this.getRankData(rank.name),\n      nextRank: nextRank ? this.getRankData(nextRank.name) : null,\n      xpToNext,\n      progress,\n      rankUp: progress >= 1 && nextRank !== null,\n      milestoneReached: this.getMilestoneReached(currentXP),\n    };\n  }\n\n  // Get milestones reached based on XP\n  private getMilestoneReached(currentXP: number): string[] {\n    const milestones: string[] = [];\n    \n    if (currentXP >= 500) milestones.push('Scholar');\n    if (currentXP >= 1500) milestones.push('Sage');\n    if (currentXP >= 3000) milestones.push('Master');\n    if (currentXP >= 5000) milestones.push('Guru');\n\n    return milestones;\n  }\n\n  // Check if user can rank up\n  canRankUp(): boolean {\n    const progression = this.getRankProgression();\n    return progression.rankUp;\n  }\n\n  // Get XP needed for next rank\n  getXPForNextRank(): number {\n    const progression = this.getRankProgression();\n    return progression.xpToNext;\n  }\n\n  // Get progress percentage to next rank\n  getProgressPercentage(): number {\n    const progression = this.getRankProgression();\n    return Math.round(progression.progress * 100);\n  }\n\n  // Get estimated time to next rank (based on average daily XP)\n  getEstimatedDaysToNextRank(averageDailyXP: number = 50): number {\n    const xpNeeded = this.getXPForNextRank();\n    if (averageDailyXP <= 0) return 0;\n    return Math.ceil(xpNeeded / averageDailyXP);\n  }\n\n  // Get rank celebration message\n  getRankUpMessage(newRankName: string): string {\n    const messages: { [key: string]: string } = {\n      'Scholar': 'üéì Welcome to Scholar rank! You\\'re becoming a true learner!',\n      'Sage': 'üßô‚Äç‚ôÇÔ∏è Congratulations! You\\'ve achieved Sage status with wisdom!',\n      'Master': 'üéâ Incredible! You\\'ve reached Master level - excellence achieved!',\n      'Guru': 'üåü AMAZING! You\\'re now a Guru - ultimate wisdom attained!',\n    };\n\n    return messages[newRankName] || 'üéä Congratulations on your achievement!';\n  }\n\n  // Get rank-based avatar unlocks\n  getRankAvatarUnlocks(): { [key: string]: string[] } {\n    return {\n      'Novice': ['Robot'],\n      'Scholar': ['Owl', 'BookCharacter'],\n      'Sage': ['Dragon', 'Wizard', 'BrainCharacter'],\n      'Master': ['GoldenOwl', 'Phoenix'],\n      'Guru': ['Astronaut', 'Alien'],\n    };\n  }\n\n  // Get avatars unlocked by current rank\n  getUnlockedAvatarsForCurrentRank(): string[] {\n    const currentRank = useXPStore.getState().getRank().name;\n    const avatarUnlocks = this.getRankAvatarUnlocks();\n    return avatarUnlocks[currentRank] || [];\n  }\n\n  // Check if user has reached all milestones\n  hasReachedAllMilestones(): boolean {\n    const currentXP = useXPStore.getState().getXP();\n    return currentXP >= 5000; // Guru rank\n  }\n\n  // Get next milestone\n  getNextMilestone(): { rank: string; xp: number; message: string } | null {\n    const currentXP = useXPStore.getState().getXP();\n    \n    const milestones = [\n      { rank: 'Scholar', xp: 500, message: 'Reach 500 XP to become a Scholar' },\n      { rank: 'Sage', xp: 1500, message: 'Reach 1,500 XP to achieve Sage status' },\n      { rank: 'Master', xp: 3000, message: 'Reach 3,000 XP to become a Master' },\n      { rank: 'Guru', xp: 5000, message: 'Reach 5,000 XP to become a Guru' },\n    ];\n\n    for (const milestone of milestones) {\n      if (currentXP < milestone.xp) {\n        return milestone;\n      }\n    }\n\n    return null; // All milestones reached\n  }\n\n  // Get rank history (for display)\n  getRankHistory(): Array<{ rank: string; date: string; xp: number }> {\n    // In a real app, you'd track when each rank was achieved\n    // For now, return empty array\n    return [];\n  }\n\n  // Default rank data for fallback\n  private getDefaultRankData(): RankMilestone {\n    return {\n      rankName: 'Unknown',\n      level: 0,\n      icon: '‚ùì',\n      color: '#999999',\n      message: 'Unknown rank',\n      unlockConditions: [],\n      benefits: [],\n    };\n  }\n\n  // Get all ranks with their thresholds\n  getAllRanks(): Array<{ name: string; level: number; minXP: number; maxXP: number; icon: string; color: string }> {\n    return RANKS.map(rank => ({\n      name: rank.name,\n      level: rank.level,\n      minXP: rank.minXP,\n      maxXP: rank.maxXP === Infinity ? 999999 : rank.maxXP,\n      icon: rank.icon,\n      color: rank.color,\n    }));\n  }\n\n  // Calculate XP bonus for rank\n  getRankXPMultiplier(rankName: string): number {\n    const multipliers: { [key: string]: number } = {\n      'Novice': 1.0,\n      'Scholar': 1.1, // 10% bonus\n      'Sage': 1.2,    // 20% bonus\n      'Master': 1.3,  // 30% bonus\n      'Guru': 1.5,    // 50% bonus\n    };\n\n    return multipliers[rankName] || 1.0;\n  }\n\n  // Apply XP bonus based on rank\n  applyRankBonus(baseXP: number): number {\n    const currentRank = useXPStore.getState().getRank().name;\n    const multiplier = this.getRankXPMultiplier(currentRank);\n    return Math.round(baseXP * multiplier);\n  }\n}\n\nexport const rankSystem = RankSystem.getInstance();","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/sanitizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/translationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/treeGrowth.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rotationValue' is assigned a value but never used.","line":50,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Animated } from 'react-native';\nimport { Tree } from '@/types/productivity';\n\nexport interface TreeGrowthStage {\n  growthPercentage: number;\n  scale: number;\n  rotation: number;\n  opacity: number;\n  description: string;\n}\n\nexport const TREE_GROWTH_STAGES: TreeGrowthStage[] = [\n  { growthPercentage: 0, scale: 0.2, rotation: 0, opacity: 1, description: 'Seed planted' },\n  { growthPercentage: 10, scale: 0.3, rotation: 0, opacity: 1, description: 'Sprouting' },\n  { growthPercentage: 20, scale: 0.4, rotation: 5, opacity: 1, description: 'Small sapling' },\n  { growthPercentage: 30, scale: 0.5, rotation: 0, opacity: 1, description: 'Growing' },\n  { growthPercentage: 40, scale: 0.6, rotation: -5, opacity: 1, description: 'Getting taller' },\n  { growthPercentage: 50, scale: 0.7, rotation: 0, opacity: 1, description: 'Half grown' },\n  { growthPercentage: 60, scale: 0.8, rotation: 3, opacity: 1, description: 'Branches forming' },\n  { growthPercentage: 70, scale: 0.85, rotation: 0, opacity: 1, description: 'Almost there' },\n  { growthPercentage: 80, scale: 0.9, rotation: -3, opacity: 1, description: 'Nearly full' },\n  { growthPercentage: 90, scale: 0.95, rotation: 0, opacity: 1, description: 'Almost mature' },\n  { growthPercentage: 100, scale: 1.0, rotation: 0, opacity: 1, description: 'Fully grown!' },\n];\n\nexport const getGrowthStage = (growth: number): TreeGrowthStage => {\n  for (let i = TREE_GROWTH_STAGES.length - 1; i >= 0; i--) {\n    if (growth >= TREE_GROWTH_STAGES[i].growthPercentage) {\n      return TREE_GROWTH_STAGES[i];\n    }\n  }\n  return TREE_GROWTH_STAGES[0];\n};\n\nexport const interpolateGrowth = (\n  growth: number\n): {\n  scale: number;\n  rotation: string;\n} => {\n  const stage = getGrowthStage(growth);\n  return {\n    scale: stage.scale,\n    rotation: `${stage.rotation}deg`,\n  };\n};\n\nexport const createGrowthAnimation = (currentGrowth: number, targetGrowth: number): Animated.CompositeAnimation => {\n  const scaleValue = new Animated.Value(currentGrowth / 100);\n  const rotationValue = new Animated.Value(0);\n\n  const targetScale = targetGrowth / 100;\n\n  return Animated.parallel([\n    Animated.timing(scaleValue, {\n      toValue: targetScale,\n      duration: 300,\n      useNativeDriver: true,\n    }),\n  ]);\n};\n\nexport const createTreeDeathAnimation = (): Animated.CompositeAnimation => {\n  const opacityValue = new Animated.Value(1);\n  const scaleValue = new Animated.Value(1);\n  const rotationValue = new Animated.Value(0);\n\n  return Animated.parallel([\n    Animated.timing(opacityValue, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: true,\n    }),\n    Animated.timing(scaleValue, {\n      toValue: 0.5,\n      duration: 500,\n      useNativeDriver: true,\n    }),\n    Animated.timing(rotationValue, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: true,\n    }),\n  ]);\n};\n\nexport const createTreeReviveAnimation = (): Animated.CompositeAnimation => {\n  const scaleValue = new Animated.Value(0.2);\n  const opacityValue = new Animated.Value(0);\n\n  return Animated.sequence([\n    Animated.timing(scaleValue, {\n      toValue: 1,\n      duration: 400,\n      useNativeDriver: true,\n    }),\n    Animated.timing(opacityValue, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: true,\n    }),\n  ]);\n};\n\nexport const getTreeColor = (treeType: Tree['type'], alive: boolean): string => {\n  if (!alive) return '#8B7355'; // Brown for dead trees\n\n  const colors: Record<Tree['type'], string> = {\n    oak: '#4A6741',\n    pine: '#2D5016',\n    cherry: '#FFB7C5',\n    willow: '#90EE90',\n    maple: '#FF8C00',\n  };\n  return colors[treeType] || '#4A6741';\n};\n\nexport const getTreeTrunkColor = (treeType: Tree['type']): string => {\n  const colors: Record<Tree['type'], string> = {\n    oak: '#8B4513',\n    pine: '#654321',\n    cherry: '#A0522D',\n    willow: '#8B7355',\n    maple: '#8B4513',\n  };\n  return colors[treeType] || '#8B4513';\n};\n\nexport const calculateFocusScore = (\n  studyTime: number,\n  targetTime: number,\n  treeSurvived: boolean\n): number => {\n  // Base score from time spent\n  const timeScore = Math.min((studyTime / targetTime) * 60, 60);\n  \n  // Bonus for tree survival\n  const treeBonus = treeSurvived ? 40 : 0;\n  \n  // Calculate total score (0-100)\n  const totalScore = Math.round(timeScore + treeBonus);\n  \n  return Math.min(totalScore, 100);\n};\n\nexport const getFocusScoreLabel = (score: number): string => {\n  if (score >= 90) return 'Excellent! üåü';\n  if (score >= 70) return 'Great job! üëè';\n  if (score >= 50) return 'Good focus! üëç';\n  if (score >= 30) return 'Keep going! üí™';\n  return 'Start fresh! üå±';\n};\n\nexport const getFocusScoreColor = (score: number): string => {\n  if (score >= 90) return '#4CAF50'; // Green\n  if (score >= 70) return '#8BC34A'; // Light green\n  if (score >= 50) return '#FFC107'; // Yellow\n  if (score >= 30) return '#FF9800'; // Orange\n  return '#F44336'; // Red\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/typoCorrection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/engine/project/utils/uploadLimits.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
